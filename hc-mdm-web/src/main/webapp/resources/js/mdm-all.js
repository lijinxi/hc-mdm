Ext.define("Hc_mdm.Application",{extend:"Ext.app.Application",name:"Hc_mdm",appFolder:"resources/app",init:function(){var a=this;console.info("执行力没有大按法点法");Ext.setGlyphFontFamily("FontAwesome");Ext.QuickTips.init()},launch:function(){}});
Ext.define("Hc_mdm.model.BasAccountPeriod",{extend:"Ext.data.Model",alias:"model.basaccountperiod",fields:[{name:"accountYearMonth",text:"会计年月",type:"string"},{name:"beginDate",text:"开始日期",type:"string"},{name:"endDate",text:"结束日期",type:"string"},{name:"orderNo",text:"排列序号",type:"string"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"string"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasBillType",{extend:"Ext.data.Model",alias:"model.basbilltype",fields:[{name:"billTypeNo",text:"单据类型编号",type:"string"},{name:"billTypeName",text:"单据类型名称",type:"string"},{name:"codeRuleNo",text:"编码规则编号",type:"string"},{name:"billGroup",text:"单据分组(取自数据字典 bill_group )",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasBom",{extend:"Ext.data.Model",alias:"model.basbom",fields:[{name:"bomId",text:"BOMID",type:"int"},{name:"brandNo",text:"品牌",type:"string"},{name:"materialNo",text:"物料编号",type:"string"},{name:"bomType",text:"BOM分类(1=标准BOM 2=配置BOM)",type:"int"},{name:"bomPurpose",text:"BOM用途(S2=开发 STD=标准 SUB=委外 SPD=预测)",type:"string"},{name:"versionNo",text:"版本序号(1->n)",type:"int"},{name:"bomStatus",text:"BOM状态(0=编辑 1=审核 2=生效)",type:"int"},{name:"modifier",text:"最后修改人",type:"string"},{name:"modifyTime",text:"最后修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},{name:"brandNo",text:"品牌",type:"string"}]});
Ext.define("Hc_mdm.model.BasBomList",{extend:"Ext.data.Model",alias:"model.basbomlist",fields:[{name:"lineId",text:"行id(主键)",type:"int"},{name:"bomId",text:"BOMID",type:"int"},{name:"orderNo",text:"序号",type:"int"},{name:"brandNo",text:"品牌",type:"string"},{name:"materialNo",text:"",type:"string"},{name:"bomPurpose",text:"BOM用途(S2=开发 STD=标准 SUB=委外 SPD=预测)",type:"string",allowNull:true},{name:"dosageNumerator",text:"用量(分子)",type:"float",allowNull:true},{name:"dosageDenominator",text:"用量(分母)",type:"float",allowNull:true},{name:"pdTypeNo",text:"用途(产品设计材料类别编号)",type:"string",allowNull:true},{name:"storeNo",text:"预设仓库(仓库编号)",type:"string",allowNull:true},{name:"isVirtual",text:"是否虚拟件(0=否 1=是)",type:"int",allowNull:true}],idProperty:"orderNo",identifier:"negative"});
Ext.define("Hc_mdm.model.BasBomListSize",{extend:"Hc_Common.model.MaterialSize",alias:"model.basbomlistsize",fields:[{name:"orderNo",text:"序号",type:"int"},{name:"materialNo",text:"物料编号",type:"string"},{name:"materialCode",text:"物料编码",type:"string"},{name:"materialName",text:"物料名称",type:"string"},{name:"newSizeTypeNo",text:"清单码组",type:"string"},{name:"sizeTypeNo",text:"表头码组",type:"string"},{name:"oldSizeNo",text:"表头码编号",type:"string"},{name:"newSizeNo",text:"清单码编号",type:"string"}]});
Ext.define("Hc_mdm.model.BasBrand",{extend:"Ext.data.Model",alias:"model.basbrand",fields:[{name:"brandId",text:"品牌id",type:"int"},{name:"brandNo",text:"品牌编号",type:"string"},{name:"brandCode",text:"品牌编码",type:"string"},{name:"brandEname",text:"品牌英文名",type:"string"},{name:"brandCname",text:"品牌中文名",type:"string"},{name:"brandCategory",text:"品牌类别",type:"string"},{name:"brandUpperNo",text:"品牌部编号",type:"string"},{name:"specialCode",text:"特征码",type:"string"},{name:"affiliation",text:"本部编码",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasBrandRelation",{extend:"Ext.data.Model",alias:"model.basbrandrelation",fields:[{name:"brandNo",text:"品牌编号",type:"string"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"companyNo",text:"公司编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasCategory",{extend:"Ext.data.Model",alias:"model.bascategory",fields:[{name:"categoryId",text:"类别id",type:"int"},{name:"categoryNo",text:"类别编号",type:"string"},{name:"categoryName",text:"类别名称",type:"string"},{name:"specialCode",text:"特征码",type:"string"},{name:"parentCategoryId",text:"上级类别",type:"int"},{name:"levelNo",text:"类别级别",type:"int"},{name:"searchCode",text:"类别路径",type:"string"},{name:"affiliation",text:"本部编码",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态",type:"int"},{name:"creator",text:"创建人",type:"string"},{name:"createTime",text:"创建时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"}],idProperty:"categoryId",identifier:"negative"});
Ext.define("Hc_mdm.model.BasCity",{extend:"Ext.data.Model",alias:"model.bascity",fields:[{name:"cityNo",text:"行政市编号",type:"string"},{name:"cityName",text:"行政市名称",type:"string"},{name:"cityLname",text:"行政市详细名称",type:"string"},{name:"cityOpcode",text:"行政市特征码(3位字母或数字,同省下不可以重复)",type:"string",defaultValue:"---"},{name:"provinceNo",text:"所属行政省编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasCodeRule",{extend:"Ext.data.Model",alias:"model.bascoderule",fields:[{name:"codeRuleNo",text:"编码规则编号",type:"string"},{name:"codeRuleName",text:"编码规则名称",type:"string"},{name:"codeRuleType",text:"规则类型",type:"int"},{name:"allowManualEdit",text:"允许手工编辑",type:"int"},{name:"keepContinuous",text:"保持连续编号",type:"int"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"date"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"date"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasCodeRuleDtl",{extend:"Ext.data.Model",alias:"model.bascoderuledtl",fields:[{name:"codeRuleId",text:"编码规则明细ID",type:"int"},{name:"codeRuleNo",text:"编码规则编号",type:"string"},{name:"codeBeginPosition",text:"编码开始位置",type:"int"},{name:"codeEndPosition",text:"编码结束位置",type:"int"},{name:"charLength",text:"字符长度",type:"int"},{name:"codeType",text:"编码类型",type:"int"},{name:"constValue",text:"常量值",type:"string"},{name:"dateFormatValue",text:"日期格式化值",type:"string"},{name:"fieldValue",text:"字段值",type:"string"},{name:"cutBeginPosition",text:"字段截取开始位置",type:"int"},{name:"cutEndPosition",text:"字段截取结束位置",type:"int"},{name:"currentSerialDate",text:"当前流水日期",type:"date"},{name:"currentSerialNo",text:"当前流水号",type:"int"},{name:"resetMode",text:"重置方式",type:"int"},{name:"padChar",text:"补位符",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"date"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"date"},{name:"remarks",text:"备注",type:"string"}],idProperty:"orderNo",identifier:"sequential"});
Ext.define("Hc_mdm.model.BasColor",{extend:"Ext.data.Model",alias:"model.bascolor",fields:[{name:"colorId",text:"颜色id(对应 color_id )",type:"int"},{name:"colorNo",text:"颜色编号(对应 color_no )",type:"string"},{name:"colorCode",text:"颜色编码(对应 color_code )",type:"string"},{name:"colorName",text:"颜色名称(对应 color_name )",type:"string"},{name:"colorSeriesCode",text:"色系编码(对应 color_series_no )",type:"string"},{name:"colorSeriesName",text:"色系名称(对应 color_series_name )",type:"string"},{name:"orderNo",text:"排列序号(对应 order_no )",type:"int"},{name:"enableFlag",text:"启用状态(对应 status 0=未生效 1=启用 )",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人(对应 editor )",type:"string"},{name:"modifyTime",text:"修改时间(对应 edittm )"},{name:"remarks",text:"备注(对应 remarks )",type:"string"},]});
Ext.define("Hc_mdm.model.BasCompany",{extend:"Ext.data.Model",alias:"model.bascompany",fields:[{name:"companyNo",text:"公司编号",type:"string"},{name:"companyName",text:"公司名称",type:"string"},{name:"companyType",text:"公司类型(0=法人组织 1=利润中心)",type:"int",defaultValue:1},{name:"companyForm",text:"公司形态(数据字典 company_form )",type:"string",defaultValue:"公司"},{name:"regionNo",text:"地区编号",type:"string"},{name:"bankName",text:"开户银行",type:"string"},{name:"bankAccountCode",text:"银行账号",type:"string"},{name:"bankAccountName",text:"银行账户名",type:"string"},{name:"contacter",text:"联系人",type:"string"},{name:"mobileNo",text:"手机号码",type:"string"},{name:"taxpayingNo",text:"税务登记号",type:"string"},{name:"taxLevel",text:"纳税级别(0=一般纳税人 1=小规模纳税人)",type:"int"},{name:"legalPerson",text:"法人代表",type:"string"},{name:"certificateCode",text:"营业证号",type:"string"},{name:"faxNo",text:"传真号",type:"string"},{name:"email",text:"电子邮箱",type:"string"},{name:"postCode",text:"邮政编码",type:"string"},{name:"provinceNo",text:"行政省编号",type:"string"},{name:"cityNo",text:"行政市编号",type:"string"},{name:"countyNo",text:"行政县编号",type:"string"},{name:"contactAddress",text:"联系地址",type:"string"},{name:"businessFunctions",text:"业务职能(2的倍数，每一位代表一项)",type:"int"},{name:"dataSource",text:"数据来源(0=主数据 1=工厂)",type:"int"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasCountry",{extend:"Ext.data.Model",alias:"model.bascountry",fields:[{name:"countryNo",text:"国家编号",type:"string"},{name:"countryName",text:"国家名称",type:"string"},{name:"currencyNo",text:"币别编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasCounty",{extend:"Ext.data.Model",alias:"model.bascounty",fields:[{name:"countyNo",text:"行政县编号",type:"string"},{name:"countyName",text:"行政县名称",type:"string"},{name:"countyLname",text:"行政县详细名称",type:"string"},{name:"countyOpcode",text:"行政县特征码(2位字母或数字,同城市下不可以重复)",type:"string"},{name:"cityNo",text:"所属行政市编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasCurrency",{extend:"Ext.data.Model",alias:"model.bascurrency",fields:[{name:"currencyNo",text:"币别编号",type:"string"},{name:"currencyName",text:"币别名称",type:"string"},{name:"currencySymbol",text:"币别符号",type:"string"},{name:"isSymbolDisplay",text:"是否显示符号(0=否 1=是)",type:"int"},{name:"fomart",text:"显示格式",type:"string"},{name:"priceDigits",text:"单价小数位数",type:"int"},{name:"valueDigits",text:"金额小数位数",type:"int"},{name:"enableFlag",text:"启用状态(0=未生效 1=启用)",type:"int",defaultValue:1},{name:"orderNo",text:"排列序号",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasCustomer",{extend:"Ext.data.Model",alias:"model.bascustomer",fields:[{name:"customerNo",text:"客户编号",type:"string"},{name:"customerCode",text:"客户编码",type:"string"},{name:"customerName",text:"客户简称",type:"string"},{name:"customerLname",text:"客户全称",type:"string"},{name:"customerType",text:"客户类型",type:"string"},{name:"customerLevel",text:"客户等级",type:"string"},{name:"customerGroup",text:"客户群组",type:"string"},{name:"regionNo",text:"地区编码",type:"string"},{name:"managingCityNo",text:"管理城市编码",type:"string"},{name:"bankName",text:"开户银行",type:"string"},{name:"bankAccountCode",text:"银行账号",type:"string"},{name:"bankAccountName",text:"银行账户名",type:"string"},{name:"taxpayingNo",text:"税务登记号",type:"string"},{name:"contacter",text:"联系人",type:"string"},{name:"mobileNo",text:"手机号码",type:"string"},{name:"email",text:"电子邮箱",type:"string"},{name:"provinceNo",text:"行政省编号",type:"string"},{name:"contactAddress",text:"联系地址",type:"string"},{name:"currencyNo",text:"币别",type:"string"},{name:"paymentClauseNo",text:"收款条件编号",type:"string"},{name:"paymentMethodNo",text:"结算方式编号",type:"string"},{name:"combineBill",text:"合并发票(0=是 1=否)",type:"int"},{name:"summaryBill",text:"汇总开票(1=同一订单 2=同一付款人)",type:"int",defaultValue:1},{name:"independentBill",text:"独立发票(0=不 1=每个地址 2=每个发货通知)",type:"int"},{name:"exchangeRateType",text:"汇率类型(1=通用费率)",type:"int",defaultValue:1},{name:"taxRateNo",text:"增值税(数据取bas_tax_rate表，通过字段is_added_tax是否增值税区别)",type:"string"},{name:"countryNo",text:"国家",type:"string"},{name:"language",text:"语言",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(对应 status 0=未生效 1=启用 2=作废 )",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasDeliveryPoint",{extend:"Ext.data.Model",alias:"model.basdeliverypoint",fields:[{name:"pointId",text:"送货地点ID(对应 storage_id )",type:"int"},{name:"pointNo",text:"送货地点编号(对应 storage_no )",type:"string"},{name:"pointCode",text:"送货地点编码(对应 storage_code )",type:"string"},{name:"pointName",text:"送货地点名称(对应 storage_name )",type:"string"},{name:"provinceNo",text:"行政省编号(对应 province_no )",type:"string"},{name:"cityNo",text:"行政市编号(对应 city_no )",type:"string"},{name:"countyNo",text:"行政县编号(对应 county_no )",type:"string"},{name:"regionNo",text:"地区编码(对应 region_no )",type:"string"},{name:"businessCityNo",text:"经营城市编号(对应 business_city_no )",type:"string"},{name:"storageType",text:"仓库类型(对应 storage_type )",type:"string"},{name:"storageLevel",text:"仓库级别(对应 storage_level )",type:"string"},{name:"areaTotal",text:"总面积(对应 area_total )",type:"number"},{name:"contacter",text:"联系人(对应 contact )",type:"string"},{name:"phoneNo",text:"电话(对应 telno )",type:"string"},{name:"mobileNo",text:"手机(对应 mobile_phone )",type:"string"},{name:"contactAddress",text:"联系地址(对应 address )",type:"string"},{name:"orderNo",text:"排列序号(对应 order_no )",type:"int"},{name:"enableFlag",text:"启用状态(对应 status 0=未生效 1=启用 2=作废 )",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人(对应 editor )",type:"string"},{name:"modifyTime",text:"修改时间(对应 edittm )"},{name:"remarks",text:"备注(对应 remarks )",type:"string"},]});
Ext.define("Hc_mdm.model.BasDict",{extend:"Ext.data.Model",alias:"model.basdict",fields:[{name:"dictId",text:"Id",type:"string"},{name:"dictCode",text:"字典编号",type:"string"},{name:"dictName",text:"字典名称",type:"string"},{name:"appNo",text:"应用代号",type:"int"},{name:"dictLevel",text:"层级",type:"int"},{name:"enableFlag",text:"启用状态",type:"int",defaultValue:1},{name:"orderNo",text:"排列序号",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasDictDtl",{extend:"Ext.data.Model",alias:"model.basdictdtl",fields:[{name:"dictDtlId",text:"Id",type:"string"},{name:"dictCode",text:"字典编号",type:"string"},{name:"dictId",text:"Id",type:"string"},{name:"itemCode",text:"明细编码",type:"string"},{name:"itemName",text:"明细名称",type:"string"},{name:"enableFlag",text:"启用状态",type:"int",defaultValue:1},{name:"orderNo",text:"排列序号",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasDivision",{extend:"Ext.data.Model",alias:"model.basdivision",fields:[{name:"divisionNo",text:"事业部编号",type:"string"},{name:"divisionName",text:"事业部名称",type:"string"},{name:"contacter",text:"联系人",type:"string"},{name:"mobileNo",text:"手机号码",type:"string"},{name:"faxNo",text:"传真号",type:"string"},{name:"email",text:"电子邮箱",type:"string"},{name:"postCode",text:"邮政编码",type:"string"},{name:"contactAddress",text:"联系地址",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasFactory",{extend:"Ext.data.Model",alias:"model.basfactory",fields:[{name:"factoryNo",text:"厂区编号",type:"string"},{name:"factoryName",text:"厂区名称",type:"string"},{name:"contacter",text:"联系人",type:"string"},{name:"mobileNo",text:"手机号码",type:"string"},{name:"faxNo",text:"传真号",type:"string"},{name:"email",text:"电子邮箱",type:"string"},{name:"postCode",text:"邮政编码",type:"string"},{name:"contactAddress",text:"联系地址",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasFee",{extend:"Ext.data.Model",alias:"model.basfee",fields:[{name:"feeNo",text:"费用编号",type:"string",allowNull:true},{name:"feeName",text:"费用名称",type:"string"},{name:"taxRateNo",text:"税率编号",type:"string"},{name:"feeCategory",text:"费用分类(取自数据字典 fee_category )",type:"string"},{name:"subjectNo",text:"科目编号",type:"int"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasMajor",{extend:"Ext.data.Model",alias:"model.basmajor",fields:[{name:"categoryNo",text:"",type:"string"},{name:"categoryId",text:"",type:"int"},{name:"categoryName",text:"",type:"string"},{name:"materialType",text:"",type:"int"},{name:"orderNo",text:"",type:"int"},{name:"creator",text:"",type:"string"},{name:"createTime",text:"",type:"string"},{name:"modifier",text:"",type:"string"},{name:"modifyTime",text:"",type:"date"},{name:"remarks",text:"",type:"string"}],idProperty:"appNo",identifier:"negative"});
Ext.define("Hc_mdm.model.BasMaterial",{extend:"Ext.data.Model",alias:"model.basmaterial",fields:[{name:"materialNo",text:"物料编号",type:"string"},{name:"materialCode",text:"物料编码",type:"string"},{name:"barcodeEan",text:"国际条码",type:"string"},{name:"materialName",text:"物料名称",type:"string"},{name:"specifications",text:"规格型号",type:"string"},{name:"oldCode",text:"旧物料编码(旧系统编码或者重新编号的情况)",type:"string"},{name:"inventoryCategory",text:"存货类别(取数据字典 inventory_category)",type:"string"},{name:"materialSource",text:"物料属性(数据字典)",type:"string"},{name:"taxRateNo",text:"税率编号(数据字典)",type:"string"},{name:"taxCategory",text:"税分类(取数据字典 tax_category)",type:"string"},{name:"sizeTypeNo",text:"码组(取bas_size_type)",type:"string"},{name:"allowSale",text:"允许销售(0=否 1=是)",type:"int"},{name:"allowDelegate",text:"允许委外(0=否 1=是)",type:"int"},{name:"allowPurchase",text:"允许采购(0=否 1=是)",type:"int"},{name:"allowProduce",text:"允许生产(0=否 1=是)",type:"int"},{name:"materialStatus",text:"物料状态(0=模版 1=释放)",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int"},{name:"codeRuleNo",text:"编码规则(取bas_code_rule)",type:"string"},{name:"advicePrice",text:"参考单价",type:"string"},{name:"currencyNo",text:"币别编号(取bas_currency表)",type:"string"},{name:"seasonNo",text:"年季(取数据字典 season_no )",type:"string"},{name:"categoryNo",text:"小类(取categroy到小类)",type:"string"},{name:"modelNo",text:"型体",type:"string"},{name:"styleNo",text:"款号",type:"string"},{name:"productCode",text:"客户产品货号",type:"string"},{name:"manufacturer",text:"制造商",type:"string"},{name:"brandNo",text:"品牌编号(取bas_brand)",type:"string"},{name:"developmentTimes",text:"开发次数",type:"int"},{name:"outerBottom",text:"衬里/内垫-外底(对应 outer_bottom )",type:"string"},{name:"style",text:"风格",type:"string"},{name:"salesChannels",text:"销售渠道(销售类型 0=零售 1=电商)",type:"int"},{name:"vampMaterial",text:"帮面材料",type:"string"},{name:"colorNo",text:"颜色(取bas_color)",type:"string"},{name:"genderType",text:"男/女鞋(F=女 M=男)",type:"string"},{name:"series",text:"系列(数据字典  )",type:"string"},{name:"joinOrderMetting",text:"是否参加订货会(0=否 1=是)",type:"int"},{name:"textures",text:"材质类别(数据字典)",type:"string"},{name:"normalUnit",text:"基本单位(取bas_unit表)",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"materialType",text:"物料类型(0=成品/半成品 1=原料)",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"最后修改人",type:"string"},{name:"modifyTime",text:"最后修改时间"},{name:"remarks",text:"备注",type:"string"},{name:"parentCategoryNo",text:"大类(取categroy到大类)",type:"string"},{name:"specialCode",text:"特征码",type:"string"},{name:"lining",text:"里料(取数据字典 D:单里 M:毛里 R:绒里 F:仿毛里)",type:"string"},{name:"insoles",text:"衬里/内垫",type:"string"},{name:"purchaseUnit",text:"采购单位(取bas_unit表)",type:"string"},{name:"purchaseGroup",text:"采购组",type:"string"},{name:"supplyCategoryNo",text:"供货类别",type:"string"},{name:"ifQc",text:"是否质检",type:"int"}]});
Ext.define("Hc_mdm.model.BasMaterialSize",{extend:"Ext.data.Model",alias:"model.basmaterialsize",fields:[{name:"materialNo",text:"物料编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"sizeNo",text:"尺码编号",type:"string"},{name:"barcode",text:"条码(产品货号+尺码=条码)",type:"string"}]});
Ext.define("Hc_mdm.model.BasMaterialUnitSwitch",{extend:"Ext.data.Model",alias:"model.basmaterialunitswitch",fields:[{name:"switchId",text:"转换编号",type:"int"},{name:"materialNo",text:"物料编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"unitNoA",text:"a单位编号",type:"string"},{name:"unitNoB",text:"b单位编号",type:"string"},{name:"qtyA",text:"a单位数量",type:"float"},{name:"qtyB",text:"b单位数量",type:"float"},{name:"enableFlag",text:"启用状态(0=未生效 1=启用)",type:"int",defaultValue:"1"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasModel",{extend:"Ext.data.Model",alias:"model.basmodel",fields:[{name:"modelId",text:"型体id",type:"string"},{name:"modelNo",text:"型体编码",type:"string"},{name:"modelName",text:"型体名称",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态",type:"int"},{name:"creator",text:"创建人",type:"string"},{name:"createTime",text:"创建时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasOrganizationGrid",{extend:"Ext.data.Model",alias:"model.BasOrganizationGrid",fields:[{name:"orgNo",text:"编号",type:"string"},{name:"orgName",text:"名称",type:"string"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"factoryNo",text:"厂区编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasPaymentClauseFK",{extend:"Ext.data.Model",alias:"model.baspaymentclausefk",fields:[{name:"paymentClauseNo",text:"付款条件编号",type:"string"},{name:"paymentClauseName",text:"付款条件名称",type:"string"},{name:"paymentClauseType",text:"付款条件类型",type:"string",defaultValue:"1"},{name:"creditDays",text:"信用天数",type:"int"},{name:"preferentialDays",text:"优惠天数",type:"int"},{name:"dueDateMethod",text:"到期日计算方式",type:"string"},{name:"preferentialRate",text:"优惠率/金额",type:"number"},{name:"orderNo",text:"排列序号",type:"int"},{name:"preferentialWay",text:"优惠方式",type:"string"},{name:"enableFlag",text:"启用状态",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasPaymentClauseSK",{extend:"Ext.data.Model",alias:"model.baspaymentclausesk",fields:[{name:"paymentClauseNo",text:"收款条件编号",type:"string"},{name:"paymentClauseName",text:"收款条件名称",type:"string"},{name:"paymentClauseType",text:"收款条件类型",type:"string",defaultValue:"2",hidden:true},{name:"creditDays",text:"信用天数",type:"int"},{name:"preferentialDays",text:"优惠天数",type:"int"},{name:"dueDateMethod",text:"到期日计算方式",type:"string"},{name:"preferentialRate",text:"优惠率/金额",type:"number"},{name:"orderNo",text:"排列序号",type:"int"},{name:"preferentialWay",text:"优惠方式",type:"string"},{name:"enableFlag",text:"启用状态",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasPaymentMethod",{extend:"Ext.data.Model",alias:"model.baspaymentmethod",fields:[{name:"paymentMethodNo",text:"结算方式编号",type:"string",allowNull:true},{name:"paymentMethodName",text:"结算方式名称",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasProvince",{extend:"Ext.data.Model",alias:"model.basprovince",fields:[{name:"provinceNo",text:"行政省编号",type:"string"},{name:"provinceName",text:"行政省名称",type:"string"},{name:"provinceLname",text:"行政省详细名称",type:"string"},{name:"provinceOpcode",text:"行政省特征码",type:"string"},{name:"countryNo",text:"国家编号",type:"string"},{name:"directControlled",text:"是否直辖市",type:"int"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasPurchaseGroup",{extend:"Ext.data.Model",alias:"model.baspurchasegroup",fields:[{name:"purchaseGroupNo",text:"采购组编号",type:"string"},{name:"purchaseGroupName",text:"采购组名称",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=未生效 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"}],idProperty:"appNo",identifier:"negative"});
Ext.define("Hc_mdm.model.BasRegion",{extend:"Ext.data.Model",alias:"model.basregion",fields:[{name:"regionId",text:"地区ID",type:"int"},{name:"regionNo",text:"地区编号",type:"string"},{name:"regionCode",text:"地区编码",type:"string"},{name:"regionName",text:"地区名称",type:"string"},{name:"countryNo",text:"国家编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=未生效 1=启用 2=作废)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasSize",{extend:"Ext.data.Model",alias:"model.bassize",fields:[{name:"sizeId",text:"尺码id(对应 size_id )",type:"int"},{name:"sizeNo",text:"尺码编号(对应 size_no )",type:"string"},{name:"sizeCode",text:"尺码编码(对应 size_code )",type:"string"},{name:"sizeName",text:"尺码名称(对应 size_name )",type:"string"},{name:"sizeTypeNo",text:"尺码类别编号(对应 size_type_no )",type:"string"},{name:"orderNo",text:"排列序号(对应 order_no )",type:"int"},{name:"enableFlag",text:"启用状态(对应 status 0=未生效 1=启用 )",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人(对应 editor )",type:"string"},{name:"modifyTime",text:"修改时间(对应 edittm )"},{name:"remarks",text:"备注(对应 remarks )",type:"string"}]});
Ext.define("Hc_mdm.model.BasSizeType",{extend:"Ext.data.Model",alias:"model.bassizetype",fields:[{name:"sizeTypeId",text:"尺码类别id(对应 size_type_id )",type:"int"},{name:"sizeTypeNo",text:"尺码类别编号(对应 size_type_no )",type:"string"},{name:"sizeTypeCode",text:"尺码类别编码(对应 size_type_code )",type:"string"},{name:"sizeTypeName",text:"尺码类别名称(对应 size_type_name )",type:"string"},{name:"orderNo",text:"排列序号(对应 order_no )",type:"int"},{name:"enableFlag",text:"启用状态(对应 status 0=未生效 1=启用 )",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人(对应 editor )",type:"string"},{name:"modifyTime",text:"修改时间(对应 edittm )"},{name:"remarks",text:"备注(对应 remarks )",type:"string"}]});
Ext.define("Hc_mdm.model.BasStore",{extend:"Ext.data.Model",alias:"model.basstore",fields:[{name:"storeNo",text:"仓库编号",type:"string"},{name:"storeName",text:"仓库名称",type:"string"},{name:"brandNo",text:"品牌编号",type:"string"},{name:"factoryNo",text:"厂区编号",type:"string"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"storeType",text:"仓库类型(仓库属性 取数据字典 store_type)",type:"string"},{name:"isMaster",text:"是否主仓(0=否 1=是)",type:"int",defaultValue:1},{name:"enableFlag",text:"启用状态(0=未生效 1=启用)",type:"int",defaultValue:1},{name:"orderNo",text:"排列序号",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasStoreCell",{extend:"Ext.data.Model",alias:"model.basstorecell",fields:[{name:"lineId",text:"ID主键",type:"int"},{name:"cellNo",text:"储位编号",type:"string"},{name:"cellCode",text:"储位编码",type:"string"},{name:"cellName",text:"储位名称",type:"string"},{name:"storeNo",text:"仓库编号",type:"string"},{name:"zoneNo",text:"仓区编号",type:"string"},{name:"roomNo",text:"库区编号",type:"string"},{name:"channelNo",text:"通道编号",type:"string"},{name:"categoryNo",text:"物料大类(类别编号)",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=未生效 1=启用)",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasStoreChannel",{extend:"Ext.data.Model",alias:"model.basstorechannel",fields:[{name:"lineId",text:"主键",type:"int"},{name:"channelNo",text:"通道编号",type:"string"},{name:"channelName",text:"通道名称",type:"string"},{name:"storeNo",text:"仓库编号",type:"string"},{name:"zoneNo",text:"仓区编号",type:"string"},{name:"roomNo",text:"库区编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=未生效 1=启用)",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasStoreRoom",{extend:"Ext.data.Model",alias:"model.basstoreroom",fields:[{name:"lineId",text:"自增主键",type:"int"},{name:"roomNo",text:"库区编号",type:"string"},{name:"roomName",text:"库区名称",type:"string"},{name:"storeNo",text:"仓库编号",type:"string"},{name:"zoneNo",text:"仓区编号",type:"string"},{name:"roomType",text:"库区类型(数据字典 room_type )",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=未生效 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasStoreZone",{extend:"Ext.data.Model",alias:"model.basstorezone",fields:[{name:"lineId",text:"自增主键",type:"int"},{name:"zoneNo",text:"仓区编号",type:"string"},{name:"zoneName",text:"仓区名称",type:"string"},{name:"storeNo",text:"仓库编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=未生效 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasStyle",{extend:"Ext.data.Model",alias:"model.basstyle",fields:[{name:"styleId",text:"款号id",type:"int"},{name:"modelNo",text:"形体编码",type:"string"},{name:"styleNo",text:"款号编码",type:"string"},{name:"styleName",text:"款号名称",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasSupplier",{extend:"Ext.data.Model",alias:"model.bassupplier",fields:[{name:"supplierNo",text:"供应商编号",type:"string"},{name:"supplierName",text:"供应商名称",type:"string"},{name:"supplierSname",text:"供应商简称",type:"string"},{name:"supplierAddress",text:"供应商地址",type:"string"},{name:"countryNo",text:"国家代码",type:"string"},{name:"provinceNo",text:"省编号",type:"string"},{name:"postcodeNo",text:"邮政编码",type:"string"},{name:"mobileNo",text:"手机号码",type:"string"},{name:"phoneNo",text:"电话号码",type:"string"},{name:"faxNo",text:"传真号码",type:"string"},{name:"email",text:"邮件地址",type:"string"},{name:"website",text:"公司网站",type:"string"},{name:"supplierType",text:"供应商类型(供应商状态 supplier_type)",type:"string"},{name:"supplierStatus",text:"供应商状态(供应商状态 supplier_status)",type:"string"},{name:"factoryType",text:"厂商类别(取数据字典factory_type)",type:"string"},{name:"fixInDivision",text:"固定使用组织(0=否 1=是)",type:"int"},{name:"currencyNo",text:"订单币种(币别编号)",type:"string"},{name:"paymentClauseNo",text:"付款条件(bas_payment_clause)",type:"string"},{name:"paymentMethodNo",text:"付款方式(bas_payment_method)",type:"string"},{name:"taxpayingNo",text:"税务登记号",type:"string"},{name:"addRateNo",text:"增值税登记号",type:"string"},{name:"invoiceType",text:"发票类型(取自数据字典 invoice_type)",type:"string"},{name:"taxRateNo",text:"默认税率(bas_tax_rate)",type:"string"},{name:"financeAddress",text:"财务信函地址",type:"string"},{name:"lastInvoiceDate",text:"最近发票日期",type:"date"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=未生效 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasSupplierBrand",{extend:"Ext.data.Model",alias:"model.bassupplierbrand",fields:[{name:"brandId",text:"使用组织id",type:"int"},{name:"supplierNo",text:"供应商编号",type:"string"},{name:"brandNo",text:"品牌编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasSupplierContacter",{extend:"Ext.data.Model",alias:"model.bassuppliercontacter",fields:[{name:"contacterId",text:"联系人id",type:"int"},{name:"supplierNo",text:"供应商编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"contacterCalled",text:"联系人称呼(取数据字典 contacter_called)",type:"string"},{name:"contacterName",text:"联系人姓名",type:"string"},{name:"contacterDept",text:"联系人部门(取数据字典 contacter_dept)",type:"string"},{name:"contacterDuty",text:"联系人职务(取数据字典 contacter_duty)",type:"string"},{name:"mobileNo",text:"手机号码",type:"string"},{name:"phoneNo",text:"电话号码",type:"string"},{name:"faxNo",text:"传真号码",type:"string"},{name:"email",text:"邮件地址",type:"string"},{name:"isDefault",text:"是否默认联系人(0=否 1=是)",type:"int"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasSupplierSupplyCategory",{extend:"Ext.data.Model",alias:"model.bassuppliersupplycategory",fields:[{name:"lineId",text:"行id",type:"int"},{name:"supplierNo",text:"供应商编号",type:"string"},{name:"categoryNo",text:"类别编号",type:"string"},{name:"purchaseType",text:"采购类型",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasSupplyCategory",{extend:"Ext.data.Model",alias:"model.bassupplycategory",fields:[{name:"categoryNo",text:"类别编号",type:"string"},{name:"categoryName",text:"类别名称",type:"string"},{name:"purchaseType",text:"采购类型",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BasTaxCategory",{extend:"Ext.data.Model",alias:"model.bastaxcategory",fields:[{name:"taxCategoryNo",text:"税种编号",type:"string"},{name:"taxCategoryName",text:"税种名称",type:"string"},{name:"currencyNo",text:"币别编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},],});
Ext.define("Hc_mdm.model.BasTaxRate",{extend:"Ext.data.Model",alias:"model.bastaxrate",fields:[{name:"taxRateNo",text:"税率编号",type:"string"},{name:"taxRateName",text:"税率名称",type:"string"},{name:"taxRate",text:"税率(%)",type:"number"},{name:"taxCategoryNo",text:"税种编号",type:"string"},{name:"isAddedTax",text:"是否增值税(1=是 0=否)",type:"int"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"}],});
Ext.define("Hc_mdm.model.BasUnit",{extend:"Ext.data.Model",alias:"model.basunit",fields:[{name:"unitNo",text:"单位编号",type:"string"},{name:"unitName",text:"单位名称",type:"string"},{name:"specification",text:"规格",type:"string"},{name:"decimalDigits",text:"小数位数",type:"int"},{name:"flagMaterial",text:"物料单位标志",type:"int"},{name:"flagPurchase",text:"采购单位标志",type:"int"},{name:"flagBom",text:"BOM单位标志",type:"int"},{name:"flagDeliver",text:"发运单位标志",type:"int"},{name:"flagQuality",text:"质检单位标志",type:"int"},{name:"enableFlag",text:"启用状态",type:"int",defaultValue:1},{name:"orderNo",text:"排列序号",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasUnitSwitch",{extend:"Ext.data.Model",alias:"model.basunitswitch",fields:[{name:"switchId",text:"转换编号",type:"int"},{name:"unitNoA",text:"a单位编号",type:"string"},{name:"unitNoB",text:"b单位编号",type:"string"},{name:"qtyA",text:"a单位数量",type:"number"},{name:"qtyB",text:"b单位数量",type:"number"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=未生效 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BasWorkshop",{extend:"Ext.data.Model",alias:"model.basworkshop",fields:[{name:"workshopNo",text:"工作中心编号",type:"string"},{name:"workshopName",text:"工作中心名称",type:"string"},{name:"companyNo",text:"公司",type:"string"},{name:"factoryNo",text:"厂区编号",type:"string"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"workshopType",text:"工作中心类型(数据字典 workshop_type )",type:"string"},{name:"workshopLeader",text:"工作中心负责人",type:"string"},{name:"deptNo",text:"部门编号(对应HR部门)",type:"int",allowNull:true},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态(0=未生效 1=启用)",type:"int",defaultValue:1},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BillBom",{extend:"Ext.data.Model",alias:"model.billbom",fields:[{name:"billNo",text:"单据号",type:"string"},{name:"maintainType",text:"维护类型(1=修改2=用途转换3=状态变更)",type:"int",allowNull:true},{name:"materialNo",text:"物料编号(成品、半成品)",type:"string"},{name:"oldBrandNo",text:"老品牌",type:"string",allowNull:true},{name:"newBrandNo",text:"新品牌",type:"string",allowNull:true},{name:"oldBomPurpose",text:"原BOM用途(S2=开发 STD=标准)",type:"string",allowNull:true},{name:"newBomPurpose",text:"新BOM用途(STD=标准 SUB=委外 SPD=预测)",type:"string",allowNull:true},{name:"bomType",text:"BOM分类(1=标准BOM 2=配置BOM)",type:"int"},{name:"versionNo",text:"版本序号(1->n)",type:"int",allowNull:true},{name:"bomStatus",text:"BOM状态(0=编辑 1=审核 2=生效)",type:"int",allowNull:true},{name:"billStatus",text:"单据状态(0=编辑 1=审核)",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"auditor",text:"审核人",type:"string"},{name:"auditTime",text:"审核时间"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_mdm.model.BillBomList",{extend:"Ext.data.Model",alias:"model.billbomlist",fields:[{name:"billNo",text:"单据号",type:"string"},{name:"lineId",text:"行id(主键、隐藏)",type:"int"},{name:"orderNo",text:"序号",type:"int",allowNull:true},{name:"parentOrderNo",text:"上层序号",type:"int"},{name:"brandNo",text:"品牌",type:"string"},{name:"materialNo",text:"物料编号",type:"string"},{name:"materialCode",text:"物料编号",type:"string"},{name:"materialName",text:"物料编号",type:"string"},{name:"sizeTypeNo",text:"物料编号",type:"string"},{name:"bomPurpose",text:"BOM用途(S2=开发 STD=标准 SUB=委外 SPD=预测)",type:"string"},{name:"dosageNumerator",text:"用量(分子)",type:"number"},{name:"dosageDenominator",text:"用量(分母)",type:"number"},{name:"pdTypeNo",text:"用途(产品设计材料类别编号)",type:"string"},{name:"storeNo",text:"预设仓库(仓库编号)",type:"string"},{name:"isVirtual",text:"是否虚拟件(0=否 1=是)",type:"int"},{name:"updateFlag",text:"修改标识(0=否 1=是)",type:"int"},{name:"replaceFlag",type:"string"}],idProperty:"orderNo",identifier:"negative"});
Ext.define("Hc_mdm.model.BillBomListSize",{extend:"Hc_Common.model.MaterialSize",alias:"model.billbomlistsize",fields:[{name:"billNo",text:"单据号",type:"string"},{name:"orderNo",text:"序号",type:"int"},{name:"materialNo",text:"物料编号",type:"string"},{name:"materialCode",text:"物料编码",type:"string"},{name:"materialName",text:"物料名称",type:"string"},{name:"newSizeTypeNo",text:"清单码组",type:"string"},{name:"sizeTypeNo",text:"表头码组",type:"string"},{name:"oldSizeNo",text:"表头码编号",type:"string"},{name:"newSizeNo",text:"清单码编号",type:"string"}]});
Ext.define("Hc_mdm.model.BillMaterial",{extend:"Ext.data.Model",alias:"model.billmaterial",fields:[{name:"billNo",text:"单据号",type:"string"},{name:"maintainType",text:"维护类型(0=新建 1=修改)",type:"int"},{name:"materialType",text:"物料类型(0=成品/半成品 1=原料)",type:"int"},{name:"operator",text:"操作人",type:"string"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"auditor",text:"审核人",type:"string"},{name:"auditTime",text:"审核时间"},{name:"billStatus",text:"单据状态",type:"int",defaultValue:"10"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_mdm.model.BillMaterialDtl",{extend:"Ext.data.Model",alias:"model.billmaterialdtl",fields:[{name:"billNo",text:"单据号",type:"string"},{name:"lineId",text:"行id(主键、隐藏)",type:"int"},{name:"materialNo",text:"物料编号",type:"string"},{name:"materialCode",text:"物料编码",type:"string",defaultValue:"待编码"},{name:"barcodeEan",text:"国际条码",type:"string"},{name:"materialName",text:"物料名称",type:"string"},{name:"specifications",text:"规格型号",type:"string"},{name:"oldCode",text:"旧物料编码(旧系统编码或者重新编号的情况)",type:"string"},{name:"inventoryCategory",text:"存货类别(取数据字典 inventory_category)",type:"string"},{name:"materialSource",text:"物料属性(数据字典)",type:"string"},{name:"taxRateNo",text:"税率编号(数据字典)",type:"string"},{name:"taxCategory",text:"税分类(取数据字典 tax_category)",type:"string"},{name:"sizeTypeNo",text:"码组(取bas_size_type)",type:"string"},{name:"allowSale",text:"允许销售(0=否 1=是)",type:"int"},{name:"allowDelegate",text:"允许委外(0=否 1=是)",type:"int"},{name:"allowPurchase",text:"允许采购(0=否 1=是)",type:"int"},{name:"allowProduce",text:"允许生产(0=否 1=是)",type:"int"},{name:"materialStatus",text:"物料状态(0=模版 1=释放)",type:"int"},{name:"enableFlag",text:"启用状态(0=禁用 1=启用)",type:"int"},{name:"codeRuleNo",text:"编码规则(取bas_code_rule)",type:"string"},{name:"advicePrice",text:"参考单价",type:"string"},{name:"currencyNo",text:"币别编号(取bas_currency表)",type:"string"},{name:"seasonNo",text:"年季(取数据字典 season_no )",type:"string"},{name:"parentCategoryNo",text:"大类(取categroy到大类)",type:"string"},{name:"categoryNo",text:"小类(取categroy到小类)",type:"string"},{name:"modelNo",text:"型体",type:"string"},{name:"styleNo",text:"款号",type:"string"},{name:"productCode",text:"客户产品货号",type:"string"},{name:"manufacturer",text:"制造商",type:"string"},{name:"brandNo",text:"品牌编号(取bas_brand)",type:"string"},{name:"specialCode",text:"特征码",type:"string"},{name:"developmentTimes",text:"开发次数",type:"int"},{name:"lining",text:"里料(取数据字典 D:单里 M:毛里 R:绒里 F:仿毛里)",type:"string"},{name:"insoles",text:"衬里/内垫",type:"string"},{name:"outerBottom",text:"外底",type:"string"},{name:"style",text:"风格",type:"string"},{name:"salesChannels",text:"销售渠道(销售类型 0=零售 1=电商)",type:"string"},{name:"vampMaterial",text:"帮面材料",type:"string"},{name:"colorNo",text:"颜色(取bas_color)",type:"string"},{name:"genderType",text:"男/女鞋(F=女 M=男)",type:"string"},{name:"series",text:"系列(数据字典  )",type:"string"},{name:"joinOrderMetting",text:"是否参加订货会(0=否 1=是)",type:"int"},{name:"textures",text:"材质类别(数据字典)",type:"string"},{name:"normalUnit",text:"基本单位(取bas_unit表)",type:"string"},{name:"purchaseUnit",text:"采购单位(取bas_unit表)",type:"string"},{name:"purchaseGroup",text:"采购组",type:"string"},{name:"supplyCategoryNo",text:"供货类别",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"remarks",text:"备注",type:"string"},{name:"ifQc",text:"是否质检",type:"int"}]});
Ext.define("Hc_mdm.model.BillMaterialSize",{extend:"Ext.data.Model",alias:"model.billmaterialsize",fields:[{name:"billNo",text:"单据号",type:"string"},{name:"lineId",text:"行id(主键、隐藏)",type:"int"},{name:"materialNo",text:"物料编号",type:"string"},{name:"orderNo",text:"排列序号",type:"int"},{name:"sizeNo",text:"尺码编号",type:"string"},{name:"barcode",text:"条码(产品货号+尺码=条码)",type:"string"}]});
Ext.define("Hc_mdm.store.BasCategory",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasCategory",model:"Hc_mdm.model.BasCategory",proxy:{url:Hc.mdmPath+"bill_material_dtl/getCategory.json"}});
Ext.define("Hc_mdm.store.BasCity",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasCity",model:"Hc_mdm.model.BasCity",autoLoad:true,proxy:{url:Hc.mdmPath+"bas_city/listAll.json?enableFlag=1"}});
Ext.define("Hc_mdm.store.BasCountry",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasCountry",model:"Hc_mdm.model.BasCountry",autoLoad:true,proxy:{url:Hc.mdmPath+"bas_country/listAll.json?enableFlag=1"}});
Ext.define("Hc_mdm.store.BasCounty",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasCounty",model:"Hc_mdm.model.BasCounty",autoLoad:true,proxy:{url:Hc.mdmPath+"bas_county/listAll.json?enableFlag=1"}});
Ext.define("Hc_mdm.store.BasModel",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasModel",model:"Hc_mdm.model.BasModel",autoLoad:true,proxy:{url:Hc.mdmPath+"bas_model/listAll.json"}});
Ext.define("Hc_mdm.store.BasParentCategory",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasParentCategory",model:"Hc_mdm.model.BasCategory",proxy:{url:Hc.mdmPath+"bas_major/listvo.json"}});
Ext.define("Hc_mdm.store.BasProvince",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasProvince",model:"Hc_mdm.model.BasProvince",proxy:{url:Hc.mdmPath+"bas_province/listAll.json?enableFlag=1"}});
Ext.define("Hc_mdm.store.BasStore",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasStore",model:"Hc_mdm.model.BasStore",autoLoad:true,proxy:{url:Hc.mdmPath+"bas_store/listAll.json"}});
Ext.define("Hc_mdm.store.BasStoreChannel",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasStoreChannel",model:"Hc_mdm.model.BasStoreChannel",autoLoad:true,proxy:{url:Hc.mdmPath+"bas_store_channel/listAll.json"}});
Ext.define("Hc_mdm.store.BasStoreRoom",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasStoreRoom",model:"Hc_mdm.model.BasStoreRoom",autoLoad:true,proxy:{url:Hc.mdmPath+"bas_store_room/listAll.json"}});
Ext.define("Hc_mdm.store.BasStoreZone",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasStoreZone",model:"Hc_mdm.model.BasStoreZone",autoLoad:true,proxy:{url:Hc.mdmPath+"bas_store_zone/listAll.json"}});
Ext.define("Hc_mdm.store.BasStyle",{extend:"Hc_Common.store.NoajaxComBase",alias:"store.BasStyle",model:"Hc_mdm.model.BasStyle",autoLoad:true,proxy:{url:Hc.mdmPath+"bas_style/listAll.json"}});
Ext.define("Hc_mdm.ux.TreeSearchHelpField",{extend:"Ext.form.field.Text",alias:"widget.treesearchhelpfield",enableKeyEvents:true,url:"",treeColumns:null,rootCategoryName:"类别维护",winTitle:"选择器",winHeight:500,winWidth:700,isAutoLoad:true,otherFields:"",fromFields:"",fieldMap:"",listeners:{keydown:"onKeyDown",keypress:"onKeyPress",blur:"onBlur",afterrender:"onrendered",change:"onChange",scope:"this"},triggers:{search:{cls:"x-form-search-trigger",weight:1,handler:"showSelectWin",scope:"this"}},needCall:false,checkValue:true,initComponent:function(){var a=this;a.needCall=false;a.enableKeyEvents=true;a.callParent(arguments);a.oldValue=a.getValue();if(!a.treeColumns){a.getTrigger("search").hide()}},onrendered:function(){var a=this;if(a.inputEl){a.inputEl.on("dblclick",function(){if(a.readOnly||a.canInput==false||a.isDisabled()==true){return}a.showSelectWin()},a)}},onChange:function(){var a=this;if(a.up("grid")){return}if(Ext.isEmpty(a.getValue())){a.setOtherFieldsVal()}},showSelectWin:function(){var f=this;if(!f.treeColumns||!f.url||f.readOnly||f.disabled){return}var c=[];Ext.each(f.treeColumns,function(j){c.push(j.dataIndex)});var i=Ext.create("Hc_Framework.store.TreeBase",{model:"Hc_mdm.model.BasCategory",fields:c,autoLoad:false,proxy:{url:f.url},root:{id:0,categoryName:f.rootCategoryName,categoryId:0,expanded:false},nodeParam:"parentCategoryId",parentIdProperty:"parentCategoryId"});var a=f.getFromFieldsVal();if(!Ext.isEmpty(a)){i.proxy.extraParams.queryCondition=JSON.stringify(a)}if(f.isAutoLoad){i.load()}var e=[{xtype:"treepanel",region:"center",columns:f.treeColumns,rootVisible:false,lines:true,itemId:"menutree",split:true,store:i,listeners:{itemdblclick:function(k,j){f.needCall=false;f.setOtherFieldsVal(j.data);k.up("window").close()}}}];var g=function(j){var l=j.up("form"),k=[].concat(a);if(!l.isValid()){return}var n=l.getValues();for(var m in n){if(!Ext.isEmpty(n[m])){k.push({property:m,value:n[m],operator:15})}}i.proxy.extraParams.queryCondition=JSON.stringify(k);i.reload()};var d=Ext.widget("window",{title:f.winTitle,width:f.winWidth,height:f.winHeight,modal:true,constrain:true,layout:"border",closeAction:"destroy",autoShow:true,items:e,bbar:["->",{xtype:"button",text:"确认",glyph:Hc.Icon.btnSave,handler:"onReturnValue",scope:f},{xtype:"button",text:"取消",glyph:Hc.Icon.btnCancel,handler:function(j){j.up("window").close()}}]});var h=d.down("form"),b=h&&h.query("textfield,combo,datefield,numberfield");if(b){Ext.each(b,function(j){j.on("specialkey",function(l,k){if(k.ctrlKey&&k.getKey()===k.ENTER){g(l)}});j.labelEl.on("dblclick",function(l,k){if(j.readOnly||j.canInput==false||j.isDisabled()==true){return}j.setValue("")})})}},onReturnValue:function(a){win.close()},onBlur:function(){this.sendToServer()},onKeyDown:function(b){var a=this;if(b.getKey()===b.ENTER||b.getKey()===b.TAB){a.sendToServer()}else{if(b.getKey()===b.F4){a.showSelectWin()}else{if(b.getKey()===b.BACKSPACE||(b.ctrlKey&&b.getKey()==b.V)){a.needCall=true}}}},onKeyPress:function(a){this.needCall=true},getFieldMap:function(){var c=[],a=this;if(!a.fieldMap){return c}var b=a.fieldMap.split(",");Ext.each(b,function(e){var d=e.split("=");if(d.length==2){var f={s:d[0],t:d[1]};c.push(f)}});return c},getFromFieldsVal:function(){var d=this,g=[];if(!d.fromFields){return g}var a=d.fromFields.split(","),b=d.up().context,f,c=d.up("form"),e=d.getFieldMap();if(b||c){Ext.each(a,function(i){if(b){f=b.record.get(i)}if(!f&&!c){var h=Hc.getField(c,i);if(h){f=h.getValue()}}var j=Ext.Array.findBy(e,function(k){return k.s==i});g.push({property:(j&&j.t)||i,value:f||"",operator:10})})}return g},sendToServer:function(){var b=this;if(!b.needCall||!b.checkValue){return}b.needCall=false;if(!b.url||Ext.isEmpty(b.getValue())){b.setOtherFieldsVal();return}var e=b.getFromFieldsVal(),d=b.getValue(),c=Ext.Array.findBy(b.getFieldMap(),function(g){return g.s==b.name}),f=c&&c.t||b.name;e.push({property:f,value:d,operator:10});var a={url:b.url,params:{queryCondition:JSON.stringify(e)},method:"POST",success:function(i){try{var g=JSON.parse(i.responseText);if(!g.list||g.list.length==0){Hc.alert("输入【"+d+"】是无效的值",function(){b.setOtherFieldsVal()})}else{b.setOtherFieldsVal(g.list[0])}}catch(h){Hc.alert("输入值【"+d+"】后端验证失败",function(){b.setOtherFieldsVal()})}},failure:function(){Hc.alert("数据精灵验证失败，请联系管理员",function(){b.setOtherFieldsVal()})}};Hc.callServer(a)},setOtherFieldsVal:function(e){var k=this,c=k.up("form"),a=k.up("grid"),d=k.up().context,i,h=k.getFieldMap();e=e||{};if(d){i=d.record}else{if(c){i=c.getRecord()}}if(a&&d){a.editingPlugin.startEdit(i,d.column)}if(k.afterCall(k,e,i,d)===false){return}var b=Ext.Array.findBy(h,function(l){return l.s==k.name}),g=b&&b.t||k.name,f=e[g];if(f==null){f=k.oldValue}k.setValue(f);if(d){i.set(k.name,f)}k.oldValue=k.getValue();if(!k.otherFields){return}var j=k.otherFields.split(",");Ext.each(j,function(m){b=Ext.Array.findBy(h,function(n){return n.s==m});g=b&&b.t||m;if(d){i.set(m,e[g]||"")}else{var l=Hc.getField(c,m);if(l){l.setValue(e[g]||"")}if(i){i.set(m,e[g]||"")}}})},afterCall:function(b,d,a,c){}});
Ext.define("Hc_mdm.view.basaccountperiod.BasAccountPeriod",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basaccountperiod",controller:"basaccountperiod",viewModel:{type:"basaccountperiod"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"会计年月",name:"accountYearMonth"}],gridColumns:[{dataIndex:"accountYearMonth",text:"会计年月",editor:true},{dataIndex:"beginDate",text:"开始日期",xtype:"datecolumn",editor:true},{dataIndex:"endDate",text:"结束日期",xtype:"datecolumn",editor:true},{dataIndex:"orderNo",text:"排列序号",editor:true},{dataIndex:"enableFlag",text:"启用状态(0=禁用 1=启用)",editor:true},{dataIndex:"creator",text:"建档人"},{dataIndex:"createTime",text:"建档时间"},{dataIndex:"modifier",text:"修改人"},{dataIndex:"modifyTime",text:"修改时间"},{dataIndex:"remarks",text:"备注"}],gridModel:"Hc_mdm.model.BasAccountPeriod",gridPrimaryKey:"accountYearMonth",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_account_period/list.json",gridSaveUrl:Hc.mdmPath+"bas_account_period/listsave.json",gridExportUrl:Hc.mdmPath+"bas_account_period/do_export.json",gridImportUrl:Hc.mdmPath+"bas_account_period/do_import.json"});a.callParent()}});
Ext.define("Hc_mdm.view.basaccountperiod.BasAccountPeriodController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basaccountperiod"});
Ext.define("Hc_mdm.view.basaccountperiod.BasAccountPeriodModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basaccountperiod"});
Ext.define("Hc_mdm.view.basbilltype.BasBillType",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basbilltype",controller:"basbilltype",viewModel:{type:"basbilltype"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"单据类型编号",name:"billTypeNo"},{xtype:"textfield",fieldLabel:"单据类型名称",name:"billTypeName"},{fieldLabel:"单据分组",name:"billGroup",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=bill_group",displaymember:"itemName",valuemember:"itemCode"}],gridModel:"Hc_mdm.model.BasBillType",gridColumns:[{dataIndex:"billTypeNo",text:"单据类型编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true}},{dataIndex:"billTypeName",text:"单据类型名称",editor:{allowBlank:false,maxLength:30,enforceMaxLength:true}},{dataIndex:"codeRuleNo",text:"编码规则编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true}},{dataIndex:"billGroup",text:"单据分组",xtype:"bllookupedit",editable:false,displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=bill_group",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield"}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag",maxLength:30,enforceMaxLength:true}}],gridPrimaryKey:"billTypeNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_bill_type/list.json",gridSaveUrl:Hc.mdmPath+"bas_bill_type/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_bill_type/do_export.json",gridImportUrl:""});a.callParent()}});
Ext.define("Hc_mdm.view.basbilltype.BasBillTypeController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basbilltype"});
Ext.define("Hc_mdm.view.basbilltype.BasBillTypeModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basbilltype"});
Ext.define("Hc_mdm.view.basbom.BasBom",{extend:"Hc_Common.view.BaseMultiPage",alias:"widget.basbom",controller:"basbom",viewModel:{type:"basbom"},isAutoLoad:false,customLayout1:true,gridHasCreator:false,gridHasModifier:false,initComponent:function(){var e=this;Ext.apply(e,{searchItems:[{xtype:"textfield",fieldLabel:"品牌",name:"brandNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo"},{xtype:"searchhelpfield",fieldLabel:"物料编号",name:"materialNo",reference:"materialNo",gridColumns:[{dataIndex:"materialNo",text:"物料编号",flex:0.3},{dataIndex:"materialCode",text:"物料编码",flex:0.3},{dataIndex:"materialName",text:"物料名称",flex:0.3},{dataIndex:"sizeTypeNo",text:"码组",flex:0.3}],bind:{value:"{billRow.materialNo}"},searchItems:[{fieldLabel:"物料编码",name:"materialCode",flex:0.5}],isAutoLoad:false,otherFields:"materialCode,materialName,sizeTypeNo",url:Hc.mdmPath+"bas_material/list.json"},{xtype:"extcombox",fieldLabel:"BOM用途",name:"bomPurpose",displayvalue:"S2=开发:STD=标准:SUB=委外:SPD=预测"},{xtype:"extcombox",fieldLabel:"BOM状态",name:"bomStatus",displayvalue:"0=编辑:1=审核:2=生效",reference:"bomStatus"}],gridColumns:[{dataIndex:"bomId",text:"BOMID"},{dataIndex:"materialNo",text:"物料编号"},{dataIndex:"brandNo",text:"品牌",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo"},{dataIndex:"materialCode",text:"物料编码"},{dataIndex:"materialName",text:"物料名称",width:120},{dataIndex:"bomType",text:"BOM分类",xtype:"bllookupedit",displayvalue:"1=标准BOM:2=配置BOM"},{dataIndex:"bomPurpose",text:"BOM用途",xtype:"bllookupedit",displayvalue:"S2=开发:STD=标准:STD=标准:SUB=委外:SPD=预测"},{dataIndex:"versionNo",text:"版本号"},{dataIndex:"bomStatus",text:"BOM状态",xtype:"bllookupedit",displayvalue:"0=编辑:1=审核:2=生效"},{dataIndex:"modifier",text:"最后修改人",width:90},{dataIndex:"modifyTime",text:"最后修改时间",width:140}],gridModel:"Hc_mdm.model.BasBom",gridReadOnly:true,gridPrimaryKey:"bomId",gridIsMaster:false,gridLoadUrl:Hc.mdmPath+"bas_bom/list.json",gridExportUrl:Hc.mdmPath+"bas_bom/do_export.json",gridEditModel:"none",grid1Columns:[{dataIndex:"orderNo",text:"物料序号"},{dataIndex:"sizeTypeNo",text:"表头码组"},{dataIndex:"materialNo",text:"物料编号"},{dataIndex:"materialCode",text:"物料编码"},{dataIndex:"materialName",text:"物料名称"},{dataIndex:"newSizeTypeNo",text:"物料码组"}],grid1Model:"Hc_mdm.model.BasBomListSize",grid1PrimaryKey:"orderNo",grid1Title:"",grid1HasMark:false,grid1HasCreator:false,grid1HasModifier:false,grid1HasAuditor:false,grid1LoadUrl:Hc.mdmPath+"bas_bom_list/listSizeVo.json?selectVoName=SelectListByVoBasBomListSize",grid1MSizeIdx:6});var a={xtype:"treepanel",split:true,region:"west",width:500,reference:"menutree",itemId:"menutree",lines:true,rootVisible:false,columns:[{dataIndex:"materialNo",width:200,xtype:"treecolumn",text:"物料编号",anchor:"100%"},{dataIndex:"orderNo",text:"序号"},{dataIndex:"brandNo",text:"品牌"},{dataIndex:"bomPurpose",text:"BOM用途"},{dataIndex:"dosageNumerator",text:"用量(分子)"},{dataIndex:"dosageDenominator",text:"用量(分母)"},{dataIndex:"pdTypeNo",text:"用途"},{dataIndex:"storeNo",text:"预设仓库"},{dataIndex:"isVirtual",text:"是否虚拟件"}],store:{model:"Hc_mdm.model.BasBomList",type:"treebase",autoLoad:false,rootVisible:false,proxy:{type:"ajax",url:Hc.mdmPath+"bas_bom_list/getBomList.json"},root:{id:0,text:"root",orderNo:0,materialNo:-1,leaf:false,expanded:false},parentIdProperty:"parentOrderNo"},listeners:{afteritemexpand:"onAfterItemExpand",selectionchange:"onTreeSelectionChange",}};var d=e.controller.getBodyHeight(0.4);var c={xtype:"panel",height:d,region:"north",layout:"border",items:[e.grid],split:true,border:false};var f={xtype:"panel",region:"center",layout:"border",items:[a,e.grid1],border:false};var b={xtype:"panel",region:"center",layout:"border",items:[c,f],border:false};e.items=[e.toolbar];e.items.push(e.searchPanel);e.items.push(b);e.callParent()}});
Ext.define("Hc_mdm.view.basbom.BasBomController",{extend:"Hc_Common.view.BaseMultiPageController",alias:"controller.basbom",onGridRowDblClick:function(j,b,f,i,d){var g=this;var h=b.data.materialNo;var l=b.data.brandNo;var c=b.data.bomPurpose;var k=true;var a=g.lookupReference("menutree");g.loadTree(a,h,l,c,k)},onGrid1BeforeLoad:function(a,b){if(this.callParent(arguments)===false){return false}if(this.lookupReference("menutree").store.getCount()==0){return false}},onTreeSelectionChange:function(b,a){var h=this,e=h.getObjList();if(!e){return}var i=e.mastergrid.store;var c=e.grid1.store;var d=b.selected.items.length;if(d==1){if(b.selected.items[0].data.leaf){return}this.selectNode=b.selected.items[0];var j=b.selected.items[0].data.brandNo;var g=b.selected.items[0].data.materialNo;var f=b.selected.items[0].data.bomPurpose;c.proxy.extraParams.brandNo=j;c.proxy.extraParams.materialNo=g;c.proxy.extraParams.bomPurpose=f;c.reload();e.grid1.view.refresh()}},onAfterItemExpand:function(f,b,e,d){var c=this,a=c.lookupReference("menutree");a.getSelectionModel().select(f)},initToolbar:function(a){this.callParent(arguments);var b=this;a.btnAdd.setVisible(false);a.btnPrint.setVisible(false);a.btnExport.setVisible(false);a.btnDelete.setVisible(false);a.btnReset.setVisible(false);a.btnCancel.setVisible(false);a.btnSave.setVisible(false);a.btnUndo.setVisible(false);a.btnUndo.setVisible(false);a.btnOther.setVisible(false);a.commontoolsp1.setVisible(false);a.commontoolsp2.setVisible(false);a.commontoolsp3.setVisible(false);a.commontoolsp4.setVisible(false);a.commontoolsp5.setVisible(false);a.commontoolsp6.setVisible(false)},loadTree:function(a,c,f,e,g){var d=this;var b=a.store;b.proxy.extraParams.materialNo=c;b.proxy.extraParams.brandNo=f;b.proxy.extraParams.bomPurpose=e;b.proxy.extraParams.isAllList=g;a.store.root.data.expanded=true;b.load();a.expandAll()}});
Ext.define("Hc_mdm.view.basbom.BasBomModel",{extend:"Hc_Common.view.BaseMultiPageModel",alias:"viewmodel.basbom"});
Ext.define("Hc_mdm.view.basbomlist.BasBomList",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basbomlist",controller:"basbomlist",viewModel:{type:"basbomlist"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"品牌",width:200,labelAlign:"right",labelWidth:100,padding:5,name:"brandNo"},{xtype:"textfield",fieldLabel:"物料编号",width:200,labelAlign:"right",labelWidth:100,padding:5,name:"materialNo"},{xtype:"extcombox",fieldLabel:"BOM用途",labelAlign:"right",labelWidth:100,padding:5,width:200,name:"bomPurpose",displayvalue:"S2=开发:STD=标准"}],gridModel:"Hc_mdm.model.BasBomList",gridColumns:[{dataIndex:"lineId",text:"行id(主键)",editor:{allowBlank:false}},{dataIndex:"bomId",text:"BOMID",editor:{allowBlank:false}},{dataIndex:"orderNo",text:"序号",editor:{allowBlank:false}},{dataIndex:"brandNo",text:"品牌",editor:{allowBlank:false}},{dataIndex:"materialNo",text:"物料编号",editor:{allowBlank:false}},{dataIndex:"bomPurpose",text:"BOM用途(S2=开发 STD=标准 SUB=委外 SPD=预测)",editor:{allowBlank:false}},{dataIndex:"dosageNumerator",text:"用量(分子)",editor:{allowBlank:false}},{dataIndex:"dosageDenominator",text:"用量(分母)",editor:{allowBlank:false}},{dataIndex:"pdTypeNo",text:"用途(产品设计材料类别编号)",editor:{allowBlank:false}},{dataIndex:"storeNo",text:"预设仓库(仓库编号)",editor:{allowBlank:false}},{dataIndex:"isVirtual",text:"是否虚拟件(0=否 1=是)",editor:{allowBlank:false}},],gridPrimaryKey:"lineId",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_bom_list/getBomList.json",gridSaveUrl:Hc.mdmPath+"bas_bom_list/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_bom_list/do_export.json",gridImportUrl:Hc.mdmPath+"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basbomlist.BasBomListController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basbomlist"});
Ext.define("Hc_mdm.view.basbomlist.BasBomListModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basbomlist"});
Ext.define("Hc_mdm.view.basbrand.BasBrand",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basbrand",controller:"basbrand",viewModel:{type:"basbrand"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"品牌编号",name:"brandNo"},{xtype:"textfield",fieldLabel:"品牌部编号",name:"brandUpperNo"},{xtype:"textfield",fieldLabel:"品牌中文名",name:"brandCname"},{xtype:"textfield",fieldLabel:"特征码",name:"specialCode"}],gridModel:"Hc_mdm.model.BasBrand",gridColumns:[{dataIndex:"brandNo",text:"品牌编号",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字"}},{dataIndex:"brandEname",text:"品牌英文名",editor:{allowBlank:false,maxLength:30,enforceMaxLength:true}},{dataIndex:"brandCname",text:"品牌中文名",editor:{allowBlank:false,maxLength:30,enforceMaxLength:true}},{dataIndex:"brandUpperNo",text:"品牌部编号",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"specialCode",text:"特征码",editor:{allowBlank:false,maxLength:30,enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag",maxLength:30,enforceMaxLength:true}}],gridPrimaryKey:"brandNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_brand/list.json",gridSaveUrl:Hc.mdmPath+"bas_brand/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_brand/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basbrand.BasBrandController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basbrand"});
Ext.define("Hc_mdm.view.basbrand.BasBrandModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basbrand"});
Ext.define("Hc_mdm.view.basbrandrelation.BasBrandRelation",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basbrandrelation",controller:"basbrandrelation",viewModel:{type:"basbrandrelation"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{fieldLabel:"品牌",name:"brandNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo"},{fieldLabel:"事业部",name:"divisionNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_division/listAll.json",displaymember:"divisionName",valuemember:"divisionNo"},{fieldLabel:"公司",name:"companyNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_company/listAll.json",displaymember:"companyName",valuemember:"companyNo"}],gridModel:"Hc_mdm.model.BasBrandRelation",gridColumns:[{dataIndex:"brandNo",text:"品牌",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo"},{dataIndex:"divisionNo",text:"事业部",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_division/listAll.json",displaymember:"divisionName",valuemember:"divisionNo"},{dataIndex:"companyNo",text:"公司",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true},width:130,xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_company/listAll.json",displaymember:"companyName",valuemember:"companyNo"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield"}},],gridPrimaryKey:"brandNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_brand_relation/list.json",gridSaveUrl:Hc.mdmPath+"bas_brand_relation/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_brand_relation/do_export.json",gridImportUrl:""});a.callParent()}});
Ext.define("Hc_mdm.view.basbrandrelation.BasBrandRelationController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basbrandrelation"});
Ext.define("Hc_mdm.view.basbrandrelation.BasBrandRelationModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basbrandrelation"});
Ext.define("Hc_mdm.view.bascategory.BasCategory",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bascategory",controller:"bascategory",viewModel:{type:"bascategory"},initComponent:function(){var a=this;Ext.apply(a,{gridModel:"Hc_mdm.model.BasCategory",gridColumns:[{dataIndex:"categoryName",text:"类别名称",editor:{allowBlank:false},maxLength:30,enforceMaxLength:true},{xtype:"gridcolumn",dataIndex:"specialCode",text:"特征码",editor:{allowBlank:true,maxLength:20,enforceMaxLength:true}},{xtype:"gridcolumn",dataIndex:"parentCategoryId",text:"上级类别",hidden:true,hideable:false,editor:{allowBlank:false}},{xtype:"gridcolumn",dataIndex:"levelNo",text:"类别级别",hidden:true,hideable:false,editor:{allowBlank:false}},{xtype:"gridcolumn",dataIndex:"categoryId",text:"类别id"},{xtype:"gridcolumn",dataIndex:"categoryNo",text:"类别编号"},{xtype:"gridcolumn",dataIndex:"searchCode",text:"类别路径"},{xtype:"gridcolumn",dataIndex:"affiliation",text:"本部编码",hidden:true,hideable:false},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield"}},{dataIndex:"enableFlag",text:"启用状态",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:"0=禁用:1=启用"}],gridPrimaryKey:"categoryId",gridLoadUrl:Hc.mdmPath+"bas_category/list.json",gridSaveUrl:Hc.mdmPath+"bas_category/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_category/do_export.json",gridImportUrl:"",searchColumn:0,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"SINGLE"});a.otherItems=[{xtype:"treepanel",region:"west",split:true,reference:"menutree",itemId:"menutree",width:300,rootVisible:false,lines:true,columns:[{xtype:"treecolumn",flex:1,dataIndex:"categoryName",text:"类别维护",sortable:false,hideable:false}],store:{model:"Hc_mdm.model.BasCategory",type:"treebase",proxy:{type:"ajax",url:Hc.mdmPath+"bas_category/listAll.json"},root:{id:0,categoryName:"类别",categoryId:0,expanded:false},nodeParam:"parentCategoryId",parentIdProperty:"parentCategoryId"},listeners:{selectionchange:"onTreeSelectionChange",afteritemexpand:"onAfterItemExpand"}}];a.callParent()}});
Ext.define("Hc_mdm.view.bascategory.BasCategoryController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bascategory",init:function(){var b=this,a=b.getObjList();if(!a){return}if(!b.workObject&&a.mastergrid){b.workObject=a.mastergrid}b.callParent(arguments);a.btnSearch.setVisible(false);a.btnReset.setVisible(false);a.btnCopy.setVisible(false);a.btnEdit.setVisible(false);a.btnOther1.setVisible(true);a.btnOther1.setText("刷新树");a.btnOther1.setGlyph(Hc.Icon.btnRefresh)},onRefreshTree:function(){var d=this;var b=d.lookupReference("menutree");var a=b.store;a.proxy.extraParams.parentCategoryId=0;a.load();delete a.proxy.extraParams.parentCategoryId;var e=d.getObjList();var c=e.mastergrid.store;delete c.proxy.extraParams.parentCategoryId;c.proxy.extraParams.parentCategoryId=0;c.load()},onTreeSelectionChange:function(e,a){var b=this,d=b.getObjList();if(!d){return}store=d.mastergrid.store,selLength=e.selected.items.length;if(selLength==1){var c=e.selected.items[0].data.categoryId;store.proxy.extraParams.parentCategoryId=c}else{}store.reload();if(this.canDelete()&&d.btnDelete){d.btnDelete.setDisabled(a.length===0)}if(this.canPrint()&&d.btnPrint){d.btnPrint.setDisabled(a.length===0)}if(this.canEdit()&&d.btnEdit){d.btnEdit.setDisabled(a.length===0)}},onAfterItemExpand:function(f,b,e,d){var c=this,a=c.lookupReference("menutree");a.getSelectionModel().select(f)},initAddData:function(b){var d=this,a=d.lookupReference("menutree");if(!a.selection){Hc.alert("请先选择一个树节点再增加！");return false}var e=a.selection.data.categoryId;var c=a.selection.data.levelNo;b.data.parentCategoryId=e;b.data.levelNo=c+1;b.data.enableFlag=1},onBtnDeleteClick:function(c){var e=this.workObject,b=e.getStore(),d=false,a=e.getSelection();if(a.length<1){return}if(e.isReadOnly){return}if(this.checkDelete(a)===false){return}Ext.Array.each(a,function(f){var h=f.get("_flag");if(h=="A"){b.remove(f)}else{if(e.isCanDelete){var g=f.get("categoryNo");Ext.Ajax.request({url:Hc.mdmPath+"bas_category/checkDelete.json",async:false,params:{categoryNo:g},success:function(k,l){var i=k.responseText;if(i!=""){Hc.alert(i)}else{f.set("_flag","D");d=true}}})}else{Hc.alert("此网格的数据不能删除");return false}}});if(d){e.view.refresh()}},afterSave:function(k,i){var f=this;f.callParent(arguments);var b=f.getObjList();if(!b){return}var l=f.lookupReference("menutree"),d=l.store,e=b.mastergrid.store;var c=l.selection;if(!c){return}var a=0;var g=c.childNodes;for(j=0;j<g.length;j++){var h=g[j];if(h.data.expanded==true){a=1;break}}if(a===1){f.onRefreshTree()}else{d.reload()}},onBtnOther1:function(a){this.onRefreshTree()}});
Ext.define("Hc_mdm.view.bascategory.BasCategoryModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bascategory"});
Ext.define("Hc_mdm.view.bascity.BasCity",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bascity",controller:"bascity",viewModel:{type:"bascity"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"行政市编号",name:"cityNo",maxLength:20,enforceMaxLength:true},{xtype:"textfield",fieldLabel:"行政市名称",name:"cityName",maxLength:15,enforceMaxLength:true}],gridModel:"Hc_mdm.model.BasCity",gridColumns:[{dataIndex:"cityNo",text:"行政市编号",editor:{allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",maxLength:20,enforceMaxLength:true}},{dataIndex:"cityName",text:"行政市名称",editor:{allowBlank:false,maxLength:15,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"cityLname",text:"行政市详细名称",editor:{allowBlank:false,maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"cityOpcode",text:"行政市特征码",editor:{vtype:"alphanum",minLength:3,maxLength:3,allowBlank:false}},{dataIndex:"provinceNo",text:"所属行政省",xtype:"bllookupedit",editor:{allowBlank:false},maxLength:20,width:120,enforceMaxLength:true,displayvalue:Hc.mdmPath+"bas_province/listAll.json",displaymember:"provinceLname",valuemember:"provinceNo"},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag"}}],gridPrimaryKey:"cityNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_city/list.json",gridSaveUrl:Hc.mdmPath+"bas_city/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_city/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.bascity.BasCityController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bascity"});
Ext.define("Hc_mdm.view.bascity.BasCityModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bascity"});
Ext.define("Hc_mdm.view.bascoderule.BasCodeRule",{extend:"Hc_Common.view.BaseMultiPage",alias:"widget.bascoderule",controller:"bascoderule",viewModel:{type:"bascoderule"},isAutoLoad:false,searchItems:[{xtype:"textfield",fieldLabel:"编码规则编号",name:"codeRuleNo"},{xtype:"textfield",fieldLabel:"编码规则名称",name:"codeRuleName"}],gridColumns:[{dataIndex:"codeRuleNo",text:"编码规则编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true}},{dataIndex:"codeRuleName",text:"编码规则名称",editor:{allowBlank:false,maxLength:30,enforceMaxLength:true},width:150},{dataIndex:"codeRuleType",text:"规则类型",editor:{allowBlank:false}},{dataIndex:"allowManualEdit",text:"允许手工编辑",xtype:"bllookupedit",displayvalue:"0=不允许:1=允许"},{dataIndex:"keepContinuous",text:"保持连续编号",xtype:"bllookupedit",displayvalue:"0=否:1=是"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false},xtype:"gridcombouseflag"}],gridModel:"Hc_mdm.model.BasCodeRule",gridPrimaryKey:"codeRuleNo",gridSubGrid:["grid1"],gridLoadUrl:Hc.mdmPath+"bas_code_rule/list.json",gridSaveUrl:Hc.mdmPath+"bas_code_rule/saveMasterCustomerList.json",gridExportUrl:Hc.mdmPath+"bas_code_rule/do_export.json",grid1Columns:[{dataIndex:"codeRuleId",text:"编码规则明细ID",editor:{allowBlank:false},hidden:true},{dataIndex:"codeRuleNo",text:"编码规则编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true},hidden:true},{dataIndex:"codeBeginPosition",text:"编码开始位置",editor:{allowBlank:false}},{dataIndex:"codeEndPosition",text:"编码结束位置",editor:{allowBlank:false}},{dataIndex:"charLength",text:"字符长度"},{dataIndex:"codeType",text:"编码类型",xtype:"bllookupedit",displayvalue:"1=常量:2=取日期:3=取字段:4=流水号:5=手工录入"},{dataIndex:"constValue",text:"常量值",editor:{editable:true,maxLength:10,enforceMaxLength:true}},{dataIndex:"dateFormatValue",text:"日期格式化值",editor:{editable:true,maxLength:10,enforceMaxLength:true}},{dataIndex:"fieldValue",text:"字段值",editor:{editable:true,maxLength:30,enforceMaxLength:true}},{dataIndex:"cutBeginPosition",text:"字段截取开始位置",editor:{allowBlank:true}},{dataIndex:"cutEndPosition",text:"字段截取结束位置",editor:{allowBlank:true}},{dataIndex:"currentSerialDate",text:"当前流水日期",editor:{allowBlank:true}},{dataIndex:"currentSerialNo",text:"当前流水号",editor:{allowBlank:true}},{dataIndex:"resetMode",text:"重置方式",xtype:"bllookupedit",displayvalue:"0=永不重置:1=按天重置:2=按月重置:3=按年重置"},{dataIndex:"padChar",text:"补位符",editor:{allowBlank:true}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:"0=禁用:1=启用"},{dataIndex:"creator",text:"建档人"},{dataIndex:"createTime",text:"建档时间",xtype:"datecolumn",format:"Y-m-d H:m:s"},{dataIndex:"modifier",text:"修改人"},{dataIndex:"modifyTime",text:"修改时间",xtype:"datecolumn",format:"Y-m-d H:m:s"}],grid1Model:"Hc_mdm.model.BasCodeRuleDtl",grid1PrimaryKey:"codeRuleId",grid1SupGrid:"mastergrid",grid1LoadUrl:Hc.mdmPath+"bas_code_rule_dtl/list.json",grid1ExportUrl:Hc.mdmPath+"bas_code_rule_dtl/do_export.json",initComponent:function(){var a=this;a.callParent()}});
Ext.define("Hc_mdm.view.bascoderule.BasCodeRuleController",{extend:"Hc_Common.view.BaseMultiPageController",alias:"controller.bascoderule",init:function(){var b=this,a=b.getObjList();b.callParent(arguments)},initAddData:function(a){var b=this;b.callParent(arguments);a.data.codeType=1;a.data.enableFlag=1},onGrid1BeforeEdit:function(c,d){if(d.field=="constValue"){var a=d.record;var b=a.get("codeType");if(b=="1"){return true}else{return false}}if(d.field=="dateFormatValue"){var a=d.record;var b=a.get("codeType");if(b=="2"){return true}else{return false}}if(d.field=="fieldValue"){var a=d.record;var b=a.get("codeType");if(b=="3"){return true}else{return false}}if(d.field=="currentSerialDate"){var a=d.record;var b=a.get("codeType");if(b=="4"){return true}else{return false}}if(d.field=="currentSerialNo"){var a=d.record;var b=a.get("codeType");if(b=="4"){return true}else{return false}}if(d.field=="resetMode"){var a=d.record;var b=a.get("codeType");if(b=="4"){return true}else{return false}}},onGrid1AfterEdit:function(c,d){if(d.field=="codeBeginPosition"){var a=d.record;var f=a.get("codeBeginPosition");var e=a.get("codeEndPosition");var b=e-f+1;a.set("charLength",b)}if(d.field=="codeEndPosition"){var a=d.record;var f=a.get("codeBeginPosition");var e=a.get("codeEndPosition");var b=e-f+1;if(b<0){Hc.alert("结束位置不能小于开始位置!");console.dir(d)}else{a.set("charLength",b)}}}});
Ext.define("Hc_mdm.view.bascoderule.BasCodeRuleModel",{extend:"Hc_Common.view.BaseMultiPageModel",alias:"viewmodel.bascoderule"});
Ext.define("Hc_mdm.view.bascolor.BasColor",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bascolor",controller:"bascolor",viewModel:{type:"bascolor"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{fieldLabel:"色系",name:"colorSeriesName",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=color_series",displaymember:"itemName",valuemember:"itemName"},{xtype:"textfield",fieldLabel:"颜色编号",name:"colorNo",maxLength:20,enforceMaxLength:true},{xtype:"textfield",fieldLabel:"颜色名称",name:"colorName",maxLength:30,enforceMaxLength:true}],gridModel:"Hc_mdm.model.BasColor",gridColumns:[{dataIndex:"colorSeriesName",text:"色系",editor:{editable:false,xtype:"combo",id:"csCode",displayField:"displayName",valueField:"itemName",store:{type:"basestore",autoLoad:true,fields:["itemCode","itemName"],proxy:{url:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=color_series"}}}},{dataIndex:"colorNo",text:"颜色编号",editor:{allowBlank:false,maxLength:20,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"colorName",text:"颜色名称",editor:{allowBlank:false,maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",maxLength:20,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:"0=禁用:1=启用"}],gridPrimaryKey:"colorNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_color/list.json",gridSaveUrl:Hc.mdmPath+"bas_color/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_color/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.bascolor.BasColorController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bascolor",init:function(){this.callParent(arguments);this.getReferences().mastergrid.on("edit",this.gridEdit,this)},gridEdit:function(c,b){if(b.field=="colorSeriesName"){var a=Ext.getCmp("csCode").getRawValue();lengths=a.length-b.value.length-2;a=Ext.util.Format.substr(a,0,lengths);b.record.set("colorSeriesCode",a)}}});
Ext.define("Hc_mdm.view.bascolor.BasColorModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bascolor"});
Ext.define("Hc_mdm.view.bascompany.BasCompany",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bascompany",controller:"bascompany",viewModel:{type:"bascompany"},initComponent:function(){var e=this,d=Ext.create("Hc_mdm.store.BasProvince"),c=Ext.create("Hc_mdm.store.BasCity"),b=Ext.create("Hc_mdm.store.BasCity"),a=Ext.create("Hc_mdm.store.BasCounty"),f=Ext.create("Hc_mdm.store.BasCounty");Ext.apply(e,{searchItems:[{xtype:"textfield",fieldLabel:"地区",name:"regionNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_region/listAll.json",displaymember:"regionName",valuemember:"regionNo"},{xtype:"combo",fieldLabel:"行政省",name:"provinceNo",reference:"provinceCombo",editable:false,displayField:"provinceLname",valueField:"provinceNo",store:d,renderer:function(h){var g=d.findExact("provinceNo",h);return g>-1?d.getAt(g).data.provinceLname:h},listeners:{change:"onChangeprovinceNo"}},{xtype:"combo",fieldLabel:"行政市",name:"cityNo",reference:"cityCombo",editable:false,displayField:"cityName",valueField:"cityNo",store:{type:"basestore",fields:["cityNo","cityName"],proxy:{url:Hc.mdmPath+"bas_city/list.json?page=1&start=0&limit=50"},listeners:{beforeload:function(g,h){if(!e.lookupReference("provinceCombo").getValue()){e.lookupReference("cityCombo").setReadOnly(true);return false}}}},listeners:{change:"onChangecityNo"}},{xtype:"textfield",fieldLabel:"公司编号",name:"companyNo",maxLength:10,enforceMaxLength:true},{xtype:"textfield",fieldLabel:"公司名称",name:"companyName",maxLength:30,enforceMaxLength:true}],gridModel:"Hc_mdm.model.BasCompany",gridColumns:[{dataIndex:"companyNo",text:"公司编号",editor:{allowBlank:false,maxLength:10,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"companyName",text:"公司名称",width:130,editor:{allowBlank:false,maxLength:30,regex:/^[\u4e00-\u9fa5a-zA-Z0-9()（）]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"companyType",text:"公司类型",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:"1=利润中心:0=法人组织"},{dataIndex:"companyForm",text:"公司形态",editor:{allowBlank:true},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=company_form",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"regionNo",text:"地区",editor:{allowBlank:true},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_region/listAll.json",displaymember:"regionName",valuemember:"regionNo"},{dataIndex:"bankName",text:"开户银行",editor:{maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"bankAccountCode",text:"银行账号",editor:{maxLength:30,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"bankAccountName",text:"银行账户名",editor:{maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"contacter",text:"联系人",editor:{maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"mobileNo",text:"手机号码",editor:{maxLength:20,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"taxpayingNo",text:"税务登记号",editor:{maxLength:30,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"taxLevel",text:"纳税级别",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:"0=一般纳税人:1=小规模纳税人"},{dataIndex:"legalPerson",text:"法人代表",editor:{maxLength:20,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"certificateCode",text:"营业证号",editor:{maxLength:30,regex:/^[0-9]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"faxNo",text:"传真号",editor:{maxLength:30,regex:/^[0-9]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"email",text:"电子邮箱",editor:{vtype:"email"}},{dataIndex:"postCode",text:"邮政编码",vtype:"email",editor:{maxLength:20,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"provinceNo",text:"行政省",width:130,xtype:"bllookupedit",editor:{allowBlank:true},estore:d,gstore:d,displaymember:"provinceLname",valuemember:"provinceNo"},{dataIndex:"cityNo",text:"行政市",xtype:"bllookupedit",editor:{allowBlank:true},gstore:b,estore:c,displaymember:"cityName",valuemember:"cityNo"},{dataIndex:"countyNo",text:"行政县",width:130,xtype:"bllookupedit",editor:{allowBlank:true},gstore:f,estore:a,displaymember:"countyName",valuemember:"countyNo"},{dataIndex:"contactAddress",text:"联系地址",width:300,editor:{maxLength:255,enforceMaxLength:true}},{dataIndex:"businessFunctions",text:"业务职能",hidden:true,editor:{xtype:"combo",multiSelect:true,emptyText:"请选择...",store:[[1,"销售职能"],[1,"采购职能"],[1,"库存职能"],[1,"工厂职能"],[1,"质检职能"],[1,"结算职能"],[1,"资产职能"],[1," 资金职能"],[1,"收付职能"]]},renderer:function(g){return g}},{dataIndex:"dataSource",text:"数据来源",xtype:"bllookupedit",editor:{allowBlank:true},displayvalue:"0=主数据:1=工厂"},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag"}}],gridPrimaryKey:"companyNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_company/list.json",gridSaveUrl:Hc.mdmPath+"bas_company/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_company/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});e.callParent()}});
Ext.define("Hc_mdm.view.bascompany.BasCompanyController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bascompany",init:function(){var b=this,a=b.getObjList();b.callParent(arguments);b.lookupReference("cityCombo").setReadOnly(true);b.workObject.on("beforeedit","onGridBeforeEdit",b)},onChangeprovinceNo:function(d,c){var b=this.lookupReference("provinceCombo").getValue();var a=this.lookupReference("cityCombo");if(b){a.setValue("");a.setReadOnly(false);a.store.proxy.extraParams.provinceNo=b;a.store.load()}else{a.setReadOnly(true);a.setValue("")}},onChangecityNo:function(d,c,b){var a=this.lookupReference("provinceCombo").getValue();if(!a){d.setValue("");return false}},onGridBeforeEdit:function(d,h){var j=this;if(j.callParent(arguments)===false){return false}if(h.field=="cityNo"){var g=h.record;var a=g.get("provinceNo");var b=g.get("cityNo");if(a==""){Ext.Msg.alert("提示","请先选择省份");return false}else{var k=h.column.getEditor().store;oldProvinceNo=k.proxy.extraParams.provinceNo;if(a!=oldProvinceNo){k.proxy.extraParams.provinceNo=a;k.on("load",function(){h.column.getEditor().setValue(b)});k.load()}}}if(h.field=="countyNo"){var g=h.record;var c=g.get("provinceNo");var f=g.get("cityNo");var i=g.get("countyNo");if(c==""&&f==""){Ext.Msg.alert("提示","请先选择省份、城市");return false}if(c==""){Ext.Msg.alert("提示","请先选择省份");return false}else{if(f==""){Ext.Msg.alert("提示","请先选择城市");return false}else{var k=h.column.getEditor().store;oldCityNo=k.proxy.extraParams.cityNo;if(f!=oldCityNo){k.proxy.extraParams.cityNo=f;k.on("load",function(){h.column.getEditor().setValue(i)});k.load()}}}}},onGridAfterEdit:function(d,g){var f=this;if(f.callParent(arguments)===false){return false}if(g.field=="provinceNo"){var i=g.originalValue;var c=g.value;if(i!=c){var b=g.record;b.set("cityNo","");b.set("countyNo","")}}if(g.field=="cityNo"){var h=g.originalValue;var a=g.value;if(a!=h){var b=g.record;b.set("countyNo","")}}}});
Ext.define("Hc_mdm.view.bascompany.BasCompanyModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bascompany"});
Ext.define("Hc_mdm.view.bascountry.BasCountry",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bascountry",controller:"bascountry",viewModel:{type:"bascountry"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"国家编号",name:"countryNo"},{xtype:"textfield",fieldLabel:"国家名称",name:"countryName"},{xtype:"extcombox",fieldLabel:"币别",name:"currencyNo",displayvalue:Hc.mdmPath+"bas_currency/list.json",displaymember:"currencyName",valuemember:"currencyNo"}],gridModel:"Hc_mdm.model.BasCountry",gridColumns:[{dataIndex:"countryNo",text:"国家编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字"}},{dataIndex:"countryName",text:"国家名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"currencyNo",text:"币别",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_currency/list.json",displaymember:"currencyName",valuemember:"currencyNo"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield"}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false,xtype:"combouseflag",maxLength:11,enforceMaxLength:true},renderer:"renderUseFlag"}],gridPrimaryKey:"countryNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_country/list.json",gridSaveUrl:Hc.mdmPath+"bas_country/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_country/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.bascountry.BasCountryController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bascountry"});
Ext.define("Hc_mdm.view.bascountry.BasCountryModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bascountry"});
Ext.define("Hc_mdm.view.bascounty.BasCounty",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bascounty",controller:"bascounty",viewModel:{type:"bascounty"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"行政县编号",name:"countyNo",maxLength:20,enforceMaxLength:true},{xtype:"textfield",fieldLabel:"行政县名称",name:"countyName",maxLength:15,enforceMaxLength:true}],gridModel:"Hc_mdm.model.BasCounty",gridColumns:[{dataIndex:"countyNo",text:"行政县编号",editor:{allowBlank:false,maxLength:20,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"countyName",text:"行政县名称",editor:{allowBlank:false,maxLength:15,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"countyLname",text:"行政县详细名称",editor:{allowBlank:false,maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"countyOpcode",text:"行政县特征码",editor:{vtype:"alphanum",minLength:2,maxLength:2,allowBlank:false}},{dataIndex:"cityNo",text:"所属行政市",width:120,xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_city/listAll.json",displaymember:"cityName",valuemember:"cityNo"},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",renderer:"renderUseFlag",text:"启用状态",editor:{allowBlank:false,xtype:"combouseflag"}}],gridPrimaryKey:"countyNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_county/list.json",gridSaveUrl:Hc.mdmPath+"bas_county/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_county/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.bascounty.BasCountyController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bascounty"});
Ext.define("Hc_mdm.view.bascounty.BasCountyModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bascounty"});
Ext.define("Hc_mdm.view.bascurrency.BasCurrency",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bascurrency",controller:"bascurrency",viewModel:{type:"bascurrency"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"币别编号",name:"currencyNo"},{xtype:"textfield",fieldLabel:"币别名称",name:"currencyName"}],gridModel:"Hc_mdm.model.BasCurrency",gridColumns:[{dataIndex:"currencyNo",text:"币别编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",}},{dataIndex:"currencyName",text:"币别名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"currencySymbol",text:"币别符号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true}},{dataIndex:"isSymbolDisplay",text:"是否显示符号",editor:{allowBlank:false,xtype:"comboyesno",maxLength:11,enforceMaxLength:true},renderer:"renderYesNo"},{dataIndex:"fomart",text:"显示格式",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"priceDigits",text:"单价小数位数",editor:{allowBlank:false,maxLength:11,enforceMaxLength:true}},{dataIndex:"valueDigits",text:"金额小数位数",editor:{allowBlank:false,maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false,xtype:"combouseflag",maxLength:11,enforceMaxLength:true},renderer:"renderUseFlag"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield",maxLength:11,enforceMaxLength:true}}],gridPrimaryKey:"currencyNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_currency/list.json",gridSaveUrl:Hc.mdmPath+"bas_currency/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_currency/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.bascurrency.BasCurrencyController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bascurrency"});
Ext.define("Hc_mdm.view.bascurrency.BasCurrencyModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bascurrency"});
Ext.define("Hc_mdm.view.bascustomer.BasCustomer",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bascustomer",controller:"bascustomer",viewModel:{type:"bascustomer"},initComponent:function(){var a=this;countryEStore=Ext.create("Hc_mdm.store.BasCountry"),countryGStore=Ext.create("Hc_mdm.store.BasCountry"),provinceEStore=Ext.create("Hc_mdm.store.BasProvince"),provinceGStore=Ext.create("Hc_mdm.store.BasProvince"),Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"客户编号",name:"customerNo",maxLength:20,enforceMaxLength:true},{xtype:"textfield",fieldLabel:"客户简称",name:"customerName",maxLength:100,enforceMaxLength:true},{xtype:"combo",fieldLabel:"国家",name:"countryNo",reference:"countryCombo",editable:false,displayField:"countryName",valueField:"countryNo",store:countryEStore,renderer:function(c){var b=countryEStore.findExact("countryNo",c);return b>-1?countryEStore.getAt(b).data.countryName:c},listeners:{change:"onChangecountryNo"}},{xtype:"combo",fieldLabel:"省/州",name:"provinceNo",reference:"provinceCombo",editable:false,displayField:"provinceLname",valueField:"provinceNo",store:{type:"basestore",fields:["provinceNo","provinceLname"],proxy:{url:Hc.mdmPath+"bas_province/listAll.json?enableFlag=1"},listeners:{beforeload:function(b,c){if(!a.lookupReference("countryCombo").getValue()){a.lookupReference("provinceCombo").setReadOnly(true);return false}}}},listeners:{change:"onChangeprovinceNo"}},{xtype:"textfield",fieldLabel:"地区",name:"regionNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_region/listAll.json?enableFlag=1",displaymember:"regionName",valuemember:"regionNo"},{xtype:"datefield",fieldLabel:"创建时间",name:"createFromTime",vtype:"compareTo",compareTo:"createToTime",compareType:"<=",compareError:"开始日期不能大于结束日期,请重新选择"},{xtype:"datefield",fieldLabel:"   至     ",name:"createToTime",vtype:"compareTo",compareTo:"createFromTime",compareType:">=",compareError:"结束日期不能小于开始日期,请重新选择"}],gridModel:"Hc_mdm.model.BasCustomer",gridColumns:[{dataIndex:"customerNo",text:"客户编号",editor:{allowBlank:false,maxLength:20,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"customerName",text:"客户简称",editor:{allowBlank:false,maxLength:100,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"customerLname",text:"客户全称",editor:{allowBlank:false,maxLength:100,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"customerType",text:"客户类型",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=customer_type",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"customerLevel",text:"客户等级",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=customer_level",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"customerGroup",text:"客户群组",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=customer_group",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"countryNo",text:"国家",xtype:"bllookupedit",editor:{allowBlank:true},estore:countryEStore,gstore:countryGStore,displaymember:"countryName",valuemember:"countryNo"},{dataIndex:"provinceNo",text:"省/州",width:130,xtype:"bllookupedit",editor:{allowBlank:true},estore:provinceEStore,gstore:provinceGStore,displaymember:"provinceLname",valuemember:"provinceNo"},{dataIndex:"regionNo",text:"地区",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_region/listAll.json?enableFlag=1",displaymember:"regionName",valuemember:"regionNo"},{dataIndex:"language",text:"语言",xtype:"bllookupedit",editor:{allowBlank:true},displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=language",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"settlementCompany",text:"结算公司编码",editor:{maxLength:20,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"bankName",text:"开户银行",editor:{maxLength:60,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"bankAccountCode",text:"银行账号",editor:{maxLength:30,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"bankAccountName",text:"银行账户名",editor:{maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"taxpayingNo",text:"税务登记号",editor:{maxLength:30,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"contacter",text:"联系人",editor:{maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"mobileNo",text:"手机号码",editor:{maxLength:20,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"email",text:"电子邮箱",editor:{vtype:"email"}},{dataIndex:"contactAddress",text:"联系地址",width:300,editor:{maxLength:255,enforceMaxLength:true}},{dataIndex:"currencyNo",text:"币别",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_currency/listAll.json?enableFlag=1",displaymember:"currencyName",valuemember:"currencyNo"},{dataIndex:"paymentClauseNo",text:"收款条件",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_payment_clause/listAll.json?enableFlag=1",displaymember:"paymentClauseName",valuemember:"paymentClauseNo"},{dataIndex:"paymentMethodNo",text:"结算方式",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_payment_method/listAll.json?enableFlag=1",displaymember:"paymentMethodName",valuemember:"paymentMethodNo"},{dataIndex:"combineBill",text:"合并发票",xtype:"bllookupedit",editor:{allowBlank:true},displayvalue:"0=是:1=否"},{dataIndex:"summaryBill",text:"汇总开票",xtype:"bllookupedit",editor:{allowBlank:true},displayvalue:"1=同一订单:2=同一付款人",hidden:true},{dataIndex:"independentBill",text:"独立发票",xtype:"bllookupedit",editor:{allowBlank:true},displayvalue:"0=不:1=每个地址:2=每个发货通知"},{dataIndex:"exchangeRateType",text:"汇率类型",xtype:"bllookupedit",editor:{allowBlank:true},displayvalue:"1=通用费率"},{dataIndex:"taxRateNo",text:"增值税",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_tax_rate/listAll.json?enableFlag=1",displaymember:"taxRateName",valuemember:"taxRateNo"},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag"}}],gridPrimaryKey:"customerNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_customer/list.json",gridSaveUrl:Hc.mdmPath+"bas_customer/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_customer/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.bascustomer.BasCustomerController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bascustomer",init:function(){var b=this,a=b.getObjList();b.callParent(arguments);b.lookupReference("provinceCombo").setReadOnly(true);b.workObject.on("beforeedit","onGridBeforeEdit",b)},onChangecountryNo:function(c,b){var d=this.lookupReference("countryCombo").getValue();var a=this.lookupReference("provinceCombo");if(d){a.setValue("");a.setReadOnly(false);a.store.proxy.extraParams.countryNo=d;a.store.load()}else{a.setReadOnly(true);a.setValue("")}},onChangeprovinceNo:function(c,b,a){var d=this.lookupReference("countryCombo").getValue();if(!d){c.setValue("");return false}},onGridBeforeEdit:function(d,h){var f=this;if(f.callParent(arguments)===false){return false}if(h.field=="provinceNo"){var b=h.record;var a=b.get("countryNo");var g=b.get("provinceNo");if(a==""){Ext.Msg.alert("提示","请先选择国家");return false}else{var c=h.column.getEditor().store;oldcountryNo=c.proxy.extraParams.countryNo;if(a!=oldcountryNo){c.proxy.extraParams.countryNo=a;c.on("load",function(){h.column.getEditor().setValue(g)});c.load()}}}if(h.field=="paymentClauseNo"){var c=h.column.getEditor().store;c.proxy.extraParams.paymentClauseType=2;c.load()}},onGridAfterEdit:function(d,g){var f=this;if(f.callParent(arguments)===false){return false}if(g.field=="countryNo"){var c=g.originalValue;var a=g.value;if(c!=a){var b=g.record;b.set("provinceNo","")}}}});
Ext.define("Hc_mdm.view.bascustomer.BasCustomerModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bascustomer"});
Ext.define("Hc_mdm.view.basdeliverypoint.BasDeliveryPoint",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basdeliverypoint",controller:"basdeliverypoint",viewModel:{type:"basdeliverypoint"},initComponent:function(){var e=this,d=Ext.create("Hc_mdm.store.BasProvince"),c=Ext.create("Hc_mdm.store.BasCity"),b=Ext.create("Hc_mdm.store.BasCity"),a=Ext.create("Hc_mdm.store.BasCounty"),f=Ext.create("Hc_mdm.store.BasCounty");Ext.apply(e,{searchItems:[{xtype:"textfield",fieldLabel:"地区",name:"regionNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_region/listAll.json?enableFlag=1",displaymember:"regionName",valuemember:"regionNo"},{xtype:"combo",fieldLabel:"行政省",name:"provinceNo",reference:"provinceCombo",editable:false,displayField:"provinceLname",valueField:"provinceNo",store:d,renderer:function(h){var g=d.findExact("provinceNo",h);return g>-1?d.getAt(g).data.provinceLname:h},listeners:{change:"onChangeprovinceNo"}},{xtype:"combo",fieldLabel:"行政市",name:"cityNo",reference:"cityCombo",editable:false,displayField:"cityName",valueField:"cityNo",store:{type:"basestore",fields:["cityNo","cityName"],proxy:{url:Hc.mdmPath+"bas_city/list.json?enableFlag=1&page=1&start=0&limit=50"},listeners:{beforeload:function(g,h){if(!e.lookupReference("provinceCombo").getValue()){e.lookupReference("cityCombo").setReadOnly(true);return false}}}},listeners:{change:"onChangecityNo"}},{xtype:"textfield",fieldLabel:"送货地点编号",name:"pointNo",maxLength:20,enforceMaxLength:true},{xtype:"textfield",fieldLabel:"送货地点名称",name:"pointName",maxLength:30,enforceMaxLength:true},{xtype:"datefield",fieldLabel:"创建时间",name:"createFromTime",vtype:"compareTo",compareTo:"createToTime",compareType:"<=",compareError:"开始日期不能大于结束日期,请重新选择"},{xtype:"datefield",fieldLabel:"   至     ",name:"createToTime",vtype:"compareTo",compareTo:"createFromTime",compareType:">=",compareError:"结束日期不能小于开始日期"}],gridModel:"Hc_mdm.model.BasColor",gridColumns:[{dataIndex:"pointNo",text:"送货地点编号",editor:{allowBlank:false,maxLength:20,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"pointName",text:"送货地点名称",width:130,editor:{allowBlank:false,maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"provinceNo",text:"行政省",width:130,xtype:"bllookupedit",editor:{allowBlank:false},estore:d,gstore:d,displaymember:"provinceLname",valuemember:"provinceNo"},{dataIndex:"cityNo",text:"行政市",xtype:"bllookupedit",editor:{allowBlank:false},gstore:b,estore:c,displaymember:"cityName",valuemember:"cityNo"},{dataIndex:"countyNo",text:"行政县",width:130,xtype:"bllookupedit",editor:{allowBlank:false},gstore:f,estore:a,displaymember:"countyName",valuemember:"countyNo"},{dataIndex:"regionNo",text:"地区",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_region/listAll.json?enableFlag=1",displaymember:"regionName",valuemember:"regionNo"},{dataIndex:"areaTotal",text:"总面积",editor:{allowBlank:false,xtype:"numberfield",maxLength:12,decimalPrecision:2,minValue:1,minText:"面积不能小于或等于0",enforceMaxLength:true}},{dataIndex:"contacter",text:"联系人",editor:{maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"phoneNo",text:"电话",editor:{maxLength:20,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"mobileNo",text:"手机",editor:{maxLength:20,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"contactAddress",text:"联系地址",width:300,editor:{maxLength:60,enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag"}}],gridPrimaryKey:"pointNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_delivery_point/list.json",gridSaveUrl:Hc.mdmPath+"bas_delivery_point/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_delivery_point/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});e.callParent()}});
Ext.define("Hc_mdm.view.basdeliverypoint.BasDeliveryPointController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basdeliverypoint",init:function(){var b=this,a=b.getObjList();b.callParent(arguments);b.lookupReference("cityCombo").setReadOnly(true);b.workObject.on("beforeedit","onGridBeforeEdit",b)},onChangeprovinceNo:function(d,c){var b=this.lookupReference("provinceCombo").getValue();var a=this.lookupReference("cityCombo");if(b){a.setValue("");a.setReadOnly(false);a.store.proxy.extraParams.provinceNo=b;a.store.load()}else{a.setReadOnly(true);a.setValue("")}},onChangecityNo:function(d,c,b){var a=this.lookupReference("provinceCombo").getValue();if(!a){d.setValue("");return false}},onGridBeforeEdit:function(d,h){var j=this;if(j.callParent(arguments)===false){return false}if(h.field=="cityNo"){var g=h.record;var a=g.get("provinceNo");var b=g.get("cityNo");if(Ext.isEmpty(a)){Ext.Msg.alert("提示","请先选择省份");return false}else{var k=h.column.getEditor().store;oldProvinceNo=k.proxy.extraParams.provinceNo;if(a!=oldProvinceNo){k.proxy.extraParams.provinceNo=a;k.on("load",function(){h.column.getEditor().setValue(b)});k.load()}}}if(h.field=="countyNo"){var g=h.record;var c=g.get("provinceNo");var f=g.get("cityNo");var i=g.get("countyNo");if(Ext.isEmpty(c)&&Ext.isEmpty(f)){Ext.Msg.alert("提示","请先选择省份、城市");return false}if(Ext.isEmpty(c)){Ext.Msg.alert("提示","请先选择省份");return false}else{if(Ext.isEmpty(f)){Ext.Msg.alert("提示","请先选择城市");return false}else{var k=h.column.getEditor().store;oldCityNo=k.proxy.extraParams.cityNo;if(f!=oldCityNo){k.proxy.extraParams.cityNo=f;k.on("load",function(){h.column.getEditor().setValue(i)});k.load()}}}}},onGridAfterEdit:function(d,g){var f=this;if(f.callParent(arguments)===false){return false}if(g.field=="provinceNo"){var i=g.originalValue;var c=g.value;if(i!=c){var b=g.record;b.set("cityNo","");b.set("countyNo","")}}if(g.field=="cityNo"){var h=g.originalValue;var a=g.value;if(a!=h){var b=g.record;b.set("countyNo","")}}}});
Ext.define("Hc_mdm.view.basdeliverypoint.BasDeliveryPointModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basdeliverypoint"});
Ext.define("Hc_mdm.view.basdict.BasDict",{extend:"Hc_Common.view.BaseMultiPage",alias:"widget.basdict",controller:"basdict",viewModel:{type:"basdict"},searchItems:[{xtype:"textfield",fieldLabel:"字典编号",name:"dictCode"},{xtype:"textfield",fieldLabel:"字典名称",name:"dictName"}],gridColumns:[{dataIndex:"dictCode",text:"字典编号",editor:{allowBlank:false}},{dataIndex:"dictName",text:"字典名称",editor:true},{dataIndex:"appNo",text:"应用代号",xtype:"bllookupedit",displayvalue:Hc.basePath+"itg_application/list.json",displaymember:"appName",valuemember:"appNo"},{dataIndex:"dictLevel",text:"层级",editor:{xtype:"numberfield"}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{xtype:"combouseflag",allowBlank:false}},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield"}}],gridModel:"Hc_mdm.model.BasDict",gridPrimaryKey:"dictId",gridSubGrid:["grid1"],gridSupGrid:"",gridLoadUrl:Hc.mdmPath+"bas_dict/list.json",gridSaveUrl:Hc.mdmPath+"bas_dict/saveMasterCustomerList.json",gridExportUrl:Hc.mdmPath+"bas_dict/do_export.json",gridImportUrl:Hc.mdmPath+"bas_dict/importExcel.json",gridcolNames:"dictCode,dictName,appNo,dictLevel,enableFlag,orderNo,creator,remarks",gridmustArray:"true,true,true,true,true,true,true,true",gridisValidateAll:"Y",gridmainKey:"",gridvalidationConditions:'[{ validationType:"unique", conditionValue:"dictCode",  validationModel:"BasDict"}]',gridfileName:"数据字典主表",gridfileType:"xlsx",gridexportColumns:'[{"field":"dictCode","title":"字典编号"},{"field":"dictName","title":"字典名称"},{"field": "appNo", "title": "应用代号"},{"field": "dictLevel", "title": "层级"},{"field": "enableFlag", "title": "启用状态"},{"field": "orderNo", "title": "排列序号"},{"field": "remarks", "title": "备注"},{"field": "creator", "title": "建档人"},{"field": "createTime", "title": "建档时间"}]',grid1Columns:[{dataIndex:"dictCode",text:"字典编号",hidden:true,bind:{value:"{gridRow.dictCode}"}},{dataIndex:"itemCode",text:"明细编码",editor:{allowBlank:false}},{dataIndex:"itemName",text:"明细名称",editor:{allowBlank:false}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{xtype:"combouseflag",allowBlank:false}},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",allowBlank:true}}],grid1HasMark:true,grid1HasCreator:true,grid1HasModifier:true,grid1SubGrid:[],grid1SupGrid:"mastergrid",grid1Model:"Hc_mdm.model.BasDictDtl",grid1PrimaryKey:"dictDtlId",grid1LoadUrl:Hc.mdmPath+"bas_dict_dtl/list.json",grid1ExportUrl:Hc.mdmPath+"bas_dict_dtl/do_export.json",grid1ImportUrl:Hc.mdmPath+"bas_dict_dtl/importExcel.json",grid1colNames:"itemCode,itemName,enableFlag,orderNo,creator,remarks",grid1mustArray:"true,true,true,true,true,true",grid1isValidateAll:"Y",grid1mainKey:"",grid1validationConditions:'[{ validationType:"unique", conditionValue:"dictId,itemCode",  validationModel:"BasDictDtl"}]',grid1fileName:"数据字典从表",grid1fileType:"xlsx",grid1exportColumns:'[{"field":"itemCode","title":"明细编码"},{"field":"itemName","title":"明细名称"},{"field": "orderNo", "title": "排列序号"},{"field": "remarks", "title": "备注"},{"field": "creator", "title": "建档人"},{"field": "createTime", "title": "建档时间"}]',gridLogWinTitle:"数据字典-日志-主表",gridLogLoadUrl:Hc.mdmPath+"log_dict/list.json",grid1LogWinTitle:"数据字典-日志-从表",grid1LogLoadUrl:Hc.mdmPath+"log_dict_dtl/list.json",initComponent:function(){var a=this;a.callParent()}});
Ext.define("Hc_mdm.view.basdict.BasDictController",{extend:"Hc_Common.view.BaseMultiPageController",alias:"controller.basdict",init:function(){var a=this;a.callParent()},initAddData:function(a){var e=this,c=e.getObjList(),f=e.workObject;if(f.isMaster&&e.editingList.length>0){Hc.alert("有一笔数据正在编辑，不能新增主表记录");return false}if(f.supGrid){var d=c[f.supGrid].getSelection()[0];if(!d){Hc.alert("主表没有选中记录时，从表不能新增记录");return false}if(!d.phantom){var b=c[f.supGrid].primaryKey;a.set(b,d.get(b));a.set("dictCode",d.get("dictCode"))}}}});
Ext.define("Hc_mdm.view.basdict.BasDictModel",{extend:"Hc_Common.view.BaseMultiPageModel",alias:"viewmodel.basdict"});
Ext.define("Hc_mdm.view.basdivision.BasDivision",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basdivision",controller:"basdivision",viewModel:{type:"basdivision"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"事业部编号",name:"divisionNo",maxLength:10,enforceMaxLength:true},{xtype:"textfield",fieldLabel:"事业部名称",name:"divisionName",maxLength:30,enforceMaxLength:true}],gridModel:"Hc_mdm.model.BasDivision",gridColumns:[{dataIndex:"divisionNo",text:"事业部编号",editor:{allowBlank:false,maxLength:10,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"divisionName",text:"事业部名称",editor:{allowBlank:false,maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"contacter",text:"联系人",editor:{maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"mobileNo",text:"手机号码",editor:{maxLength:20,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"faxNo",text:"传真号",editor:{maxLength:30,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"email",text:"电子邮箱",editor:{vtype:"email"}},{dataIndex:"postCode",text:"邮政编码",editor:{maxLength:20,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"contactAddress",text:"联系地址",width:300,editor:{maxLength:255,enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag"}}],gridPrimaryKey:"divisionNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_division/list.json",gridSaveUrl:Hc.mdmPath+"bas_division/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_division/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basdivision.BasDivisionController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basdivision"});
Ext.define("Hc_mdm.view.basdivision.BasDivisionModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basdivision"});
Ext.define("Hc_mdm.view.basfactory.BasFactory",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basfactory",controller:"basfactory",viewModel:{type:"basfactory"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"厂区编号",name:"factoryNo",maxLength:10,enforceMaxLength:true},{xtype:"textfield",fieldLabel:"厂区名称",name:"factoryName",maxLength:30,enforceMaxLength:true}],gridModel:"Hc_mdm.model.BasFactory",gridColumns:[{dataIndex:"factoryNo",text:"厂区编号",editor:{allowBlank:false,maxLength:10,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"factoryName",text:"厂区名称",editor:{allowBlank:false,maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"contacter",text:"联系人",editor:{maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"mobileNo",text:"手机号码",editor:{maxLength:20,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"faxNo",text:"传真号",editor:{maxLength:30,regex:/^[0-9]+$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"email",text:"电子邮箱",editor:{vtype:"email"}},{dataIndex:"postCode",text:"邮政编码",editor:{maxLength:20,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"contactAddress",text:"联系地址",width:300,editor:{maxLength:255,enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag"}}],gridPrimaryKey:"factoryNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_factory/list.json",gridSaveUrl:Hc.mdmPath+"bas_factory/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_factory/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basfactory.BasFactoryController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basfactory"});
Ext.define("Hc_mdm.view.basfactory.BasFactoryModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basfactory"});
Ext.define("Hc_mdm.view.basfee.BasFee",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basfee",controller:"basfee",viewModel:{type:"basfee"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"费用编号",name:"feeNo"},{xtype:"textfield",fieldLabel:"费用名称",name:"feeName"}],gridModel:"Hc_mdm.model.BasFee",gridColumns:[{dataIndex:"feeNo",text:"费用编号",editor:{allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入20位字母或数字",maxLength:20,enforceMaxLength:true}},{dataIndex:"feeName",text:"费用名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"taxRateNo",text:"税率名称",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_tax_rate/list.json",displaymember:"taxRateName",valuemember:"taxRateNo"},{dataIndex:"feeCategory",text:"费用分类",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"subjectNo",text:"科目编号",editor:{allowBlank:true}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false,xtype:"comboyesno"},renderer:"renderYesNo"}],gridPrimaryKey:"feeNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_fee/list.json",gridSaveUrl:Hc.mdmPath+"bas_fee/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_fee/do_export.json",gridImportUrl:Hc.mdmPath+"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basfee.BasFeeController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basfee"});
Ext.define("Hc_mdm.view.basfee.BasFeeModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basfee",});
Ext.define("Hc_mdm.view.basmajor.BasMajor",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basmajor",controller:"basmajor",viewModel:{type:"basmajor"},initComponent:function(){var a=this;Ext.apply(a.searchPanel,{items:[]});Ext.apply(a.grid,{columns:[{dataIndex:"categoryNo",text:"",editor:{allowBlank:false}},{dataIndex:"materialType",text:"",editor:{allowBlank:false}},{dataIndex:"orderNo",text:"",editor:{allowBlank:false}},{dataIndex:"creator",text:"",editor:{allowBlank:false}},{dataIndex:"createTime",text:"",editor:{allowBlank:false}},{dataIndex:"modifier",text:"",editor:{allowBlank:false}},{dataIndex:"modifyTime",text:"",editor:{allowBlank:false}},{dataIndex:"remarks",text:"",editor:{allowBlank:false}},],batchUrl:Hc.IntegPath+"rest/bas_major/listsave.json"});a.callParent()}});
Ext.define("Hc_mdm.view.basmajor.BasMajorController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basmajor"});
Ext.define("Hc_mdm.view.basmajor.BasMajorModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basmajor",stores:{commonstore:{model:"Hc_mdm.model.BasMajor",proxy:{url:Hc.IntegPath+"rest/bas_major/list.json"}}}});
Ext.define("Hc_mdm.view.basmaterial.BasMaterial",{extend:"Hc_Common.view.BaseMultiPage",alias:"widget.basmaterial",controller:"basmaterial",viewModel:{type:"basmaterial"},isAutoLoad:false,customLayout1:true,initComponent:function(){var c=this;Ext.apply(c,{searchItems:[{xtype:"textfield",fieldLabel:"物料ID",name:"materialNo"},{xtype:"textfield",fieldLabel:"物料编码",name:"materialCode"},{xtype:"textfield",fieldLabel:"国际条码",name:"barcodeEan"},{xtype:"textfield",fieldLabel:"物料名称",name:"materialName"}],gridColumns:[{dataIndex:"materialNo",text:"物料ID"},{dataIndex:"materialCode",text:"物料编码"},{dataIndex:"barcodeEan",text:"国际条码",hidden:true},{dataIndex:"materialName",text:"物料名称"},{dataIndex:"specifications",text:"规格型号",hidden:true},{dataIndex:"oldCode",text:"旧物料编码",hidden:true},{dataIndex:"inventoryCategory",reference:"inventoryCategory",text:"存货类别",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=inventory_category",displaymember:"itemName",valuemember:"itemCode",hidden:true},{dataIndex:"sizeTypeNo",text:"码组",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_size_type/listAll.json",displaymember:"sizeTypeName",valuemember:"sizeTypeNo",readOnly:true},{dataIndex:"parentCategoryNo",text:"大类",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bill_material_dtl/getParentCategory.json?type=NO",displaymember:"categoryName",valuemember:"categoryNo",readOnly:true},{dataIndex:"categoryNo",text:"小类",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bill_material_dtl/getCategory.json?type=NO",displaymember:"categoryName",valuemember:"categoryNo",readOnly:true},{dataIndex:"materialSource",text:"物料属性",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=material_source",displaymember:"itemName",valuemember:"itemCode",readOnly:true},{dataIndex:"taxRateNo",text:"税率编号",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_tax_rate/listAll.json",displaymember:"taxRateName",valuemember:"taxRateNo",hidden:true},{dataIndex:"taxCategory",text:"税种",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_tax_category/listAll.json",displaymember:"taxCategoryName",valuemember:"taxCategoryNo",hidden:true},{dataIndex:"allowSale",text:"允许销售",xtype:"bllookupedit",displayvalue:"0=否:1=是",hidden:true},{dataIndex:"allowDelegate",text:"允许委外",xtype:"bllookupedit",displayvalue:"0=否:1=是",hidden:true},{dataIndex:"allowPurchase",text:"允许采购",xtype:"bllookupedit",displayvalue:"0=否:1=是",hidden:true},{dataIndex:"allowProduce",text:"允许生产",xtype:"bllookupedit",displayvalue:"0=否:1=是",hidden:true},{dataIndex:"materialStatus",text:"物料状态",xtype:"bllookupedit",displayvalue:"0=模板:1=释放",hidden:true},{dataIndex:"enableFlag",text:"启用状态",xtype:"bllookupedit",displayvalue:"0=禁用:1=启用",hidden:true},{dataIndex:"codeRuleNo",text:"编码规则",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_bill_type/listAll.json",displaymember:"billTypeName",valuemember:"billTypeNo",editor:{allowBlank:false},hidden:true},{dataIndex:"advicePrice",text:"参考单价",hidden:true},{dataIndex:"currencyNo",text:"币别编号",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_currency/listAll.json",displaymember:"currencyName",valuemember:"currencyNo",hidden:true},{dataIndex:"seasonNo",text:"年季",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=season_no",displaymember:"itemName",valuemember:"itemCode",hidden:true},{dataIndex:"modelNo",text:"型体",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_model/listAll.json",displaymember:"modelName",valuemember:"modelNo",editor:{allowBlank:false},hidden:true},{dataIndex:"styleNo",text:"款号",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_style/listAll.json",displaymember:"styleName",valuemember:"styleNo",editor:{allowBlank:false},hidden:true},{dataIndex:"productCode",text:"客户产品货号",hidden:true},{dataIndex:"manufacturer",text:"制造商",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=manufacturer",displaymember:"itemName",valuemember:"itemCode",hidden:true},{dataIndex:"normalUnit",text:"基本单位",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",readOnly:true},{dataIndex:"materialType",text:"物料类型",readOnly:true,xtype:"bllookupedit",displayvalue:"1=原料:2=半成品:3=成品"},{dataIndex:"ifQc",text:"是否质检",readOnly:true,xtype:"bllookupedit",displayvalue:"0=否:1=是"},{dataIndex:"supplyCategoryNo",text:"供货类别",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_supply_category/listAll.json",displaymember:"categoryName",valuemember:"categoryNo",editor:{allowBlank:true},hidden:true},{dataIndex:"brandNo",text:"品牌",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandEname",valuemember:"brandNo",readOnly:true},{dataIndex:"specialCode",text:"特征码",readOnly:true},{dataIndex:"developmentTimes",text:"开发次数",hidden:true},{dataIndex:"lining",text:"里料",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=lining",displaymember:"itemName",valuemember:"itemCode",editor:{allowBlank:true},hidden:true},{dataIndex:"insoles",text:"衬里/内垫",editor:{allowBlank:true},hidden:true},{dataIndex:"outerBottom",text:"外底",hidden:true},{dataIndex:"style",text:"风格",hidden:true},{dataIndex:"salesChannels",text:"销售渠道",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=sales_channels",displaymember:"itemName",valuemember:"itemCode",hidden:true},{dataIndex:"vampMaterial",text:"帮面材料",hidden:true},{dataIndex:"colorNo",text:"颜色",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_color/listAll.json",displaymember:"colorName",valuemember:"colorCode",readOnly:true},{dataIndex:"genderType",text:"男/女鞋",xtype:"bllookupedit",displayvalue:"F=女:M=男",hidden:true},{dataIndex:"series",text:"系列",hidden:true},{dataIndex:"joinOrderMetting",text:"是否参加订货会",xtype:"bllookupedit",displayvalue:"0=否:1=是",hidden:true},{dataIndex:"textures",text:"材质类别",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=textures",displaymember:"itemName",valuemember:"itemCode",hidden:true},{dataIndex:"purchaseUnit",text:"采购单位",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",editor:{allowBlank:true},hidden:true},{dataIndex:"purchaseGroup",text:"采购组",editor:{allowBlank:true},hidden:true},{dataIndex:"orderNo",text:"排列序号",hidden:true}],gridModel:"Hc_mdm.model.BasMaterial",gridPrimaryKey:"materialNo",gridSubGrid:["grid2"],gridSupGrid:"",gridLoadUrl:Hc.mdmPath+"bas_material/list.json",gridExportUrl:Hc.mdmPath+"bas_material/do_export.json",grid2Columns:[{dataIndex:"materialNo",text:"物料ID"},{dataIndex:"orderNo",text:"排列序号"},{dataIndex:"sizeNo",text:"尺码编号"}],grid2SubGrid:[],grid2SupGrid:"mastergrid",grid2Model:"Hc_mdm.model.BasMaterialSize",grid2PrimaryKey:"",grid2LoadUrl:Hc.mdmPath+"bas_material_size/list.json",grid2ExportUrl:Hc.mdmPath+"bas_material_size/do_export.json"});var e={title:"基本资料",xtype:"container",reference:"editBasInfo",layout:{type:"table",columns:4},defaults:{labelAlign:"right",labelWidth:80,width:"100%"},items:[{xtype:"textfield",reference:"materialNo",fieldLabel:"物料ID",bind:{value:"{gridRow.materialNo}"},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入20位字母或数字",maxLength:20,enforceMaxLength:true},{xtype:"textfield",reference:"materialCode",fieldLabel:"物料编码",bind:{value:"{gridRow.materialCode}"},allowBlank:true,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入30位字母或数字",maxLength:30,enforceMaxLength:true},{xtype:"textfield",reference:"materialName",fieldLabel:"物料名称",bind:{value:"{gridRow.materialName}"},allowBlank:true,maxLength:60,enforceMaxLength:true},{xtype:"extcombox",reference:"sizeTypeNo",fieldLabel:"码组",displayvalue:Hc.mdmPath+"bas_size_type/listAll.json",displaymember:"sizeTypeName",valuemember:"sizeTypeNo",bind:{value:"{gridRow.sizeTypeNo}"}},{xtype:"extcombox",reference:"parentCategoryNo",fieldLabel:"大类",displayvalue:Hc.mdmPath+"bill_material_dtl/getParentCategory.json?type=NO",displaymember:"categoryName",valuemember:"categoryNo",bind:{value:"{gridRow.parentCategoryNo}"},allowBlank:true},{xtype:"extcombox",reference:"categoryNo",fieldLabel:"小类",displayvalue:Hc.mdmPath+"bill_material_dtl/getCategory.json?type=NO",displaymember:"categoryName",valuemember:"categoryNo",bind:{value:"{gridRow.categoryNo}"},allowBlank:true},{xtype:"extcombox",reference:"normalUnit",fieldLabel:"基本单位",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",bind:{value:"{gridRow.normalUnit}"}},{xtype:"extcombox",reference:"materialType",fieldLabel:"物料类型",displayvalue:"1=原料:2=半成品:3=成品",bind:{value:"{gridRow.materialType}"}},{xtype:"extcombox",reference:"materialSource",fieldLabel:"物料属性",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=material_source",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.materialSource}"}},{xtype:"numberfield",reference:"advicePrice",fieldLabel:"参考单价",bind:{value:"{gridRow.advicePrice}"}},{xtype:"textfield",reference:"specifications",fieldLabel:"规格型号",bind:{value:"{gridRow.specifications}"}},{xtype:"extcombox",reference:"taxRateNo",fieldLabel:"税率",displayvalue:Hc.mdmPath+"bas_tax_rate/listAll.json",displaymember:"taxRateName",valuemember:"taxRateNo",bind:{value:"{gridRow.taxRateNo}"}},{xtype:"textfield",reference:"oldCode",fieldLabel:"旧物料编码",bind:{value:"{gridRow.oldCode}"},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入30位字母或数字",maxLength:30,enforceMaxLength:true},{xtype:"textfield",reference:"barcodeEan",fieldLabel:"国际条码",bind:{value:"{gridRow.barcodeEan}"},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入20位字母或数字",maxLength:20,enforceMaxLength:true},{xtype:"extcombox",reference:"currencyNo",fieldLabel:"币别",displayvalue:Hc.mdmPath+"bas_currency/listAll.json",displaymember:"currencyName",valuemember:"currencyNo",bind:{value:"{gridRow.currencyNo}"}},{xtype:"extcombox",reference:"ifQc",fieldLabel:"是否质检",displayvalue:"0=否:1=是",bind:{value:"{gridRow.ifQc}"}},{xtype:"textfield",reference:"remarks",fieldLabel:"备注",bind:{value:"{gridRow.remarks}"},colspan:4},{xtype:"extcombox",reference:"inventoryCategory",fieldLabel:"存货类别",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=inventory_category",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.inventoryCategory}"},hidden:true},{xtype:"extcombox",reference:"taxCategory",fieldLabel:"税种",displayvalue:Hc.mdmPath+"bas_tax_category/listAll.json",displaymember:"taxCategoryName",valuemember:"taxCategoryNo",bind:{value:"{gridRow.taxCategory}"},hidden:true},{name:"allowSale",bind:{value:"{gridRow.allowSale}"},reference:"allowSale",xtype:"extcombox",fieldLabel:"允许销售",displayvalue:"0=否:1=是",allowBlank:false,hidden:true},{name:"allowDelegate",bind:{value:"{gridRow.allowDelegate}"},reference:"allowDelegate",xtype:"extcombox",fieldLabel:"允许委外",displayvalue:"0=否:1=是",allowBlank:false,hidden:true},{name:"allowPurchase",bind:{value:"{gridRow.allowPurchase}"},reference:"allowPurchase",xtype:"extcombox",fieldLabel:"允许采购",displayvalue:"0=否:1=是",allowBlank:false,hidden:true},{name:"allowProduce",bind:{value:"{gridRow.allowProduce}"},reference:"allowProduce",xtype:"extcombox",fieldLabel:"允许生产",displayvalue:"0=否:1=是",allowBlank:false,hidden:true},{name:"enableFlag",bind:{value:"{gridRow.enableFlag}"},reference:"enableFlag",xtype:"extcombox",fieldLabel:"启用状态",displayvalue:"0=否:1=是",allowBlank:false,hidden:true},{xtype:"textfield",reference:"productCode",fieldLabel:"客户产品货号",bind:{value:"{gridRow.productCode}"},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入20位字母或数字",maxLength:20,enforceMaxLength:true,hidden:true},{name:"joinOrderMetting",bind:{value:"{gridRow.joinOrderMetting}"},reference:"joinOrderMetting",xtype:"extcombox",fieldLabel:"是否参加订货会",displayvalue:"0=否:1=是",hidden:true},{xtype:"textfield",reference:"orderNo",fieldLabel:"排列序号",bind:{value:"{gridRow.orderNo}"},maxLength:11,enforceMaxLength:true,hidden:true}]};e.layout.columns=4;var a={title:"原料属性",xtype:"container",reference:"editMatInfo1",layout:{type:"table",columns:4},defaults:{labelAlign:"right",labelWidth:80,width:"100%"},items:[{xtype:"extcombox",reference:"purchaseUnit",fieldLabel:"采购单位",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",bind:{value:"{gridRow.purchaseUnit}"}},{xtype:"extcombox",reference:"supplyCategoryNo",fieldLabel:"供货类别",displayvalue:Hc.mdmPath+"bas_supply_category/listAll.json",displaymember:"categoryName",valuemember:"categoryNo",bind:{value:"{gridRow.supplyCategoryNo}"}},{xtype:"textfield",reference:"purchaseGroup",fieldLabel:"采购组",bind:{value:"{gridRow.purchaseGroup}"}}]};a.layout.columns=4;var b={title:"成品半成品属性",xtype:"container",reference:"editMaterialInfo1",layout:{type:"table",columns:4},defaults:{labelAlign:"right",labelWidth:80,width:"100%"},items:[{xtype:"extcombox",reference:"brandNo",fieldLabel:"品牌",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandEname",valuemember:"brandNo",bind:{value:"{gridRow.brandNo}"}},{xtype:"textfield",reference:"specialCode",fieldLabel:"特征码",bind:{value:"{gridRow.specialCode}"},hidden:false},{xtype:"extcombox",reference:"colorNo",fieldLabel:"颜色",displayvalue:Hc.mdmPath+"bas_color/listAll.json",displaymember:"colorName",valuemember:"colorCode",bind:{value:"{gridRow.colorNo}"}},{xtype:"extcombox",reference:"seasonNo",fieldLabel:"年季",minChars:1,displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=season_no",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.seasonNo}"}},{xtype:"extcombox",reference:"modelNo",fieldLabel:"型体",displayvalue:Hc.mdmPath+"bas_model/listAll.json",displaymember:"modelName",valuemember:"modelNo",bind:{value:"{gridRow.modelNo}"}},{xtype:"extcombox",reference:"styleNo",fieldLabel:"款号",displayvalue:Hc.mdmPath+"bas_style/listAll.json",displaymember:"styleName",valuemember:"styleNo",bind:{value:"{gridRow.styleNo}"}},{xtype:"extcombox",reference:"lining",fieldLabel:"里料",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=lining",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.lining}"}},{xtype:"extcombox",reference:"manufacturer",fieldLabel:"制造商",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=manufacturer",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.manufacturer}"}},{xtype:"extcombox",reference:"genderType",fieldLabel:"男/女鞋",bind:{value:"{gridRow.genderType}"},displayvalue:"F=女:M=男",allowBlank:true},{xtype:"textfield",reference:"style",fieldLabel:"风格",bind:{value:"{gridRow.style}"}},{xtype:"textfield",reference:"series",fieldLabel:"系列",bind:{value:"{gridRow.series}"}},{xtype:"textfield",reference:"vampMaterial",fieldLabel:"帮面材料",bind:{value:"{gridRow.vampMaterial}"}},{xtype:"textfield",reference:"insoles",fieldLabel:"衬里/内垫",bind:{value:"{gridRow.insoles}"}},{xtype:"textfield",reference:"outerBottom",fieldLabel:"外底",bind:{value:"{gridRow.outerBottom}"}},{xtype:"extcombox",reference:"textures",fieldLabel:"材质类别",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=textures",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.textures}"}},{xtype:"extcombox",reference:"salesChannels",fieldLabel:"销售类型",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=sales_channels",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.salesChannels}"}},{xtype:"numberfield",reference:"developmentTimes",fieldLabel:"开发次数",bind:{value:"{gridRow.developmentTimes}"},allowBlank:true}]};b.layout.columns=4;var d={xtype:"tabpanel",reference:"tabpanel",region:"south",height:200,layout:{type:"table",columns:4,align:"center"},split:true,autoDestroy:true,tabPosition:"top",border:false,defaults:{labelAlign:"right",labelWidth:80,width:"100%"},items:[{layout:"fit",index:0,border:0,bodyPadding:3,items:[e],title:"基本资料"},{layout:"fit",index:1,border:0,bodyPadding:3,items:[a],title:"原料属性"},{layout:"fit",index:2,border:0,bodyPadding:3,items:[b],title:"成品半成品属性"},{layout:"fit",index:3,border:0,bodyPadding:3,items:[c.grid2],title:"尺码明细"}]};c.items=[c.toolbar];if(c.searchItems.length>0){c.items.push(c.searchPanel)}c.items.push(c.grid);c.items.push(d);c.items=c.items.concat(c.otherItems);c.callParent()}});
Ext.define("Hc_mdm.view.basmaterial.BasMaterialController",{extend:"Hc_Common.view.BaseMultiPageController",alias:"controller.basmaterial",init:function(){var a=this;a.callParent();delete a.lookupReference("grid2").title;var b=this.lookupReference("tabpanel").query("textfield,numberfield,datefield,combo");Ext.each(b,function(c){a.setComponentReadOnly(c,true)})},setComponentReadOnly:function(a,b){a.setReadOnly(b)},initToolbar:function(a){var b=this;b.callParent(arguments);if(a.btnAdd){a.btnAdd.setVisible(false)}if(a.btnPrint){a.btnPrint.setVisible(false)}if(a.btnExport){a.btnExport.setVisible(false)}if(a.btnDelete){a.btnDelete.setVisible(false)}if(a.btnUndo){a.btnUndo.setVisible(false)}if(a.btnCancel){a.btnCancel.setVisible(false)}if(a.btnSave){a.btnSave.setVisible(false)}}});
Ext.define("Hc_mdm.view.basmaterial.BasMaterialModel",{extend:"Hc_Common.view.BaseMultiPageModel",alias:"viewmodel.basmaterial"});
Ext.define("Hc_mdm.view.basmaterialunitswitch.BasMaterialUnitSwitch",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basmaterialunitswitch",controller:"basmaterialunitswitch",viewModel:{type:"basmaterialunitswitch"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"物料编号",name:"materialNo"}],gridModel:"Hc_mdm.model.BasMaterialUnitSwitch",gridColumns:[{dataIndex:"switchId",text:"转换编号",editor:{allowBlank:false,xtype:"numberfield",maxLength:11,enforceMaxLength:true},hidden:false},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"materialNo",text:"物料编号",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"unitNoA",text:"a单位编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true}},{dataIndex:"unitNoB",text:"b单位编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true}},{dataIndex:"qtyA",text:"a单位数量",editor:{allowBlank:false,xtype:"numberfield",maxLength:12,enforceMaxLength:true}},{dataIndex:"qtyB",text:"b单位数量",editor:{allowBlank:false,xtype:"numberfield",maxLength:12,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false,xtype:"comboyesno"},renderer:"renderYesNo"},],gridPrimaryKey:"switchId",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_material_unit_switch/list.json?",gridSaveUrl:Hc.mdmPath+"bas_material_unit_switch/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_material_unit_switch/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basmaterialunitswitch.BasMaterialUnitSwitchController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basmaterialunitswitch",initAddData:function(a){if(this.callParent(arguments)===false){return false}}});
Ext.define("Hc_mdm.view.basmaterialunitswitch.BasMaterialUnitSwitchModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basmaterialunitswitch"});
Ext.define("Hc_mdm.view.basorganizationview.BasOrganizationView",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basorganizationview",controller:"basorganizationview",viewModel:{type:"basorganizationview"},initComponent:function(){var a=this;Ext.apply(a,{gridModel:"Hc_mdm.model.BasOrganizationGrid",gridColumns:[{dataIndex:"orgNo",text:"编号"},{dataIndex:"orgName",text:"名称"},{dataIndex:"divisionNo",text:"事业部",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_division/list.json",displaymember:"divisionName",valuemember:"divisionNo"},{dataIndex:"factoryNo",text:"厂区",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_factory/list.json",displaymember:"factoryName",valuemember:"factoryNo"},{dataIndex:"orderNo",text:"排列序号"},{dataIndex:"enableFlag",text:"启用状态",xtype:"gridcombouseflag"}],gridPrimaryKey:"orgNo",gridLoadUrl:Hc.mdmPath+"bas_org_view/list.json",gridExportUrl:Hc.mdmPath+"bas_org_view/do_export.json",gridImportUrl:"",searchColumn:0,gridEditModel:"cell",gridReadOnly:true,gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.otherItems=[{xtype:"panel",region:"north",width:300,height:78,border:true,title:"组织视图",header:{height:20,padding:0},layout:{type:"table",columns:4,align:"center"},defaults:{labelAlign:"right",labelWidth:80,padding:15,width:200},items:[{xtype:"combo",reference:"viewTypeCombo",editable:false,emptyText:"请选择",triggerAction:"all",fieldLabel:"视图类型",name:"viewType",queryMode:"local",store:[[1,"事业部"],[2,"厂区"],[3,"事业部=》厂区"],[4,"厂区=》事业部"]],renderer:function(b){return b},listeners:{select:"onChangeviewType",afterrender:function(b){b.setValue("1");b.setRawValue("事业部")}}},{xtype:"combo",reference:"showDataCombo",editable:false,emptyText:"请选择",triggerAction:"all",fieldLabel:"展示数据",name:"showData",queryMode:"local",store:[[1,"全部"],[2,"车间"],[3,"仓库"]],renderer:function(b){return b},listeners:{select:"onChangeshowData",afterrender:function(b){b.setValue("1");b.setRawValue("全部")}}}]},{xtype:"treepanel",region:"west",split:true,reference:"oviewtree",itemId:"oviewtree",width:300,rootVisible:false,lines:true,columns:[{xtype:"treecolumn",flex:1,dataIndex:"text",text:"百丽集团",sortable:false,hideable:false}],store:{type:"treebase",proxy:{type:"ajax",url:Hc.mdmPath+"bas_org_view/getOrgViewTree.json",reader:{type:"json",rootProperty:"children",totalProperty:"totalCount"},extraParams:{Type1:1}},root:{id:0,text:"root",expanded:true}},listeners:{selectionchange:"onTreeSelectionChange"}}];a.callParent()}});
Ext.define("Hc_mdm.view.basorganizationview.BasOrganizationViewController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basorganizationview",init:function(){var b=this,a=b.getObjList();if(!a){return}if(!b.workObject&&a.mastergrid){b.workObject=a.mastergrid}b.callParent(arguments);a.btnSearch.setVisible(false);a.btnAdd.setVisible(false);a.btnDelete.setVisible(false);a.btnReset.setVisible(false);a.btnCopy.setVisible(false);a.btnEdit.setVisible(false);a.btnSave.setVisible(false);a.btnUndo.setVisible(false);a.btnCancel.setVisible(false);a.btnExport.setVisible(false);b.lookupReference("commontoolsp1").hidden=true;b.lookupReference("commontoolsp2").hidden=true;b.lookupReference("commontoolsp3").hidden=true;b.lookupReference("commontoolsp4").hidden=true;b.lookupReference("commontoolsp5").hidden=true},onTreeSelectionChange:function(f,a){var b=this,d=b.getObjList();if(!d){return}selLength=f.selected.items.length;if(selLength==1){var e=f.selected.items[0].data.id;var c=f.selected.items[0].data.others.Type3;b.reloadDataGrid(e,c)}else{}if(this.canPrint()&&d.btnPrint){d.btnPrint.setDisabled(a.length===0)}},onChangeviewType:function(c,b,a){this.reloadMenuTree(true)},onChangeshowData:function(c,b,a){this.reloadDataGrid()},reloadMenuTree:function(d){var e=this;var f=e.getObjList();var b=this.lookupReference("viewTypeCombo").getValue();var a=this.lookupReference("oviewtree");if(d){a.store.proxy.extraParams.Type1=b;a.store.load();var c=f.mastergrid.store;c.removeAll()}else{a.store.reload()}},reloadDataGrid:function(e,f){var c=this;objs=c.getObjList();if(!objs){return}store=objs.mastergrid.store;var b=c.lookupReference("showDataCombo").getValue();var a=c.lookupReference("viewTypeCombo").getValue();if(e){if(f!=3){store.proxy.extraParams.Type1=a;store.proxy.extraParams.Type2=b;store.proxy.extraParams.Type3=f;store.proxy.extraParams.orgNo=e;store.reload()}}else{var d=objs.oviewtree.getSelectionModel().getSelection();if(d.length<1){Ext.Msg.alert("提示","请选择一个树节点")}else{var g=objs.oviewtree.getSelectionModel().selected.items[0].data.id;var f=objs.oviewtree.getSelectionModel().selected.items[0].data.others.Type3;if(f!=3){store.proxy.extraParams.Type1=a;store.proxy.extraParams.Type2=b;store.proxy.extraParams.Type3=f;store.proxy.extraParams.orgNo=g;store.reload()}}}}});
Ext.define("Hc_mdm.view.basorganizationview.BasOrganizationViewModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basorganizationview"});
Ext.define("Hc_mdm.view.baspaymentclausefk.BasPaymentClauseFK",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.baspaymentclausefk",controller:"baspaymentclausefk",viewModel:{type:"baspaymentclausefk"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"付款条件编号",name:"paymentClauseNo"},{xtype:"textfield",fieldLabel:"付款条件名称",name:"paymentClauseName"}],gridModel:"Hc_mdm.model.BasPaymentClauseFK",gridColumns:[{dataIndex:"paymentClauseNo",text:"付款条件编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字"}},{dataIndex:"paymentClauseName",text:"付款条件名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{xtype:"gridcolumn",dataIndex:"paymentClauseType",text:"收款条件类型",hidden:true,hideable:false,editor:{allowBlank:false}},{dataIndex:"creditDays",text:"信用天数",editor:{allowBlank:false,maxLength:11,enforceMaxLength:true}},{dataIndex:"preferentialDays",text:"优惠天数",editor:{allowBlank:false,maxLength:11,enforceMaxLength:true}},{dataIndex:"dueDateMethod",text:"到期日计算方式",editor:{allowBlank:true,maxLength:20,enforceMaxLength:true},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=due_date_method",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"preferentialRate",text:"优惠率/金额",editor:{allowBlank:true,maxLength:10,enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"preferentialWay",text:"优惠方式",editor:{allowBlank:true,maxLength:20,enforceMaxLength:true},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=preferential_way",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"enableFlag",text:"启用状态",editor:{xtype:"comboyesno",maxLength:11,enforceMaxLength:true,allowBlank:false},renderer:"renderYesNo"}],gridPrimaryKey:"paymentClauseNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_payment_clause/list.json?paymentClauseType=1",gridSaveUrl:Hc.mdmPath+"bas_payment_clause/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_payment_clause/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.baspaymentclausefk.BasPaymentClauseFKController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.baspaymentclausefk",onGridAfterEdit:function(c,f){var d=this;if(f.field=="preferentialDays"){var a=f.record;var g=a.get("preferentialDays");var b=a.get("creditDays");if(g>b){Ext.MessageBox.alert("提示","优惠天数不能大于信用天数");a.set("preferentialDays","");return}else{return}}}});
Ext.define("Hc_mdm.view.baspaymentclausefk.BasPaymentClauseFKModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.baspaymentclausefk"});
Ext.define("Hc_mdm.view.baspaymentclausesk.BasPaymentClauseSK",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.baspaymentclausesk",controller:"baspaymentclausesk",viewModel:{type:"baspaymentclausesk"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"收款条件编号",name:"paymentClauseNo"},{xtype:"textfield",fieldLabel:"收款条件名称",name:"paymentClauseName"}],gridModel:"Hc_mdm.model.BasPaymentClauseSK",gridColumns:[{dataIndex:"paymentClauseNo",text:"收款条件编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字"}},{dataIndex:"paymentClauseName",text:"收款条件名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{xtype:"gridcolumn",dataIndex:"paymentClauseType",text:"收款条件类型",hidden:true,hideable:false,editor:{allowBlank:false}},{dataIndex:"creditDays",text:"信用天数",editor:{allowBlank:false,maxLength:11,enforceMaxLength:true}},{dataIndex:"preferentialDays",text:"优惠天数",editor:{allowBlank:false,maxLength:11,enforceMaxLength:true}},{dataIndex:"dueDateMethod",text:"到期日计算方式",editor:{allowBlank:true,maxLength:20,enforceMaxLength:true},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=due_date_method",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"preferentialRate",text:"优惠率/金额",editor:{allowBlank:true,maxLength:10,enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"preferentialWay",text:"优惠方式",editor:{allowBlank:true,maxLength:20,enforceMaxLength:true},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=preferential_way",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"enableFlag",text:"启用状态",editor:{xtype:"comboyesno",maxLength:11,enforceMaxLength:true,allowBlank:false},renderer:"renderYesNo"}],gridPrimaryKey:"paymentClauseNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_payment_clause/list.json?paymentClauseType=2",gridSaveUrl:Hc.mdmPath+"bas_payment_clause/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_payment_clause/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.baspaymentclausesk.BasPaymentClauseSKController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.baspaymentclausesk",onGridAfterEdit:function(c,f){var d=this;if(f.field=="preferentialDays"){var a=f.record;var g=a.get("preferentialDays");var b=a.get("creditDays");if(g>b){Ext.MessageBox.alert("提示","优惠天数不能大于信用天数");a.set("preferentialDays","");return}else{return}}}});
Ext.define("Hc_mdm.view.baspaymentclausesk.BasPaymentClauseSKModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.baspaymentclausesk"});
Ext.define("Hc_mdm.view.baspaymentmethod.BasPaymentMethod",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.baspaymentmethod",controller:"baspaymentmethod",viewModel:{type:"baspaymentmethod"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"结算方式编号",name:"paymentMethodNo"},{xtype:"textfield",fieldLabel:"结算方式名称",name:"paymentMethodName"}],gridModel:"Hc_mdm.model.BasPaymentMethod",gridColumns:[{dataIndex:"paymentMethodNo",text:"结算方式编号",editor:{allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入10位字母或数字",maxLength:10,enforceMaxLength:true}},{dataIndex:"paymentMethodName",text:"结算方式名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{xtype:"comboyesno",allowBlank:false},renderer:"renderYesNo"}],gridPrimaryKey:"paymentMethodNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_payment_method/list.json",gridSaveUrl:Hc.mdmPath+"bas_payment_method/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_payment_method/do_export.json",gridImportUrl:Hc.mdmPath+"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.baspaymentmethod.BasPaymentMethodController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.baspaymentmethod"});
Ext.define("Hc_mdm.view.baspaymentmethod.BasPaymentMethodModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.baspaymentmethod",});
Ext.define("Hc_mdm.view.basprovince.BasProvince",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basprovince",controller:"basprovince",viewModel:{type:"basprovince"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"行政省编号",name:"provinceNo"},{xtype:"textfield",fieldLabel:"行政省名称",name:"provinceName"},{xtype:"textfield",fieldLabel:"行政省特征码",name:"provinceOpcode"}],gridModel:"Hc_mdm.model.BasProvince",gridColumns:[{dataIndex:"provinceNo",text:"行政省编号",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"provinceName",text:"行政省名称",editor:{allowBlank:false,maxLength:15,enforceMaxLength:true}},{dataIndex:"provinceLname",text:"行政省详细名称",editor:{allowBlank:false,maxLength:30,enforceMaxLength:true}},{dataIndex:"provinceOpcode",text:"行政省特征码",editor:{allowBlank:false,maxLength:2,enforceMaxLength:true}},{dataIndex:"countryNo",text:"国家编号",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_country/list.json",displaymember:"countryName",valuemember:"countryNo"},{dataIndex:"directControlled",text:"是否直辖市",editor:{xtype:"comboyesno",maxLength:11,enforceMaxLength:true},renderer:"renderYesNo"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false,xtype:"combouseflag",maxLength:11,enforceMaxLength:true},renderer:"renderUseFlag"}],gridPrimaryKey:"provinceNo",gridUnionKey:"provinceName",gridLoadUrl:Hc.mdmPath+"bas_province/list.json",gridSaveUrl:Hc.mdmPath+"bas_province/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_province/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basprovince.BasProvinceController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basprovince",onBtnCopyClick:function(e){var g=this,d=g.workObject,b=g.workObject.store,c=g.workObject.primaryKey,f=g.workObject.getSelection(),a;if(f.length<1){return}if(!d.isCanAdd||d.isReadOnly){Hc.alert("此网格不允许新增数据");return}if(d.isMaster&&this.editingList.length>0){Hc.alert("您有一笔数据正在处理，不能复制主表记录");return}Ext.Array.each(f,function(h){a=Ext.create(b.model);Ext.apply(a.data,h.data);a.set(c,"");a.set("_flag","A");a.set("provinceName","");b.add(a)})},});
Ext.define("Hc_mdm.view.basprovince.BasProvinceModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basprovince"});
Ext.define("Hc_mdm.view.baspurchasegroup.BasPurchaseGroup",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.baspurchasegroup",controller:"baspurchasegroup",viewModel:{type:"baspurchasegroup"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"采购组编号",name:"purchaseGroupNo"},{xtype:"textfield",fieldLabel:"采购组名",name:"purchaseGroupName"}],gridModel:"Hc_mdm.model.BasPurchaseGroup",gridColumns:[{dataIndex:"purchaseGroupNo",text:"采购组编号",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"purchaseGroupName",text:"采购组名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag",maxLength:30,enforceMaxLength:true}}],gridPrimaryKey:"purchaseGroupNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_purchase_group/list.json",gridSaveUrl:Hc.mdmPath+"bas_purchase_group/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_purchase_group/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.baspurchasegroup.BasPurchaseGroupController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.baspurchasegroup"});
Ext.define("Hc_mdm.view.baspurchasegroup.BasPurchaseGroupModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.baspurchasegroup"});
Ext.define("Hc_mdm.view.basregion.BasRegion",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basregion",controller:"basregion",viewModel:{type:"basregion"},initComponent:function(){var a=this;countryStore=Ext.create("Hc_Common.store.Base",{fields:["countryNo","countryName"],autoLoad:true,proxy:{url:Hc.mdmPath+"bas_country/listAll.json"}});Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"地区名称",name:"regionName"},{xtype:"combo",fieldLabel:"国家编号",name:"countryNo",editable:false,displayField:"countryName",valueField:"countryNo",store:countryStore,renderer:function(c){var b=countryStore.findExact("countryNo",c);return b>-1?countryStore.getAt(b).data.countryName:c}}],gridModel:"Hc_mdm.model.BasRegion",gridColumns:[{dataIndex:"regionNo",text:"地区编号",editor:{allowBlank:false}},{dataIndex:"regionName",text:"地区名称",editor:{allowBlank:false}},{dataIndex:"countryNo",text:"国家编号",editor:{allowBlank:false,xtype:"combo",editable:false,displayField:"countryName",valueField:"countryNo",store:countryStore},renderer:function(c){var b=countryStore.findExact("countryNo",c);return b>-1?countryStore.getAt(b).data.countryName:c}},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",allowBlank:true}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag"}}],gridPrimaryKey:"regionNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_region/list.json",gridSaveUrl:Hc.mdmPath+"bas_region/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_region/do_export.json",gridImportUrl:Hc.mdmPath+"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basregion.BasRegionController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basregion"});
Ext.define("Hc_mdm.view.basregion.BasRegionModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basregion"});
Ext.define("Hc_mdm.view.bassizetype.BasSizeType",{extend:"Hc_Common.view.BaseMultiPage",alias:"widget.bassizetype",controller:"bassizetype",viewModel:{type:"bassizetype"},isAutoLoad:false,searchItems:[{xtype:"textfield",fieldLabel:"尺码类别编号",name:"sizeTypeNo",maxLength:20,enforceMaxLength:true},{xtype:"textfield",fieldLabel:"尺码类别名称",name:"sizeTypeName",maxLength:30,enforceMaxLength:true}],gridColumns:[{dataIndex:"sizeTypeNo",text:"尺码类别编号",editor:{allowBlank:false,maxLength:20,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"sizeTypeName",text:"尺码类别名称",editor:{allowBlank:false,maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:"0=禁用:1=启用"}],gridModel:"Hc_mdm.model.BasSizeType",gridPrimaryKey:"sizeTypeNo",gridSubGrid:["grid1"],gridSupGrid:"",gridLoadUrl:Hc.mdmPath+"bas_size_type/list.json",gridSaveUrl:Hc.mdmPath+"bas_size_type/saveMasterCustomerList.json",gridExportUrl:Hc.mdmPath+"bas_size_type/do_export.json",gridImportUrl:"",grid1Columns:[{dataIndex:"sizeNo",text:"尺码编号",editor:{allowBlank:false,maxLength:20,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"sizeName",text:"尺码名称",editor:{allowBlank:false,maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag"}}],grid1HasMark:true,grid1HasCreator:true,grid1HasModifier:true,grid1Model:"Hc_mdm.model.BasSize",grid1PrimaryKey:"sizeId",grid1UnionKey:"sizeNo,sizeTypeNo",grid1SubGrid:[],grid1SupGrid:"mastergrid",grid1LoadUrl:Hc.mdmPath+"bas_size/list.json",grid1ExportUrl:Hc.mdmPath+"bas_size/do_export.json",grid1ImportUrl:"",initComponent:function(){var a=this;a.callParent()}});
Ext.define("Hc_mdm.view.bassizetype.BasSizeTypeController",{extend:"Hc_Common.view.BaseMultiPageController",alias:"controller.bassizetype"});
Ext.define("Hc_mdm.view.bassizetype.BasSizeTypeModel",{extend:"Hc_Common.view.BaseMultiPageModel",alias:"viewmodel.bassizetype"});
Ext.define("Hc_mdm.view.basstore.BasStore",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basstore",controller:"basstore",viewModel:{type:"basstore"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"仓库编号",name:"storeNo"},{xtype:"textfield",fieldLabel:"仓库名称",name:"storeName"}],gridModel:"Hc_mdm.model.BasStore",gridColumns:[{dataIndex:"storeNo",text:"仓库编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true}},{dataIndex:"storeName",text:"仓库名称",editor:{allowBlank:false,maxLength:30,enforceMaxLength:true}},{dataIndex:"brandNo",text:"品牌",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_brand/list.json",displaymember:"brandCname",valuemember:"brandNo"},{dataIndex:"factoryNo",text:"厂区",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_factory/list.json",displaymember:"factoryName",valuemember:"factoryNo"},{dataIndex:"divisionNo",text:"事业部",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_division/list.json",displaymember:"divisionName",valuemember:"divisionNo"},{dataIndex:"storeType",text:"仓库类型",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=store_type",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"isMaster",text:"是否主仓",editor:{allowBlank:false,xtype:"comboyesno",maxLength:11,enforceMaxLength:true},renderer:"renderYesNo"},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false,xtype:"combouseflag",maxLength:11,enforceMaxLength:true},renderer:"renderUseFlag"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield",maxLength:11,enforceMaxLength:true}}],gridPrimaryKey:"storeNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_store/list.json",gridSaveUrl:Hc.mdmPath+"bas_store/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_store/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basstore.BasStoreController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basstore"});
Ext.define("Hc_mdm.view.basstore.BasStoreModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basstore"});
Ext.define("Hc_mdm.view.basstorecell.BasStoreCell",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basstorecell",controller:"basstorecell",viewModel:{type:"basstorecell"},initComponent:function(){var a=this;storeEStore=Ext.create("Hc_mdm.store.BasStore"),storeGStore=Ext.create("Hc_mdm.store.BasStore"),zoneEStore=Ext.create("Hc_mdm.store.BasStoreZone"),zoneGStore=Ext.create("Hc_mdm.store.BasStoreZone"),roomEStore=Ext.create("Hc_mdm.store.BasStoreRoom"),roomGStore=Ext.create("Hc_mdm.store.BasStoreRoom"),channelEStore=Ext.create("Hc_mdm.store.BasStoreChannel"),channelGStore=Ext.create("Hc_mdm.store.BasStoreChannel"),Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"储位编号",name:"cellNo"},{xtype:"textfield",fieldLabel:"储位名称",name:"cellName"},{xtype:"textfield",fieldLabel:"通道编号",name:"channelNo"},{xtype:"textfield",fieldLabel:"通道名称",name:"channelName"}],gridModel:"Hc_mdm.model.BasStoreCell",gridColumns:[{dataIndex:"cellNo",text:"储位编号",editor:{allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入10位字母或数字",maxLength:10,enforceMaxLength:true}},{dataIndex:"cellCode",text:"储位编码",editor:{allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入5位字母或数字",maxLength:5,enforceMaxLength:true}},{dataIndex:"cellName",text:"储位名称",editor:{allowBlank:false},maxLength:30,enforceMaxLength:true},{dataIndex:"storeNo",text:"仓库",editor:{allowBlank:false},xtype:"bllookupedit",estore:storeEStore,gstore:storeGStore,displaymember:"storeName",valuemember:"storeNo"},{dataIndex:"zoneNo",text:"仓区",editor:{allowBlank:false},xtype:"bllookupedit",estore:zoneEStore,gstore:zoneGStore,displaymember:"zoneName",valuemember:"zoneNo"},{dataIndex:"roomNo",text:"库区",editor:{allowBlank:false},xtype:"bllookupedit",estore:roomEStore,gstore:roomGStore,displaymember:"roomName",valuemember:"roomNo"},{dataIndex:"channelNo",text:"通道编号",xtype:"bllookupedit",estore:channelEStore,gstore:channelGStore,displaymember:"channelNo",valuemember:"channelNo"},{dataIndex:"categoryNo",text:"物料大类",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_category/listCategory.json?type=1",displaymember:"categoryName",valuemember:"categoryNo"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:"0=禁用:1=启用"}],gridPrimaryKey:"lineId",gridUnionKey:"storeNo,cellNo",gridLoadUrl:Hc.mdmPath+"bas_store_cell/list.json",gridSaveUrl:Hc.mdmPath+"bas_store_cell/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_store_cell/do_export.json",gridImportUrl:Hc.mdmPath+"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basstorecell.BasStoreCellController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basstorecell",init:function(){var b=this,a=b.getObjList();b.callParent(arguments);b.workObject.on("edit","onGridAfterEdit",b)},onGridAfterEdit:function(b,d){if(d.field=="channelNo"){var a=d.record;var c=a.get("channelNo");var e=Ext.create("Hc_Common.store.Base",{fields:["channelNo","channelName"],proxy:{url:Hc.mdmPath+"bas_store_channel/list.json"}});e.proxy.extraParams.channelNo=c;e.reload();e.reload({scope:this,callback:function(g,f,h){if(g.length>0){d.record.set("channelName",g[0].data.channelName)}else{d.record.set("channelName","")}}})}},onGridBeforeEdit:function(h,j){var k=this;k.callParent(arguments);if(j.field=="zoneNo"){var i=j.record;var d=i.get("storeNo");var a=i.get("zoneNo");if(d==""){Ext.Msg.alert("提示","请先选择仓库");return false}else{var m=j.column.getEditor().store;oldstoreNo=m.proxy.extraParams.storeNo;if(d!=oldstoreNo){m.proxy.extraParams.storeNo=d;m.on("load",function(){j.column.getEditor().setValue(a)});m.load()}}}if(j.field=="roomNo"){var i=j.record;var l=i.get("storeNo");var f=i.get("zoneNo");var c=i.get("roomNo");if(f==""){Ext.Msg.alert("提示","请先选择仓区");return false}else{var m=j.column.getEditor().store;oldzoneNo=m.proxy.extraParams.zoneNo;if(f!=oldzoneNo){m.proxy.extraParams.storeNo=l;m.proxy.extraParams.zoneNo=f;m.on("load",function(){j.column.getEditor().setValue(c)});m.load()}}}if(j.field=="channelNo"){var i=j.record;var l=i.get("storeNo");var a=i.get("zoneNo");var g=i.get("roomNo");var b=i.get("channelNo");if(g==""){Ext.Msg.alert("提示","请先选择库区");return false}else{var m=j.column.getEditor().store;oldroomNo=m.proxy.extraParams.roomNo;if(g!=oldroomNo){m.proxy.extraParams.storeNo=l;m.proxy.extraParams.zoneNo=a;m.proxy.extraParams.roomNo=g;m.on("load",function(){j.column.getEditor().setValue(b)});m.load()}}}},onGridAfterEdit:function(i,j){var k=this;k.callParent(arguments);if(j.field=="storeNo"){var a=j.originalValue;var d=j.value;if(a!=d){var h=j.record;h.set("zoneNo","");h.set("roomNo","");h.set("channelNo","")}}if(j.field=="zoneNo"){var b=j.originalValue;var f=j.value;if(b!=f){var h=j.record;h.set("roomNo","");h.set("channelNo","")}}if(j.field=="roomNo"){var c=j.originalValue;var g=j.value;if(c!=g){var h=j.record;h.set("channelNo","")}}}});
Ext.define("Hc_mdm.view.basstorecell.BasStoreCellModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basstorecell",});
Ext.define("Hc_mdm.view.basstorechannel.BasStoreChannel",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basstorechannel",controller:"basstorechannel",viewModel:{type:"basstorechannel"},initComponent:function(){var a=this;storeEStore=Ext.create("Hc_mdm.store.BasStore"),storeGStore=Ext.create("Hc_mdm.store.BasStore"),zoneEStore=Ext.create("Hc_mdm.store.BasStoreZone"),zoneGStore=Ext.create("Hc_mdm.store.BasStoreZone"),roomEStore=Ext.create("Hc_mdm.store.BasStoreRoom"),roomGStore=Ext.create("Hc_mdm.store.BasStoreRoom"),Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"通道编号",name:"channelNo"},{xtype:"textfield",fieldLabel:"通道名称",name:"channelName"},{xtype:"textfield",fieldLabel:"库区编号",name:"roomNo"},{xtype:"textfield",fieldLabel:"库区名称",name:"roomName"}],gridModel:"Hc_mdm.model.BasStoreChannel",gridColumns:[{dataIndex:"channelNo",text:"通道编号",editor:{allowBlank:false},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入10位字母或数字",maxLength:10,enforceMaxLength:true},{dataIndex:"channelName",text:"通道名称",editor:{allowBlank:false},maxLength:30,enforceMaxLength:true},{dataIndex:"storeNo",text:"仓库",editor:{allowBlank:false},xtype:"bllookupedit",estore:storeEStore,gstore:storeGStore,displaymember:"storeName",valuemember:"storeNo"},{dataIndex:"zoneNo",text:"仓区",editor:{allowBlank:false},xtype:"bllookupedit",estore:zoneEStore,gstore:zoneGStore,displaymember:"zoneName",valuemember:"zoneNo"},{dataIndex:"roomNo",text:"库区编号",xtype:"bllookupedit",estore:roomEStore,gstore:roomGStore,displaymember:"roomNo",valuemember:"roomNo",editor:{allowBlank:false}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:"0=禁用:1=启用"}],gridPrimaryKey:"lineId",gridUnionKey:"storeNo,zoneNo,roomNo,channelNo",gridLoadUrl:Hc.mdmPath+"bas_store_channel/list.json",gridSaveUrl:Hc.mdmPath+"bas_store_channel/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_store_channel/do_export.json",gridImportUrl:Hc.mdmPath+"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basstorechannel.BasStoreChannelController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basstorechannel",init:function(){var b=this,a=b.getObjList();b.callParent(arguments);b.workObject.on("edit","onGridAfterEdit",b)},onGridAfterEdit:function(c,d){if(d.field=="roomNo"){var a=d.record;var b=a.get("roomNo");var e=Ext.create("Hc_Common.store.Base",{fields:["roomNo","roomName"],proxy:{url:Hc.mdmPath+"bas_store_room/list.json"}});e.proxy.extraParams.roomNo=b;e.reload();e.reload({scope:this,callback:function(g,f,h){if(g.length>0){d.record.set("roomName",g[0].data.roomName)}else{d.record.set("roomName","")}}})}},onGridBeforeEdit:function(f,h){var i=this;i.callParent(arguments);if(h.field=="zoneNo"){var g=h.record;var c=g.get("storeNo");var a=g.get("zoneNo");if(c==""){Ext.Msg.alert("提示","请先选择仓库");return false}else{var k=h.column.getEditor().store;oldstoreNo=k.proxy.extraParams.storeNo;if(c!=oldstoreNo){k.proxy.extraParams.storeNo=c;k.on("load",function(){h.column.getEditor().setValue(a)});k.load()}}}if(h.field=="roomNo"){var g=h.record;var j=g.get("storeNo");var d=g.get("zoneNo");var b=g.get("roomNo");if(d==""){Ext.Msg.alert("提示","请先选择仓区");return false}else{var k=h.column.getEditor().store;oldzoneNo2=k.proxy.extraParams.zoneNo;if(d!=oldzoneNo2){k.proxy.extraParams.storeNo=j;k.proxy.extraParams.zoneNo=d;k.on("load",function(){h.column.getEditor().setValue(b)});k.load()}}}},onGridAfterEdit:function(f,i){var g=this;g.callParent(arguments);if(i.field=="storeNo"){var c=i.originalValue;var h=i.value;if(c!=h){var b=i.record;b.set("zoneNo","");b.set("roomNo","")}}if(i.field=="zoneNo"){var a=i.originalValue;var d=i.value;if(a!=d){var b=i.record;b.set("roomNo","")}}}});
Ext.define("Hc_mdm.view.basstorechannel.BasStoreChannelModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basstorechannel",});
Ext.define("Hc_mdm.view.basstoreroom.BasStoreRoom",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basstoreroom",controller:"basstoreroom",viewModel:{type:"basstoreroom"},initComponent:function(){var a=this;storeEStore=Ext.create("Hc_mdm.store.BasStore"),storeGStore=Ext.create("Hc_mdm.store.BasStore"),zoneEStore=Ext.create("Hc_mdm.store.BasStoreZone"),zoneGStore=Ext.create("Hc_mdm.store.BasStoreZone"),Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"库区编号",name:"roomNo"},{xtype:"textfield",fieldLabel:"库区名称",name:"roomName"},{xtype:"textfield",fieldLabel:"仓区编号",name:"zoneNo"},{xtype:"textfield",fieldLabel:"仓区名称",name:"zoneName"},],gridModel:"Hc_mdm.model.BasStoreRoom",gridColumns:[{dataIndex:"roomNo",text:"库区编号",editor:{allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入10位字母或数字",maxLength:10,enforceMaxLength:true}},{dataIndex:"roomName",text:"库区名称",editor:{allowBlank:false,maxLength:30,enforceMaxLength:true}},{dataIndex:"storeNo",text:"仓库",editor:{allowBlank:false},xtype:"bllookupedit",estore:storeEStore,gstore:storeGStore,displaymember:"storeName",valuemember:"storeNo"},{dataIndex:"zoneNo",text:"仓区",editor:{allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入10位字母或数字",maxLength:10,enforceMaxLength:true},xtype:"bllookupedit",estore:zoneEStore,gstore:zoneGStore,displaymember:"zoneName",valuemember:"zoneNo"},{dataIndex:"roomType",text:"库区类型",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=room_type",displaymember:"itemName",valuemember:"itemCode",editor:{allowBlank:false}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:"0=禁用:1=启用"}],gridPrimaryKey:"lineId",gridUnionKey:"storeNo,zoneNo,roomNo",gridLoadUrl:Hc.mdmPath+"bas_store_room/list.json",gridSaveUrl:Hc.mdmPath+"bas_store_room/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_store_room/do_export.json",gridImportUrl:Hc.mdmPath+"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basstoreroom.BasStoreRoomController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basstoreroom",init:function(){var b=this,a=b.getObjList();b.callParent(arguments)},initAddData:function(b){var c=this,a=c.getObjList();c.callParent(arguments)},onGridBeforeEdit:function(c,g){var d=this;d.callParent(arguments);if(g.field=="zoneNo"){var a=g.record;var f=a.get("storeNo");var h=a.get("zoneNo");if(f==""){Ext.Msg.alert("提示","请先选择仓库");return false}else{var b=g.column.getEditor().store;oldstoreNo=b.proxy.extraParams.storeNo;if(f!=oldstoreNo){b.proxy.extraParams.storeNo=f;b.on("load",function(){g.column.getEditor().setValue(h)});b.load()}}}},onGridAfterEdit:function(c,g){var d=this;d.callParent(arguments);if(g.field=="storeNo"){var b=g.originalValue;var f=g.value;if(b!=f){var a=g.record;a.set("zoneNo","")}}}});
Ext.define("Hc_mdm.view.basstoreroom.BasStoreRoomModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basstoreroom",});
Ext.define("Hc_mdm.view.basstorezone.BasStoreZone",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basstorezone",controller:"basstorezone",viewModel:{type:"basstorezone"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"仓区编号",name:"zoneNo"},{xtype:"textfield",fieldLabel:"仓区名称",name:"zoneName"},{xtype:"extcombox",fieldLabel:"仓库",name:"storeNo",displayvalue:Hc.mdmPath+"bas_store/list.json",displaymember:"storeName",valuemember:"storeNo"}],gridModel:"Hc_mdm.model.BasStoreZone",gridColumns:[{dataIndex:"zoneNo",text:"仓区编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true}},{dataIndex:"zoneName",text:"仓区名称",editor:{allowBlank:false,maxLength:30,enforceMaxLength:true}},{dataIndex:"storeNo",text:"仓库",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_store/list.json",displaymember:"storeName",valuemember:"storeNo",editor:{allowBlank:false}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true,xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false,xtype:"combouseflag",maxLength:11,enforceMaxLength:true},renderer:"renderUseFlag"}],gridPrimaryKey:"lineId",gridUnionKey:"storeNo,zoneNo",gridLoadUrl:Hc.mdmPath+"bas_store_zone/list.json",gridSaveUrl:Hc.mdmPath+"bas_store_zone/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_store_zone/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basstorezone.BasStoreZoneController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basstorezone"});
Ext.define("Hc_mdm.view.basstorezone.BasStoreZoneModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basstorezone"});
Ext.define("Hc_mdm.view.basstyle.BasStyle",{extend:"Hc_Common.view.BaseMultiPage",alias:"widget.basstyle",controller:"basstyle",viewModel:{type:"basstyle"},searchItems:[{xtype:"textfield",fieldLabel:"型体编号",name:"modelNo"},{xtype:"textfield",fieldLabel:"型体名称",name:"modelName"}],gridColumns:[{dataIndex:"modelNo",text:"型体编码",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"modelName",text:"型体名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}}],gridModel:"Hc_mdm.model.BasModel",gridPrimaryKey:"modelNo",gridSubGrid:["grid1"],gridSupGrid:"",gridLoadUrl:Hc.mdmPath+"bas_model/list.json",gridSaveUrl:Hc.mdmPath+"bas_model/saveMasterCustomerList.json",gridExportUrl:Hc.mdmPath+"bas_model/do_export.json",gridImportUrl:Hc.mdmPath+"bas_model/importExcel.json",grid1Columns:[{dataIndex:"styleNo",text:"款号编码",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"modelNo",text:"型体编码",hidden:true},{dataIndex:"styleName",text:"款号名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"creator",text:"创建人"},{dataIndex:"createTime",text:"创建时间"},{dataIndex:"modifier",text:"修改人"},{dataIndex:"modifyTime",text:"修改时间"}],grid1SubGrid:[],grid1SupGrid:"mastergrid",grid1Model:"Hc_mdm.model.BasStyle",grid1PrimaryKey:"styleNo",grid1LoadUrl:Hc.mdmPath+"bas_style/list.json",grid1ExportUrl:Hc.mdmPath+"bas_style/do_export.json",grid1ImportUrl:Hc.mdmPath+"bas_style/importExcel.json",initComponent:function(){var a=this;a.callParent()}});
Ext.define("Hc_mdm.view.basstyle.BasStyleController",{extend:"Hc_Common.view.BaseMultiPageController",alias:"controller.basstyle",init:function(){var a=this;a.callParent()}});
Ext.define("Hc_mdm.view.basstyle.BasStyleModel",{extend:"Hc_Common.view.BaseMultiPageModel",alias:"viewmodel.basstyle",});
Ext.define("Hc_mdm.view.bassupplier.BasSupplier",{extend:"Hc_Common.view.BaseMultiPage",alias:"widget.bassupplier",controller:"bassupplier",viewModel:{type:"bassupplier"},isAutoLoad:false,customLayout1:true,initComponent:function(){var b=this;var d=Ext.create("Hc_mdm.model.BasCountry",{model:"Hc_mdm.model.BasCountry",autoLoad:false,proxy:{url:Hc.mdmPath+"bas_country/list.json"}});Ext.apply(b,{searchItems:[{xtype:"textfield",fieldLabel:"供应商编号",labelAlign:"right",name:"supplierNo"},{xtype:"textfield",fieldLabel:"供应商名称",labelAlign:"right",name:"supplierName"},{xtype:"extcombox",fieldLabel:"供应商类型",labelAlign:"right",name:"supplierType",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=supplier_type",displaymember:"itemName",valuemember:"itemCode"},{xtype:"extcombox",fieldLabel:"供应商状态",name:"supplierStatus",labelAlign:"right",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=supplier_status",displaymember:"itemName",valuemember:"itemCode"}],gridColumns:[{dataIndex:"supplierNo",text:"供应商编号",editor:{allowBlank:false}},{dataIndex:"supplierName",text:"供应商名称",editor:{allowBlank:false,maxLength:60,enforceMaxLength:true}},{dataIndex:"supplierSname",text:"供应商简称",editor:{allowBlank:false,maxLength:30,enforceMaxLength:true}},{dataIndex:"supplierType",text:"供应商类型",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=supplier_type",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"supplierStatus",text:"供应商状态",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=supplier_status",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"factoryType",text:"厂商类别",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=factory_type",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"supplierAddress",text:"供应商地址",editor:{allowBlank:false,maxLength:90,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:"0=禁用:1=启用"}],gridModel:"Hc_mdm.model.BasSupplier",gridPrimaryKey:"supplierNo",gridSubGrid:["grid1","grid2","grid3"],gridLoadUrl:Hc.mdmPath+"bas_supplier/list.json",gridSaveUrl:Hc.mdmPath+"bas_supplier/saveMasterCustomerList.json",gridExportUrl:Hc.mdmPath+"bas_supplier/do_export.json",gridImportUrl:"",grid1Columns:[{xtype:"gridcolumn",dataIndex:"brandId",text:"使用组织id",hidden:true,hideable:false},{xtype:"gridcolumn",dataIndex:"supplierNo",text:"供应商编号",hidden:true,hideable:false},{dataIndex:"brandNo",text:"品牌编号",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_brand/list.json",displaymember:"brandCname",valuemember:"brandNo"},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield"}}],grid1Model:"Hc_mdm.model.BasSupplierBrand",grid1SupGrid:"mastergrid",grid1PrimaryKey:"brandId",grid1LoadUrl:Hc.mdmPath+"bas_supplier_brand/list.json",grid1SaveUrl:Hc.mdmPath+"bas_supplier_brand/batchOperate.json",grid1ExportUrl:Hc.mdmPath+"bas_supplier_brand/do_export.json",grid1Title:"使用品牌",grid1ImportUrl:"",grid2Columns:[{xtype:"gridcolumn",dataIndex:"contacterId",text:"联系人id",hidden:true,hideable:false},{xtype:"gridcolumn",dataIndex:"supplierNo",text:"供应商编号",hidden:true,hideable:false},{dataIndex:"contacterCalled",text:"联系人称呼",xtype:"bllookupedit",editor:{allowBlank:true},displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=contacter_called",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"contacterName",text:"联系人姓名",editor:{maxLength:20,enforceMaxLength:true,allowBlank:true}},{dataIndex:"contacterDept",text:"联系人部门",editor:{allowBlank:true,maxLength:30,enforceMaxLength:true}},{dataIndex:"contacterDuty",text:"联系人职务",editor:{allowBlank:true,maxLength:20,enforceMaxLength:true}},{dataIndex:"mobileNo",text:"手机号码",editor:{allowBlank:true,maxLength:20,enforceMaxLength:true}},{dataIndex:"phoneNo",text:"电话号码",editor:{allowBlank:true,maxLength:20,enforceMaxLength:true}},{dataIndex:"faxNo",text:"传真号码",editor:{allowBlank:true,maxLength:20,enforceMaxLength:true}},{dataIndex:"email",text:"邮件地址",editor:{allowBlank:true,maxLength:40,enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",}},{dataIndex:"isDefault",text:"是否默认联系人",editor:{allowBlank:true,maxLength:60,enforceMaxLength:true},xtype:"bllookupedit",displayvalue:"0=否:1=是"}],grid2Model:"Hc_mdm.model.BasSupplierContacter",grid2PrimaryKey:"contacterId",grid2SupGrid:"mastergrid",grid2LoadUrl:Hc.mdmPath+"bas_supplier_contacter/list.json",grid2SaveUrl:Hc.mdmPath+"bas_supplier_contacter/batchOperate.json",grid2ExportUrl:Hc.mdmPath+"bas_supplier_contacter/do_export.json",grid2Title:"联系人",grid2ImportUrl:"",grid3Columns:[{dataIndex:"lineId",text:"行id",hidden:true,hideable:false},{dataIndex:"orderNo",text:"排列序号"},{dataIndex:"categoryNo",text:"类别",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_supply_category/list.json",displaymember:"categoryName",valuemember:"categoryNo",reference:"categoryNo"},{dataIndex:"purchaseType",text:"采购类型",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=purchase_type",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"enableFlag",text:"启用状态",renderer:"renderUseFlag",editor:{allowBlank:false,xtype:"combouseflag",maxLength:30,enforceMaxLength:true}},{dataIndex:"creator",text:"建档人"},{dataIndex:"createTime",text:"建档时间"},{dataIndex:"modifier",text:"修改人"},{dataIndex:"modifyTime",text:"修改时间"}],grid3Model:"Hc_mdm.model.BasSupplierSupplyCategory",grid3SupGrid:"mastergrid",grid3PrimaryKey:"lineId",grid3LoadUrl:Hc.mdmPath+"bas_supplier_supply_category/listvo.json",grid3SaveUrl:Hc.mdmPath+"bas_supplier_supply_category/batchOperate.json",grid3ExportUrl:Hc.mdmPath+"bas_supplier_supply_category/do_export.json",grid3Title:"供货类别",grid3ImportUrl:""});var c={xtype:"container",title:"基本信息",layout:{type:"table",columns:4},defaults:{labelAlign:"right",labelWidth:80,width:"100%"},items:[{dataIndex:"supplierNo",xtype:"textfield",reference:"editpanelsupplierno",fieldLabel:"供应商编号",labelAlign:"right",allowBlank:false,maxLength:6,enforceMaxLength:true,bind:{value:"{gridRow.supplierNo}"},canInput:false},{xtype:"textfield",fieldLabel:"供应商名称",labelAlign:"right",allowBlank:false,bind:{value:"{gridRow.supplierName}"}},{xtype:"textfield",fieldLabel:"简称",labelAlign:"right",allowBlank:false,bind:{value:"{gridRow.supplierSname}"}},{xtype:"extcombox",fieldLabel:"供应商类型",labelAlign:"right",allowBlank:false,displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=supplier_type",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.supplierType}"}},{xtype:"extcombox",fieldLabel:"供应商状态",labelAlign:"right",allowBlank:false,displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=supplier_status",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.supplierStatus}"}},{xtype:"extcombox",fieldLabel:"国家",labelAlign:"right",allowBlank:true,editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_country/list.json",displaymember:"countryName",valuemember:"countryNo",bind:{value:"{gridRow.countryNo}"}},{xtype:"extcombox",fieldLabel:"地区",labelAlign:"right",allowBlank:true,displayvalue:Hc.mdmPath+"bas_region/list.json",displaymember:"regionName",valuemember:"regionNo",bind:{value:"{gridRow.provinceNo}"}},{xtype:"extcombox",fieldLabel:"厂商类别",labelAlign:"right",allowBlank:false,displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=factory_type",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.factoryType}"}},{xtype:"textfield",fieldLabel:"邮政编码",labelAlign:"right",allowBlank:true,bind:{value:"{gridRow.postcodeNo}"}},{xtype:"textfield",fieldLabel:"电话号码",labelAlign:"right",allowBlank:true,bind:{value:"{gridRow.phoneNo}"}},{xtype:"textfield",fieldLabel:"传真号码",labelAlign:"right",allowBlank:true,bind:{value:"{gridRow.faxNo}"}},{xtype:"textfield",fieldLabel:"手机号码",labelAlign:"right",allowBlank:true,bind:{value:"{gridRow.mobileNo}"}},{xtype:"textfield",fieldLabel:"邮件地址",labelAlign:"right",allowBlank:true,editor:{regex:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,regexText:"邮箱格式不正确"},bind:{value:"{gridRow.email}"}},{xtype:"textfield",fieldLabel:"公司网址",labelAlign:"right",allowBlank:true,bind:{value:"{gridRow.website}"}},{xtype:"textfield",fieldLabel:"供应商地址",labelAlign:"right",allowBlank:false,bind:{value:"{gridRow.supplierAddress}"}},{xtype:"extcombox",fieldLabel:"是否限定品牌",labelAlign:"right",allowBlank:false,displayvalue:"0=否:1=是",bind:{value:"{gridRow.fixInDivision}"}},{xtype:"extcombox",fieldLabel:"启用状态",labelAlign:"right",allowBlank:false,displayvalue:"0=禁用:1=启用",bind:{value:"{gridRow.enableFlag}"}},{dataIndex:"creator",xtype:"textfield",fieldLabel:"创建人",labelAlign:"right",readOnly:true,bind:{value:"{gridRow.creator}"}},{dataIndex:"createTime",xtype:"textfield",fieldLabel:"创建时间",labelAlign:"right",readOnly:true,bind:{value:"{gridRow.createTime}"}},{dataIndex:"modifier",xtype:"textfield",fieldLabel:"修改人",labelAlign:"right",readOnly:true,bind:{value:"{gridRow.modifier}"}},{dataIndex:"modifyTime",xtype:"textfield",fieldLabel:"修改时间",labelAlign:"right",readOnly:true,bind:{value:"{gridRow.modifyTime}"}}]};var a={title:"财务信息",xtype:"container",layout:{type:"table",columns:4},defaults:{labelAlign:"right",labelWidth:80,width:"100%"},items:[{xtype:"extcombox",fieldLabel:"订单币种",labelAlign:"right",allowBlank:false,displayvalue:Hc.mdmPath+"bas_currency/list.json?enableFlag=1",displaymember:"currencyName",valuemember:"currencyNo",bind:{value:"{gridRow.currencyNo}"}},{xtype:"textfield",fieldLabel:"税务登记号",labelAlign:"right",allowBlank:true,bind:{value:"{gridRow.taxpayingNo}"}},{xtype:"extcombox",fieldLabel:"付款条件",labelAlign:"right",allowBlank:false,displayvalue:Hc.mdmPath+"bas_payment_clause/list.json?paymentClauseType=1&&enableFlag=1",displaymember:"paymentClauseName",valuemember:"paymentClauseNo",bind:{value:"{gridRow.paymentClauseNo}"}},{xtype:"textfield",fieldLabel:"增值税登记号",labelAlign:"right",allowBlank:true,bind:{value:"{gridRow.addRateNo}"}},{xtype:"extcombox",fieldLabel:"付款方式",labelAlign:"right",allowBlank:false,displayvalue:Hc.mdmPath+"bas_payment_method/list.json?enableFlag=1",displaymember:"paymentMethodName",valuemember:"paymentMethodNo",bind:{value:"{gridRow.paymentMethodNo}"}},{xtype:"extcombox",fieldLabel:"发票类型",labelAlign:"right",allowBlank:true,displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=invoice_type&enableFlag=1",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.invoiceType}"}},{xtype:"extcombox",fieldLabel:"默认税率",labelAlign:"right",allowBlank:true,displayvalue:Hc.mdmPath+"bas_tax_rate/list.json?enableFlag=1",displaymember:"taxRateName",valuemember:"taxRateNo",bind:{value:"{gridRow.taxRateNo}"}},{xtype:"datefield",fieldLabel:"最近发票日期",labelAlign:"right",allowBlank:true,bind:{value:"{gridRow.lastInvoiceDate}"}},{xtype:"textfield",fieldLabel:"财务信函地址",labelAlign:"right",allowBlank:true,bind:{value:"{gridRow.financeAddress}"}}]};c.padding=3;a.padding=3;var e={xtype:"tabpanel",reference:"tabpanel",region:"south",height:220,layout:{type:"table",columns:4},split:true,autoDestroy:true,tabPosition:"top",border:false,items:[c,a,b.grid1,b.grid2,b.grid3]};b.items=[b.toolbar];if(b.searchItems.length>0){b.items.push(b.searchPanel)}b.items.push(b.grid);b.items.push(e);b.items=b.items.concat(b.otherItems);b.callParent()}});
Ext.define("Hc_mdm.view.bassupplier.BasSupplierController",{extend:"Hc_Common.view.BaseMultiPageController",alias:"controller.bassupplier",init:function(){var a=this;a.callParent();a.setComponentReadOnly("tabpanel",true)},setComponentReadOnly:function(b,d){var a=this,c=a.lookupReference(b).query("textfield,numberfield,datefield,combo");Ext.each(c,function(e){if(e.dataIndex!="creator"&&e.dataIndex!="createTime"&&e.dataIndex!="modifier"&&e.dataIndex!="modifyTime"&&e.dataIndex!="supplierNo"){e.setReadOnly(d)}})},onGridSelectionChange:function(c,f,a,b){var d=this;d.callParent(arguments);if(d.lookupReference("mastergrid").getSelection()&&d.lookupReference("mastergrid").getSelection().length>0){d.setComponentReadOnly("tabpanel",false)}else{d.setComponentReadOnly("tabpanel",true)}},onBtnSearchClick:function(a){var b=this;b.callParent(arguments)},gridSelectionChange:function(a,f){var d=this;d.callParent(arguments);var c=d.lookupReference("editpanelsupplierno");if(c){var b=a.selectionStart;if(b){if(!b.phantom){c.setReadOnly(true)}else{c.setReadOnly(false)}}}},checkKeyValue:function(k){var l=this;l.callParent(arguments);if(k.field=="isDefault"){var j=k.record;var f=j.get("isDefault");var d=j.get("supplierNo");var c=j.get("contacterId");if(f==1){Ext.Ajax.request({url:Hc.mdmPath+"bas_supplier/checkIsDefault.json",async:false,params:{supplierNo:d},success:function(i,q){var e=i.responseText;if(e!="0"){}}})}}if(k.field=="categoryNo"){var a=l.workObject,n=a.store,h=n.getData();var j=k.record;var b=j.get("categoryNo");var m=0;for(var g=0;g<(h.length);g++){if(b==h.items[g].get("categoryNo")){m++}}if(m>=2){Ext.Msg.alert("错误","类别不能重复");j.set("categoryNo","");return}}if(k.field=="brandNo"){var a=l.workObject,n=a.store,h=n.getData();var j=k.record;var o=j.get("brandNo");var m=0;for(var g=0;g<(h.length);g++){if(o==h.items[g].get("brandNo")){m++}}if(m>=2){Ext.Msg.alert("错误","品牌编号不能重复");j.set("brandNo","");return}}if(k.field=="contacterName"){var a=l.workObject,n=a.store,h=n.getData();var j=k.record;var p=j.get("orderNo");var m=0;for(var g=0;g<(h.length);g++){if(p==h.items[g].get("orderNo")){m++}}if(m>=2){Ext.Msg.alert("错误","排列序号不能重复");j.set("brandNo","");return}}},onGrid3AfterEdit:function(c,f){var d=this;if(f.field=="categoryNo"){var g=f.originalValue;var b=f.value;if(g!=b){var a=f.record;Ext.Ajax.request({url:Hc.mdmPath+"bas_supply_category/list.json",params:{categoryNo:f.value},method:"GET",success:function(h){var e=JSON.parse(h.responseText);if(e.result.resultCode=="0"&&e.list.length>0){for(var k=0;k<e.list.length;k++){var j=e.list[0];a.set("purchaseType",j.purchaseType)}}else{a.set("materialNo",oldMaterialNo);Ext.MessageBox.alert("提示","没有找到物料编号为【"+newMaterialNo+"】的信息")}},failure:function(e,h){Ext.MessageBox.show({title:"错误提示",msg:e.responseText,height:300,width:400})}})}}this.checkKeyValue(f)}});
Ext.define("Hc_mdm.view.bassupplier.BasSupplierModel",{extend:"Hc_Common.view.BaseMultiPageModel",alias:"viewmodel.bassupplier"});
Ext.define("Hc_mdm.view.bassupplierbrand.BasSupplierBrand",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bassupplierbrand",controller:"bassupplierbrand",viewModel:{type:"bassupplierbrand"},initComponent:function(){var a=this;Ext.apply(a.searchPanel,{items:[]});Ext.apply(a.grid,{columns:[{dataIndex:"brandId",text:"使用组织id",editor:{allowBlank:false}},{dataIndex:"supplierNo",text:"供应商编号",editor:{allowBlank:false}},{dataIndex:"brandNo",text:"品牌编号",editor:{allowBlank:false}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:false}},{dataIndex:"remarks",text:"备注",editor:{allowBlank:false}},],batchUrl:Hc.IntegPath+"rest/bas_supplier_brand/listsave.json"});a.callParent()}});
Ext.define("Hc_mdm.view.bassupplierbrand.BasSupplierBrandController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bassupplierbrand"});
Ext.define("Hc_mdm.view.bassupplierbrand.BasSupplierBrandModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bassupplierbrand"});
Ext.define("Hc_mdm.view.bassuppliercontacter.BasSupplierContacter",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bassuppliercontacter",controller:"bassuppliercontacter",viewModel:{type:"bassuppliercontacter"},initComponent:function(){var a=this;Ext.apply(a.searchPanel,{items:[{xtype:"combo",width:"250",editable:false,triggerAction:"all",fieldLabel:"所属项目编码",name:"projectCode",displayField:"projectName",valueField:"projectCode",store:{type:"itgproject",autoLoad:true}}]});Ext.apply(a.grid,{columns:[{dataIndex:"contacterId",text:"联系人id",editor:{allowBlank:false}},{dataIndex:"supplierNo",text:"供应商编号",editor:{allowBlank:false}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:false}},{dataIndex:"contacterCalled",text:"联系人称呼(取数据字典 contacter_called)",editor:{allowBlank:false}},{dataIndex:"contacterName",text:"联系人姓名",editor:{allowBlank:false}},{dataIndex:"contacterDept",text:"联系人部门(取数据字典 contacter_dept)",editor:{allowBlank:false}},{dataIndex:"contacterDuty",text:"联系人职务(取数据字典 contacter_duty)",editor:{allowBlank:false}},{dataIndex:"mobileNo",text:"手机号码",editor:{allowBlank:false}},{dataIndex:"phoneNo",text:"电话号码",editor:{allowBlank:false}},{dataIndex:"faxNo",text:"传真号码",editor:{allowBlank:false}},{dataIndex:"email",text:"邮件地址",editor:{allowBlank:false}},{dataIndex:"remarks",text:"备注",editor:{allowBlank:false}},],batchUrl:Hc.IntegPath+"rest/bas_supplier_contacter/listsave.json"});a.callParent()}});
Ext.define("Hc_mdm.view.bassuppliercontacter.BasSupplierContacterController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bassuppliercontacter",init:function(){var a=this;a.callParent(arguments)},checkKeyValue:function(g){var f=this;f.callParent(arguments);var d=g;var c=0},onGridAfterEdit:function(b,e){var c=this;c.callParent(arguments);if(e.field=="isDefault"){var a=e.record;var d=a.get("isDefault");var f=a.get("supplierNo");var g=a.get("contacterId");if(d==1){Ext.Ajax.request({url:Hc.mdmPath+"bas_supplier_contacter/checkIsDefault.json",async:false,params:{supplierNo:category_no},success:function(i,j){var h=i.responseText;if(h!="0"){Hc.alert(h)}}})}}}});
Ext.define("Hc_mdm.view.bassuppliercontacter.BasSupplierContacterModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bassuppliercontacter"});
Ext.define("Hc_mdm.view.bassuppliersupplycategory.BasSupplierSupplyCategory",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bassuppliersupplycategory",controller:"bassuppliersupplycategory",viewModel:{type:"bassuppliersupplycategory"},initComponent:function(){var a=this;Ext.apply(a.searchPanel,{items:[]});Ext.apply(a.grid,{columns:[{dataIndex:"lineId",text:"行id",editor:{allowBlank:false}},{dataIndex:"supplierNo",text:"供应商编号",editor:{allowBlank:false}},{dataIndex:"categoryNo",text:"类别编号",editor:{allowBlank:false}},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:false}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false}},{dataIndex:"creator",text:"建档人",editor:{allowBlank:false}},{dataIndex:"createTime",text:"建档时间",editor:{allowBlank:false}},{dataIndex:"modifier",text:"修改人",editor:{allowBlank:false}},{dataIndex:"modifyTime",text:"修改时间",editor:{allowBlank:false}},{dataIndex:"remarks",text:"备注",editor:{allowBlank:false}},],batchUrl:Hc.IntegPath+"rest/bas_supplier_supply_category/listsave.json"});a.callParent()}});
Ext.define("Hc_mdm.view.bassuppliersupplycategory.BasSupplierSupplyCategoryController",{extend:"Hc_mdm.view.BaseSimplePageController",alias:"controller.bassuppliersupplycategory"});
Ext.define("Hc_mdm.view.bassuppliersupplycategory.BasSupplierSupplyCategoryModel",{extend:"Hc_mdm.view.BaseSimplePageModel",alias:"viewmodel.bassuppliersupplycategory",});
Ext.define("Hc_mdm.view.bassupplycategory.BasSupplyCategory",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bassupplycategory",controller:"bassupplycategory",viewModel:{type:"bassupplycategory"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"类别编号",name:"categoryNo"},{xtype:"textfield",fieldLabel:"类别名称",name:"categoryName"},{name:"purchaseType",xtype:"extcombox",fieldLabel:"采购类型",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=purchase_type",displaymember:"itemName",valuemember:"itemCode"}],gridModel:"Hc_mdm.model.BasSupplyCategory",gridColumns:[{dataIndex:"categoryNo",text:"类别编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true}},{dataIndex:"categoryName",text:"类别名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"purchaseType",text:"采购类型",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=purchase_type",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true}},{dataIndex:"enableFlag",text:"启用状态",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:"0=禁用:1=启用"}],gridPrimaryKey:"categoryNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_supply_category/list.json",gridSaveUrl:Hc.mdmPath+"bas_supply_category/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_supply_category/do_export.json",gridImportUrl:Hc.mdmPath+"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.bassupplycategory.BasSupplyCategoryController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bassupplycategory",onGridAfterEdit:function(c,f){var d=this;store=d.lookupReference("mastergrid").store;if(f.field=="categoryName"&&f.value!=""&&f.value!=null){for(var b=0;b<store.totalCount;b++){if(f.rowIdx==b){continue}var a=store.getAt(b);if(a.get("categoryName")==f.value){Hc.alert("类别名称不能重复");f.record.set("categoryName","");return}}}}});
Ext.define("Hc_mdm.view.bassupplycategory.BasSupplyCategoryModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bassupplycategory",});
Ext.define("Hc_mdm.view.bastaxcategory.BasTaxCategory",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bastaxcategory",controller:"bastaxcategory",viewModel:{type:"bastaxcategory"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"税种编号",name:"taxCategoryNo"},{xtype:"textfield",fieldLabel:"税种名称",name:"taxCategoryName"},{fieldLabel:"币别",name:"currencyNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_currency/list.json?enableFlag=1",displaymember:"currencyName",valuemember:"currencyNo"}],gridModel:"Hc_mdm.model.BasTaxCategory",gridColumns:[{dataIndex:"taxCategoryNo",text:"税种编号",editor:{allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入10位字母或数字",maxLength:10,enforceMaxLength:true}},{dataIndex:"taxCategoryName",text:"税种名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"currencyNo",text:"币别",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_currency/list.json?enableFlag=1",displaymember:"currencyName",valuemember:"currencyNo"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false,xtype:"comboyesno"},renderer:"renderYesNo"}],gridPrimaryKey:"taxCategoryNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_tax_category/list.json",gridSaveUrl:Hc.mdmPath+"bas_tax_category/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_tax_category/do_export.json",gridImportUrl:Hc.mdmPath+"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.bastaxcategory.BasTaxCategoryController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bastaxcategory"});
Ext.define("Hc_mdm.view.bastaxcategory.BasTaxCategoryModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bastaxcategory"});
Ext.define("Hc_mdm.view.bastaxrate.BasTaxRate",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.bastaxrate",controller:"bastaxrate",viewModel:{type:"bastaxrate"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"税率编号",name:"taxRateNo"},{xtype:"textfield",fieldLabel:"税率名称",name:"taxRateName"}],gridModel:"Hc_mdm.model.BasTaxRate",gridColumns:[{dataIndex:"taxRateNo",text:"税率编号",editor:{allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入10位字母或数字",maxLength:10,enforceMaxLength:true}},{dataIndex:"taxRateName",text:"税率名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"taxRate",text:"税率(%)",editor:{allowBlank:false}},{dataIndex:"taxCategoryNo",text:"税种",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_tax_category/list.json?enableFlag=1",displaymember:"taxCategoryName",valuemember:"taxCategoryNo"},{dataIndex:"isAddedTax",text:"是否增值税",editor:{allowBlank:false,xtype:"comboyesno"},renderer:"renderYesNo"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false,xtype:"comboyesno"},renderer:"renderYesNo"}],gridPrimaryKey:"taxRateNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_tax_rate/list.json",gridSaveUrl:Hc.mdmPath+"bas_tax_rate/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_tax_rate/do_export.json",gridImportUrl:Hc.mdmPath+"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.bastaxrate.BasTaxRateController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.bastaxrate"});
Ext.define("Hc_mdm.view.bastaxrate.BasTaxRateModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.bastaxrate"});
Ext.define("Hc_mdm.view.basunit.BasUnit",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basunit",controller:"basunit",viewModel:{type:"basunit"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"单位编号",name:"unitNo"},{xtype:"textfield",fieldLabel:"单位名称",name:"unitName"},{xtype:"bldatetime",fieldLabel:"建档时间",name:"createFromTime"},{xtype:"bldatetime",fieldLabel:"   到     ",name:"createToTime",vtype:"compareTo",compareTo:"createFromTime",compareType:">=",compareError:"结束日期不能小于开始日期"}],gridModel:"Hc_mdm.model.BasUnit",gridColumns:[{dataIndex:"unitNo",text:"单位编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true}},{dataIndex:"unitName",text:"单位名称",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"specification",text:"规格",editor:{allowBlank:false,maxLength:20,enforceMaxLength:true}},{dataIndex:"decimalDigits",text:"小数位数",editor:{allowBlank:false}},{dataIndex:"flagMaterial",text:"物料单位标志",editor:{allowBlank:true},xtype:"gridcomboyesno"},{dataIndex:"flagPurchase",text:"采购单位标志",editor:{allowBlank:true},xtype:"gridcomboyesno"},{dataIndex:"flagBom",text:"BOM单位标志",editor:{allowBlank:true},xtype:"gridcomboyesno"},{dataIndex:"flagDeliver",text:"发运单位标志",editor:{allowBlank:true},xtype:"gridcomboyesno"},{dataIndex:"flagQuality",text:"质检单位标志",editor:{allowBlank:true},xtype:"gridcomboyesno"},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false},xtype:"gridcombouseflag"},{dataIndex:"orderNo",text:"排列序号",editor:{allowBlank:true}}],gridPrimaryKey:"unitNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_unit/list.json",gridSaveUrl:Hc.mdmPath+"bas_unit/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_unit/do_export.json",gridImportUrl:Hc.mdmPath+"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basunit.BasUnitController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basunit"});
Ext.define("Hc_mdm.view.basunit.BasUnitModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basunit",});
Ext.define("Hc_mdm.view.basunitswitch.BasUnitSwitch",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basunitswitch",controller:"basunitswitch",viewModel:{type:"basunitswitch"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{fieldLabel:"单位",name:"unitNoA",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo"},{fieldLabel:"转换单位",name:"unitNoB",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo"},{xtype:"datefield",fieldLabel:"创建时间",name:"createFromTime",vtype:"compareTo",compareTo:"createToTime",compareType:"<=",compareError:"开始日期不能大于结束日期,请重新选择"},{xtype:"datefield",fieldLabel:"   至     ",name:"createToTime",vtype:"compareTo",compareTo:"createFromTime",compareType:">=",compareError:"结束日期不能小于开始日期"}],gridModel:"Hc_mdm.model.BasUnitSwitch",gridColumns:[{dataIndex:"unitNoA",text:"单位",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo"},{dataIndex:"unitNoB",text:"转换单位",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo"},{dataIndex:"qtyA",text:"数量",editor:{allowBlank:false,maxLength:12,regex:/^(\-|\+)?\d+(\.\d+)?$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"qtyB",text:"转换数量",editor:{allowBlank:false,maxLength:12,regex:/^(\-|\+)?\d+(\.\d+)?$/,regexText:"请输入数字",enforceMaxLength:true}},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:"0=禁用:1=启用"}],gridPrimaryKey:"switchId",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_unit_switch/list.json",gridSaveUrl:Hc.mdmPath+"bas_unit_switch/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_unit_switch/do_export.json",gridImportUrl:"",searchColumn:4,gridEditModel:"cell",gridCanDrag:false,gridCanEdit:true,gridCanAdd:true,gridCanDelete:true,gridSelModel:"MULTI"});a.callParent()}});
Ext.define("Hc_mdm.view.basunitswitch.BasUnitSwitchController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basunitswitch"});
Ext.define("Hc_mdm.view.basunitswitch.BasUnitSwitchModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basunitswitch"});
Ext.define("Hc_mdm.view.basworkshop.BasWorkshop",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.basworkshop",controller:"basworkshop",viewModel:{type:"basworkshop"},initComponent:function(){var a=this,b=Ext.create("Hc_Common.store.Base",{fields:["companyNo","companyName"],autoLoad:true,proxy:{url:Hc.mdmPath+"bas_company/listAll.json"}});b.proxy.extraParams.companyType=0,Ext.apply(a,{searchItems:[{fieldLabel:"事业部",name:"divisionNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_division/listAll.json",displaymember:"divisionName",valuemember:"divisionNo"},{fieldLabel:"厂区",name:"factoryNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_factory/listAll.json",displaymember:"factoryName",valuemember:"factoryNo"},{xtype:"textfield",fieldLabel:"车间编号",name:"workshopNo",maxLength:10,enforceMaxLength:true},{xtype:"textfield",fieldLabel:"车间名称",name:"workshopName",maxLength:30,enforceMaxLength:true},{xtype:"datefield",fieldLabel:"创建时间",name:"createFromTime",vtype:"compareTo",compareTo:"createToTime",compareType:"<=",compareError:"开始日期不能大于结束日期,请重新选择"},{xtype:"datefield",fieldLabel:"   至     ",name:"createToTime",vtype:"compareTo",compareTo:"createFromTime",compareType:">=",compareError:"结束日期不能小于开始日期"}],gridModel:"Hc_mdm.model.BasWorkshop",gridColumns:[{dataIndex:"workshopNo",text:"车间编号",editor:{allowBlank:false,maxLength:10,enforceMaxLength:true,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",enforceMaxLength:true}},{dataIndex:"workshopName",text:"车间名称",editor:{allowBlank:false,maxLength:30,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"companyNo",text:"公司",width:130,xtype:"bllookupedit",editor:{allowBlank:false},estore:b,gstore:b,displaymember:"companyName",valuemember:"companyNo"},{dataIndex:"factoryNo",text:"厂区",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_factory/listAll.json",displaymember:"factoryName",valuemember:"factoryNo"},{dataIndex:"divisionNo",text:"事业部",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:Hc.mdmPath+"bas_division/listAll.json",displaymember:"divisionName",valuemember:"divisionNo"},{dataIndex:"workshopType",text:"车间类型",xtype:"bllookupedit",editor:{allowBlank:true},displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=workshop_type",displaymember:"itemName",valuemember:"itemCode"},{dataIndex:"workshopLeader",text:"车间负责人",editor:{maxLength:20,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",enforceMaxLength:true}},{dataIndex:"deptNo",text:"HR部门编码 ",editor:{xtype:"searchhelpfield",winTitle:"选择HR部门",gridColumns:[{dataIndex:"deptNo",text:"HR部门编码",flex:0.5},{dataIndex:"deptName",text:"HR部门名称   ",flex:0.5}],searchItems:[{name:"deptNo",fieldLabel:"HR部门编码"},{name:"deptName",fieldLabel:"HR部门名称"}],otherFields:"deptName",url:Hc.basePath+"itg_department/listAll.json"}},{dataIndex:"deptName",text:"HR部门名称",width:180},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield",maxLength:11,enforceMaxLength:true}},{dataIndex:"enableFlag",text:"启用状态",xtype:"bllookupedit",editor:{allowBlank:false},displayvalue:"0=禁用:1=启用"}],gridPrimaryKey:"workshopNo",gridUnionKey:"",gridLoadUrl:Hc.mdmPath+"bas_workshop/list.json",gridSaveUrl:Hc.mdmPath+"bas_workshop/batchOperate.json",gridExportUrl:Hc.mdmPath+"bas_workshop/do_export.json",gridImportUrl:"",searchColumn:4,gridEditColumn:4,gridEditItems:[{xtype:"extcombox",bind:{value:"{gridRow.companyNo}"},fieldLabel:"公司",allowBlank:false,store:b,displaymember:"companyName",valuemember:"companyNo"},{xtype:"extcombox",bind:{value:"{gridRow.divisionNo}"},fieldLabel:"事业部",allowBlank:false,displayvalue:Hc.mdmPath+"bas_division/listAll.json",displaymember:"divisionName",valuemember:"divisionNo"},{xtype:"extcombox",bind:{value:"{gridRow.factoryNo}"},fieldLabel:"厂区",allowBlank:false,displayvalue:Hc.mdmPath+"bas_factory/listAll.json",displaymember:"factoryName",valuemember:"factoryNo"},{xtype:"textfield",reference:"pWorkshopNo",bind:{value:"{gridRow.workshopNo}"},fieldLabel:"车间编号",allowBlank:false,maxLength:10,enforceMaxLength:true,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字"},{xtype:"textfield",bind:{value:"{gridRow.workshopName}"},fieldLabel:"车间名称",allowBlank:false,maxLength:30,enforceMaxLength:true,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文"},{xtype:"extcombox",bind:{value:"{gridRow.workshopType}"},fieldLabel:"车间类型",allowBlank:true,displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=workshop_type",displaymember:"itemName",valuemember:"itemCode"},{xtype:"textfield",bind:{value:"{gridRow.workshopLeader}"},fieldLabel:"车间负责人",allowBlank:true,maxLength:20,enforceMaxLength:true,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文"},{bind:{value:"{gridRow.deptNo}"},fieldLabel:"HR部门编码",name:"deptNo",xtype:"searchhelpfield",winTitle:"选择HR部门",gridColumns:[{dataIndex:"deptNo",text:"HR部门编码",flex:0.5},{dataIndex:"deptName",text:"HR部门名称",flex:0.5}],searchItems:[{name:"deptNo",fieldLabel:"HR部门编码"},{name:"deptName",fieldLabel:"HR部门名称"}],otherFields:"deptName",url:Hc.basePath+"itg_department/listAll.json"},{bind:{value:"{gridRow.deptName}"},xtype:"textfield",fieldLabel:"HR部门名称",name:"deptName",readOnly:true,editable:false},{xtype:"numberfield",bind:{value:"{gridRow.orderNo}"},fieldLabel:"排列序号"},{xtype:"extcombox",bind:{value:"{gridRow.enableFlag}"},fieldLabel:"启用状态",allowBlank:false,displayvalue:"0=禁用:1=启用"},{xtype:"textfield",bind:{value:"{gridRow.remarks}"},fieldLabel:"备注",maxLength:60,enforceMaxLength:true},{xtype:"textfield",bind:{value:"{gridRow.creator}"},readOnly:true,fieldLabel:"建档人"},{xtype:"textfield",bind:{value:"{gridRow.createTime}"},readOnly:true,fieldLabel:"建档时间"},{xtype:"textfield",bind:{value:"{gridRow.modifier}"},readOnly:true,fieldLabel:"修改人"},{xtype:"textfield",bind:{value:"{gridRow.modifyTime}"},readOnly:true,fieldLabel:"修改时间"}]});a.callParent()}});
Ext.define("Hc_mdm.view.basworkshop.BasWorkshopController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.basworkshop"});
Ext.define("Hc_mdm.view.basworkshop.BasWorkshopModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.basworkshop"});
Ext.define("Hc_mdm.view.billbom.BillBom",{extend:"Hc_Common.view.BaseBillListPage",alias:"widget.billbom",controller:"billbom",viewModel:{type:"billbom"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"extcombox",fieldLabel:"维护类型",name:"maintainType",displayvalue:"1=修改:2=用途转换:3=状态变更:4=品牌转换"},{xtype:"extcombox",fieldLabel:"原品牌",name:"oldBrandNo",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo"},{xtype:"textfield",fieldLabel:"物料编码",name:"materialCode"},{xtype:"extcombox",fieldLabel:"原BOM用途",name:"oldBomPurpose",displayvalue:"S2=开发:STD=标准"}],gridColumns:[{dataIndex:"billNo",text:"单据编号"},{dataIndex:"maintainType",text:"维护类型",xtype:"bllookupedit",displayvalue:"1=修改:2=用途转换:3=状态变更:4=品牌转换"},{dataIndex:"materialNo",text:"物料编号"},{dataIndex:"oldBomPurpose",text:"原BOM用途",xtype:"bllookupedit",displayvalue:"S2=开发:STD=标准"},{dataIndex:"newBomPurpose",text:"新BOM用途",xtype:"bllookupedit",displayvalue:"STD=标准:SUB=委外:SPD=预测"},{dataIndex:"oldBrandNo",text:"原品牌",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo"},{dataIndex:"newBrandNo",text:"新品牌",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo"},{dataIndex:"bomType",text:"BOM分类",xtype:"bllookupedit",displayvalue:"1=标准BOM:2=配置BOM"},{dataIndex:"versionNo",text:"版本序号"},{dataIndex:"bomStatus",text:"BOM状态",xtype:"bllookupedit",displayvalue:"0=编辑:1=审核:2=生效"},{dataIndex:"operator",text:"操作人"},{dataIndex:"creator",text:"建档人"},{dataIndex:"createTime",text:"建档时间",width:140},{dataIndex:"auditor",text:"审核人"},{dataIndex:"auditTime",text:"审核时间",width:140},{dataIndex:"billStatus",text:"单据状态",xtype:"bllookupedit",displayvalue:"0=编辑:1=审核"},{dataIndex:"remarks",text:"备注"}],gridModel:"Hc_mdm.model.BillBom",gridLoadUrl:Hc.mdmPath+"bill_bom/list.json",dtlName:"billbomlist",gridHasMark:false,gridHasCreator:false,gridHasModifier:false,gridHasAuditor:false,showModel:"selftab"});a.callParent()}});
Ext.define("Hc_mdm.view.billbom.BillBomController",{extend:"Hc_Common.view.BaseBillListPageController",alias:"controller.billbom"});
Ext.define("Hc_mdm.view.billbom.BillBomModel",{extend:"Hc_Common.view.BaseBillListPageModel",alias:"viewmodel.billbom"});
Ext.define("Hc_mdm.view.billbomlist.BillBomList",{extend:"Hc_Common.view.BaseBillDetailPage",alias:"widget.billbomlist",controller:"billbomlist",viewModel:{type:"billbomlist"},customLayout2:true,initComponent:function(){var f=this;Ext.apply(f,{billItems:[{xtype:"extcombox",fieldLabel:"维护类型",name:"maintainType",reference:"maintainType",displayvalue:"1=修改:2=用途转换:3=状态变更:4=品牌转换",bind:{value:"{billRow.maintainType}"}},{xtype:"searchhelpfield",fieldLabel:"物料编号",name:"materialNo",reference:"materialNo",gridColumns:[{dataIndex:"materialNo",text:"物料编号",flex:0.3},{dataIndex:"materialCode",text:"物料编码",flex:0.3},{dataIndex:"materialName",text:"物料名称",flex:0.3},{dataIndex:"sizeTypeNo",text:"码组",flex:0.3}],bind:{value:"{billRow.materialNo}"},searchItems:[{fieldLabel:"物料编码",name:"materialCode",flex:0.5}],isAutoLoad:false,otherFields:"materialCode,materialName,sizeTypeNo",url:Hc.mdmPath+"bas_material/list.json"},{xtype:"textfield",fieldLabel:"物料编码",name:"materialCode",reference:"materialCode",bind:{value:"{billRow.materialCode}"}},{xtype:"textfield",fieldLabel:"物料名称",name:"materialName",reference:"materialName",bind:{value:"{billRow.materialName}"}},{xtype:"textfield",fieldLabel:"码组",reference:"sizeTypeNo",name:"sizeTypeNo",editable:false,bind:{value:"{billRow.sizeTypeNo}"}},{xtype:"extcombox",fieldLabel:"原BOM用途",name:"oldBomPurpose",reference:"oldBomPurpose",displayvalue:"S2=开发:STD=标准",bind:{value:"{billRow.oldBomPurpose}"}},{xtype:"extcombox",fieldLabel:"新BOM用途",name:"newBomPurpose",reference:"newBomPurpose",displayvalue:"STD=标准:SUB=委外:SPD=预测",bind:{value:"{billRow.newBomPurpose}"}},{xtype:"extcombox",fieldLabel:"原品牌",name:"oldBrandNo",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo",reference:"oldBrandNo",bind:{value:"{billRow.oldBrandNo}"}},{xtype:"extcombox",fieldLabel:"新品牌",name:"newBrandNo",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo",reference:"newBrandNo",bind:{value:"{billRow.newBrandNo}"}},{xtype:"extcombox",fieldLabel:"BOM状态",name:"bomStatus",displayvalue:"0=编辑:1=审核:2=生效",reference:"bomStatus",bind:{value:"{billRow.bomStatus}"}},{xtype:"textfield",fieldLabel:"版本号",reference:"versionNo",name:"versionNo",editable:false,bind:{value:"{billRow.versionNo}"}},{xtype:"textfield",fieldLabel:"备注",name:"remarks",reference:"remarks",bind:{value:"{billRow.remarks}"},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入字母或数字",maxLength:60,enforceMaxLength:true}],billLoadUrl:Hc.mdmPath+"bill_bom/list.json",billSaveUrl:Hc.mdmPath+"bill_bom/saveSizeHorizontalData.json",billAuditUrl:Hc.mdmPath+"bill_bom/audit.json",billExportUrl:Hc.mdmPath+"bill_bom/do_export.json",billModel:"Hc_mdm.model.BillBom",billSubGrid:["mastergrid","grid1"],gridUnionKey:"billNo,orderNo",gridColumns:[{dataIndex:"billNo",text:"单据号",hidden:true},{dataIndex:"lineId",text:"行id",hidden:true},{dataIndex:"orderNo",text:"序号",editor:{allowBlank:false,regex:/^(\+)?\d+(\.\d+)?$/,regexText:"请输入正数"}},{dataIndex:"brandNo",text:"品牌",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo",editor:{allowBlank:false}},{dataIndex:"parentOrderNo",text:"上层序号",hidden:true},{dataIndex:"materialNo",text:"物料编号",editor:{xtype:"searchhelpfield",name:"materialNo",reference:"materialNo",gridColumns:[{dataIndex:"materialNo",text:"物料编号",flex:0.3},{dataIndex:"materialCode",text:"物料编码",flex:0.3},{dataIndex:"materialName",text:"物料名称",flex:0.3},{dataIndex:"sizeTypeNo",text:"码组",flex:0.3}],searchItems:[{fieldLabel:"物料编码",name:"materialCode",flex:0.5}],isAutoLoad:false,otherFields:"materialCode,materialName,sizeTypeNo",url:Hc.mdmPath+"bas_material/list.json",allowBlank:false}},{dataIndex:"materialCode",text:"物料编码"},{dataIndex:"materialName",text:"物料名称"},{dataIndex:"sizeTypeNo",text:"码组"},{dataIndex:"bomPurpose",text:"BOM用途",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:"S2=开发:STD=标准:SUB=委外:SPD=预测"},{dataIndex:"dosageNumerator",text:"用量(分子)",editor:{allowBlank:false,regex:/^(\+)?\d+(\.\d+)?$/,regexText:"请输入正数"}},{dataIndex:"dosageDenominator",text:"用量(分母)",editor:{allowBlank:false,regex:/^(\+)?\d+(\.\d+)?$/,regexText:"请输入正数"}},{dataIndex:"pdTypeNo",text:"用途",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=pd_type_no",displaymember:"itemName",valuemember:"itemCode",editor:{allowBlank:false}},{dataIndex:"storeNo",text:"预设仓库",editor:{allowBlank:false}},{dataIndex:"isVirtual",text:"是否虚拟件",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:"0=否:1=是"},{dataIndex:"updateFlag",text:"修改标识",readOnly:true,xtype:"bllookupedit",displayvalue:"0=否:1=是"}],gridPrimaryKey:"billNo",gridModel:"Hc_mdm.model.BillBomList",gridLoadUrl:Hc.mdmPath+"bill_bom_list/list.json",gridHasMark:false,gridHasCreator:false,gridHasModifier:false,gridHasAuditor:false,gridHasOrderNo:false,grid1Columns:[{dataIndex:"billNo",text:"单据号"},{dataIndex:"orderNo",text:"物料序号"},{dataIndex:"sizeTypeNo",text:"表头码组"},{dataIndex:"materialNo",text:"物料编号"},{dataIndex:"materialCode",text:"物料编码"},{dataIndex:"materialName",text:"物料名称"},{dataIndex:"newSizeTypeNo",text:"物料码组"}],grid1Model:"Hc_mdm.model.BillBomListSize",grid1PrimaryKey:"orderNo",grid1Title:"",grid1HasMark:false,grid1HasCreator:false,grid1HasModifier:false,grid1HasAuditor:false,grid1SizeInputType:"string",grid1MConvertSize:1,grid1LoadUrl:Hc.mdmPath+"bill_bom_list/listSizeVo.json?selectVoName=SelectListByVoBillBomListSize",grid1MSizeIdx:8});f.items=[f.billtoolbar];f.items.push(f.billPanel);f.items.push(f.toolbar);var b={xtype:"treepanel",region:"west",split:true,reference:"menutree",itemId:"menutree",width:250,batchUrl:Hc.mdmPath+"bill_bom/listsave.json",lines:true,rootVisible:false,columns:[{xtype:"treecolumn",flex:1,dataIndex:"materialCode",text:"物料编码",width:130},{dataIndex:"materialName",text:"物料名称",width:120}],store:{model:"Hc_mdm.model.BillBomList",type:"treebase",autoLoad:false,rootVisible:false,proxy:{type:"ajax",url:Hc.mdmPath+"bill_bom_list/list.json"},root:{text:"root",orderNo:0,materialNo:-1,leaf:false,expanded:false},nodeParam:"orderNo",parentIdProperty:"parentOrderNo"},listeners:{afteritemexpand:"onAfterItemExpand",selectionchange:"onTreeSelectionChange",}};var e=f.controller.getBodyHeight(0.4);var d={xtype:"panel",height:e,region:"north",layout:"border",items:[f.grid],split:true,border:false};var a={xtype:"panel",region:"center",layout:"border",items:[f.grid1],border:false};var g={xtype:"panel",region:"center",layout:"border",items:[d,a],border:false};var c={xtype:"panel",region:"center",layout:"border",items:[b,g],border:false};f.items.push(c);f.items.push(f.statusPanel);this.callParent()}});
Ext.define("Hc_mdm.view.billbomlist.BillBomListController",{extend:"Hc_Common.view.BaseBillDetailPageController",alias:"controller.billbomlist",selectNode:null,myMask:null,init:function(){var b=this,a=b.getObjList();b.callParent(arguments);b.setInit(b);var c=b.lookupReference("maintainType");c.on("change",b.onChangeMaintainType,b)},setInit:function(g){if(g.view.billNo!=null&&g.view.billNo!=""){g.setBomHeadReadOnly(g,true)}var a=g.lookupReference("bomStatus");a.setDisabled(true);var e=g.lookupReference("versionNo");e.setDisabled(true);var d=g.lookupReference("materialCode");d.setDisabled(true);var h=g.lookupReference("materialName");h.setDisabled(true);var b=g.lookupReference("sizeTypeNo");b.setDisabled(true);var c=g.lookupReference("newBrandNo");c.setDisabled(true);if(g.newbrandno==null){c.setValue(null)}var f=this.lookupReference("newBomPurpose");f.setDisabled(true);if(g.newbompurpose==null){f.setValue(null)}},setBtnStatus:function(b){var a=b.getObjList();var c=b.getConValue("maintainType");if(c=="1"){a.btnDelete.setDisabled(false)}else{a.btnDelete.setDisabled(true)}},gridSelectionChange:function(a,b){this.callParent(arguments);this.setBtnStatus(this)},setPageStatus:function(a){this.callParent(arguments);this.setBtnStatus(this)},gridDataChanged:function(a,b){this.callParent(arguments);this.setBtnStatus(this)},onChangeBomStatus:function(h,c,a,g){var d=this;var i=d.getObjList();var e=d.getConValue("maintainType");if(e=="1"){if(c=="1"){i.btnAdd.setDisabled(true);i.btnDelete.setDisabled(true);i.btnOther1.setDisabled(true);i.btnOther2.setDisabled(true);i.btnBillSave.setDisabled(true);var j=this.lookupReference("newBrandNo");j.setDisabled(true);var f=this.lookupReference("newBomPurpose");f.setDisabled(true);var b=this.lookupReference("bomStatus");b.setDisabled(true);j.setValue(null);f.setValue(null)}else{i.btnAdd.setDisabled(false);i.btnDelete.setDisabled(false);i.btnOther1.setDisabled(false);i.btnOther2.setDisabled(false);i.btnBillSave.setDisabled(false);var j=this.lookupReference("newBrandNo");j.setDisabled(true);var f=this.lookupReference("newBomPurpose");f.setDisabled(true);var b=this.lookupReference("bomStatus");b.setDisabled(true);j.setValue(null);f.setValue(null)}}else{if(e=="2"){i.btnAdd.setDisabled(true);i.btnDelete.setDisabled(true);i.btnOther1.setDisabled(false);i.btnOther2.setDisabled(true);i.btnBillSave.setDisabled(true);var f=this.lookupReference("newBomPurpose");f.setDisabled(false);var j=this.lookupReference("newBrandNo");j.setDisabled(true);j.setValue(null);var b=this.lookupReference("bomStatus");b.setDisabled(true)}else{if(e=="4"){i.btnAdd.setDisabled(true);i.btnDelete.setDisabled(true);i.btnOther1.setDisabled(false);i.btnOther2.setDisabled(true);i.btnBillSave.setDisabled(true);var j=this.lookupReference("newBrandNo");j.setDisabled(false);var f=this.lookupReference("newBomPurpose");f.setDisabled(true);f.setValue(null);var b=this.lookupReference("bomStatus");b.setDisabled(true)}else{i.btnAdd.setDisabled(true);i.btnDelete.setDisabled(true);i.btnOther1.setDisabled(false);i.btnOther2.setDisabled(true);i.btnBillSave.setDisabled(true);var j=this.lookupReference("newBrandNo");j.setDisabled(true);var f=this.lookupReference("newBomPurpose");f.setDisabled(true);var b=this.lookupReference("bomStatus");b.setDisabled(true);j.setValue(null);f.setValue(null)}}}},onChangeMaintainType:function(g,c,a,f){var d=this;var h=d.getObjList();if(d.view.billNo!=null&&d.view.billNo!=""){if(c!="1"){h.btnAdd.setDisabled(true);h.btnDelete.setDisabled(true);h.btnOther1.setDisabled(true);h.btnOther2.setDisabled(true);h.btnBillSave.setDisabled(true)}else{h.btnAdd.setDisabled(false);h.btnDelete.setDisabled(false);h.btnOther2.setDisabled(false);h.btnBillSave.setDisabled(false)}return}var b=d.getConValue("bomStatus");if(c=="1"){if(b=="1"){h.btnAdd.setDisabled(true);h.btnDelete.setDisabled(true);h.btnOther1.setDisabled(false);h.btnOther2.setDisabled(true);h.btnBillSave.setDisabled(true);var i=this.lookupReference("newBrandNo");i.setDisabled(true);var e=this.lookupReference("newBomPurpose");e.setDisabled(true);var b=this.lookupReference("bomStatus");b.setDisabled(true);i.setValue(null);e.setValue(null)}else{h.btnAdd.setDisabled(false);h.btnDelete.setDisabled(false);h.btnOther1.setDisabled(false);h.btnOther2.setDisabled(false);h.btnBillSave.setDisabled(false);var i=this.lookupReference("newBrandNo");i.setDisabled(true);var e=this.lookupReference("newBomPurpose");e.setDisabled(true);var b=this.lookupReference("bomStatus");b.setDisabled(true);i.setValue(null);e.setValue(null)}}else{if(c=="2"){h.btnAdd.setDisabled(true);h.btnDelete.setDisabled(true);h.btnOther1.setDisabled(false);h.btnOther2.setDisabled(true);h.btnBillSave.setDisabled(true);var e=this.lookupReference("newBomPurpose");e.setDisabled(false);var i=this.lookupReference("newBrandNo");i.setDisabled(true);i.setValue(null);var b=this.lookupReference("bomStatus");b.setDisabled(true)}else{if(c=="4"){h.btnAdd.setDisabled(true);h.btnDelete.setDisabled(true);h.btnOther1.setDisabled(false);h.btnOther2.setDisabled(true);h.btnBillSave.setDisabled(true);var i=this.lookupReference("newBrandNo");i.setDisabled(false);var e=this.lookupReference("newBomPurpose");e.setDisabled(true);e.setValue(null);var b=this.lookupReference("bomStatus");b.setDisabled(true)}else{h.btnAdd.setDisabled(true);h.btnDelete.setDisabled(true);h.btnOther1.setDisabled(false);h.btnOther2.setDisabled(true);h.btnBillSave.setDisabled(true);var i=this.lookupReference("newBrandNo");i.setDisabled(true);var e=this.lookupReference("newBomPurpose");e.setDisabled(true);var b=this.lookupReference("bomStatus");b.setDisabled(true);i.setValue(null);e.setValue(null)}}}},onCheckMaterialNo:function(e,d,b){var a=e.getValue().trim();var c=this;c.myMask=new Ext.LoadMask({msg:"正在查询物料["+a+"]是否存在...",target:c.getView()});c.myMask.show();Ext.Ajax.request({url:Hc.mdmPath+"bill_bom_list/checkMaterial.json",params:{materialNo:a},success:function(g,h){c.myMask.hide();var f=g.responseText;if(f=="0"){Hc.alert("物料编码:["+a+"]不存在!");e.setValue("")}}})},onBtnSaveClick:function(b){this.callParent(arguments);var d=this;var c=d.getObj("commonbill");var a=Hc.getField(c,"billNo");d.view.billNo=a.getValue()},onBindData:function(h){var f=this;this.callParent(arguments);if(h!=""){var d=this.lookupReference("menutree").store;d.proxy.extraParams.billNo=h;d.root.data.expanded=true;d.load({scope:this,callback:function(k,j,l){if(this.selectNode!=null){var i=this.lookupReference("menutree");i.expandNode(this.selectNode);i.getSelectionModel().select(this.selectNode)}}})}else{var e=f.getObj("commonbill");var c=Hc.getField(e,"billNo");c.setValue("");var g=this.lookupReference("maintainType");g.setValue(1);var a=this.lookupReference("menutree");var b=a.getRootNode();b.removeAll();f.setNewBillStatus(f)}},initAddData:function(b){this.callParent(arguments);var c=this,a=c.lookupReference("menutree");var f=c.workObject;if(!a.selection){Hc.alert("请先选择一个成品或半成品再增加！");return false}if(f.viewModelKey=="mastergrid"){var h=a.selection.data.orderNo;var g=a.selection.data.billNo;var e=a.selection.data.brandNo;var d=a.selection.data.bomPurpose;b.data.parentOrderNo=h;b.data.brandNo=e;b.data.bomPurpose=d;b.data.billNo=g;b.data.orderNo=-1}},onGrid1BeforeLoad:function(a,b){if(this.callParent(arguments)===false){return false}if(this.lookupReference("menutree").store.getCount()==0){return false}if(this.selectNode==null){return false}},onGridBeforeLoad:function(a,b){if(this.callParent(arguments)===false){return false}if(this.lookupReference("menutree").store.getCount()==0){return false}if(this.selectNode==null){return false}},setCommonToobar:function(a){if(!a||a.length<1){return}a.btnSearch.setVisible(false);a.btnExport.setVisible(false);a.btnPrint.setVisible(false);a.btnOther.setVisible(false);a.btnSave.setVisible(false);a.btnAdd.setVisible(true);a.btnAdd.setText("增加物料");a.btnAdd.setDisabled(true);a.btnDelete.setText("删除物料/替代表");a.btnDelete.setVisible(true);a.btnDelete.setDisabled(true);a.btnOther1.setVisible(true);a.btnOther1.setText("引入BOM");a.btnOther1.setDisabled(true);a.btnOther2.setVisible(true);a.btnOther2.setText("增加半成品BOM");a.btnOther2.setDisabled(true);a.btnOther3.setVisible(true);a.btnOther3.setText("生成替代表");a.btnOther3.setDisabled(false);for(var b=3;b<7;b++){var c=a["commontoolsp"+b];if(c){c.setVisible(false)}}},onBtnBillNewClick:function(a){this.callParent(arguments);var b=this},setNewBillStatus:function(c){var b=c.lookupReference("materialNo");var e=c.lookupReference("maintainType");var f=c.lookupReference("oldBomPurpose");var a=c.lookupReference("oldBrandNo");var d=c.lookupReference("remarks");b.setDisabled(false);e.setDisabled(false);f.setDisabled(false);a.setDisabled(false);d.setDisabled(false)},beforeSave:function(a){this.callParent(arguments);if(a.operateType=="inserted"){a.operateType="updated"}return true},onAfterItemExpand:function(f,b,e,d){var c=this,a=c.lookupReference("menutree");a.getSelectionModel().select(f)},onBtnOther1:function(d){this.callParent(arguments);var h=this;if(!this.getBillItems("materialNo","","请选择物料编码")){return}if(!this.getBillItems("oldBomPurpose",null,"请选择老BOM用途")){return}if(!this.getBillItems("oldBrandNo",null,"请选择老品牌")){return}if(!this.getBillItems("maintainType",null,"请选择维护类型")){return}var i=this.getConValue("materialNo");var e=this.getConValue("maintainType");var b=this.getConValue("bomStatus");var f=this.getConValue("newBomPurpose");var k=this.getConValue("newBrandNo");var a=this.getConValue("oldBomPurpose");var g=this.getConValue("oldBrandNo");var c=this.getConText("oldBomPurpose");var j=this.getConText("oldBrandNo");h.myMask=new Ext.LoadMask({msg:"正在校验物料["+i+"]BOM数据",target:h.getView()});h.myMask.show();Ext.Ajax.request({url:Hc.mdmPath+"bill_bom_list/checkImportBillBom.json",params:{maintainType:e,oldBrandNo:g,materialNo:i,oldBomPurpose:a,newBomPurpose:f,newBrandNo:k},success:function(m,n){h.myMask.hide();var l=m.responseText;if(l!=""){Hc.alert(l);return false}Hc.confirm("是否确定引入["+i+"]BOM清单,引入后不能修改BOM头信息!",function(p){if(p=="no"){return}else{h.setBomHeadReadOnly(h,true);var o=h.lookupReference("menutree");h.myMask=new Ext.LoadMask({msg:"正在引入["+i+"]BOM清单...",target:h.getView()});h.myMask.show();h.loadTreeStore(o)}})}})},setBomHeadReadOnly:function(e,j){var h=e.getObjList();var f=e.lookupReference("materialNo");var b=e.lookupReference("maintainType");var a=e.lookupReference("oldBomPurpose");var g=e.lookupReference("oldBrandNo");var c=e.lookupReference("newBomPurpose");var i=e.lookupReference("newBrandNo");var d=e.lookupReference("remarks");f.setDisabled(j);b.setDisabled(j);a.setDisabled(j);g.setDisabled(j);c.setDisabled(j);i.setDisabled(j);d.setDisabled(j);h.btnOther1.setDisabled(j)},onBtnOther2:function(b){this.callParent(arguments);var c=this,a=c.lookupReference("menutree");if(!a.selection){Hc.alert("请先选择一个成品或半成品再增加！");return false}var d=Ext.create("Ext.window.Window",{title:"请输入半成品编码",height:150,width:400,layout:"form",modal:true,defaultType:"textfield",labelWidth:55,resizable:false,items:[{xtype:"form",layout:"form",items:[{id:"materialNo1111",xtype:"searchhelpfield",fieldLabel:"半成品编码号",name:"materialNo",reference:"materialNo",gridColumns:[{dataIndex:"materialNo",text:"物料编号",flex:0.3},{dataIndex:"materialCode",text:"物料编码",flex:0.3},{dataIndex:"materialName",text:"物料名称",flex:0.3}],allowBlank:false,searchItems:[{fieldLabel:"半成品编号",name:"materialNo",flex:0.5}],isAutoLoad:false,url:Hc.mdmPath+"bas_material/list.json"},{xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo",fieldLabel:"品牌",id:"brandNo",name:"brandNo",reference:"brandNo",allowBlank:false}]}],buttons:[{text:"确定",handler:function(f){if(!(f.up("window").down("form").isValid())){return}var e=f.up("window").down("form").getComponent("materialNo1111").getValue();var g=f.up("window").down("form").getComponent("brandNo").getValue();c.onImportComponent(e,g,c,d)}},{text:"取消",handler:function(){d.close()}}],listeners:{show:function(f,e){}}});d.show()},onImportComponent:function(a,c,b,d){b.myMask=new Ext.LoadMask({msg:"正在查询半成品["+a+"]是否存在...",target:d});b.myMask.show();Ext.Ajax.request({url:Hc.mdmPath+"bill_bom_list/checkMaterial.json",params:{materialNo:a},success:function(h,m){var n=h.responseText;if(n=="0"){Hc.alert("半成品编码:["+a+"]不存在!");b.myMask.hide();return false}else{var j=a;var e=b.getConValue("oldBomPurpose");var g=b.view.billNo;var o=b.lookupReference("menutree");var l=o.selection.data.orderNo;var f=b.getConValue("maintainType");var i=b.getConValue("newBomPurpose");var k=b.getConValue("newBrandNo");Ext.Ajax.request({url:Hc.mdmPath+"bill_bom_list/checkImportBillBom.json",params:{maintainType:f,oldBrandNo:c,materialNo:a,oldBomPurpose:e,newBomPurpose:i,newBrandNo:k,billNo:g,orderNo:l},success:function(q,r){b.myMask.hide();var p=q.responseText;if(p!=""){Hc.alert(p);return false}var s=Ext.create("Hc_Common.store.Base",{fields:["billNo","orderNo","materialNo"],proxy:{url:Hc.mdmPath+"bill_bom_list/importBillBom.json"}});s.proxy.extraParams.materialNo=j;s.proxy.extraParams.oldBomPurpose=e;s.proxy.extraParams.maintainType=f;s.proxy.extraParams.billNo=g;s.proxy.extraParams.orderNo=l;s.proxy.extraParams.oldBrandNo=c;s.load({scope:this,callback:function(v,u,w){if(v.length>0){var t=o.store;t.proxy.extraParams.billNo=g;b.view.billNo=g;o.store.root.data.expanded=true;t.load({scope:this,callback:function(y,x,z){b.myMask.hide();d.close()}})}else{b.myMask.hide();return false}}})}})}}})},sizeFieldBeforeEdit:function(f,h){var g=f._uselist;if(f.mSizeIdx==-1){return}var a=[];for(var d=1;d<21;d++){a.push("f"+d)}if(a.indexOf(h.field)==-1){return}var c=h.record.get("materialNo");if(Ext.isEmpty(c)){return false}var b=Ext.Array.findBy(g,function(e){return e.materialNo==c})},setGridSizeCols:function(b,r){var t=b.mSizeIdx;if(t==-1){return}var l=this,n=Hc.clone(b._headlist),s=Hc.clone(b.vcolumn),g,d,m,p;var q={xtype:"extcombox",displaymember:"sizeCode",valuemember:"sizeCode",displayvalue:Hc.mdmPath+"bas_size/listAll.json"};for(g=1;g<21;g++){p="f"+g;if(!Ext.Array.findBy(n,function(e){return e[p]!="0"})){for(d=0;d<n.length;d++){m=n[d];delete m[p]}}}if(n.length==0){b.reconfigure(r,s);l.gridHeadCls(b);return}try{var c=[],a=s[t],h=b._uselist||[];var o=function(e,i,j){i=i=="0"?"&nbsp;":(i||"&nbsp;");if(j){return{text:i,columns:[j]}}return{dataIndex:e,text:i,width:50,editor:q,renderer:function(w,v,u){if(Ext.Array.findBy(h,function(x){return x.materialNo==u.get("materialNo")&&(x[e]!="0")})){v.tdCls="x-grid-input-cell"}return w==0?"":w}}};if(n.length==1){m=n[0];for(g=1;g<21;g++){p="f"+g;if(!m[p]){continue}c.push(o(p,m[p]))}}else{var f;for(g=1;g<21;g++){f={};p="f"+g;for(d=0;d<n.length;d++){m=n[d];if(!m[p]){continue}if(d==0){f=o(p,m[p])}else{f=o(p,m[p],f)}}if(Ext.Object.isEmpty(f)){continue}c.push(f)}}Ext.Array.insert(s,t,c);Ext.Array.remove(s,a);b.reconfigure(r,s);l.gridHeadCls(b)}catch(k){Hc.alert("创建物料的尺码表头时出错")}},onBtnBillAuditClick:function(a){var b=this;this.callParent(arguments)},onTreeSelectionChange:function(b,a){var g=this,f=g.getObjList();if(!f){return}var h=f.mastergrid.store;var c=f.grid1.store;var e=b.selected.items.length;if(e==1){this.selectNode=b.selected.items[0];var d=b.selected.items[0].data.billNo;var i=b.selected.items[0].data.orderNo;h.proxy.extraParams.billNo=d;h.proxy.extraParams.orderNo=i;h.load();c.proxy.extraParams.billNo=d;c.proxy.extraParams.orderNo=i;c.load()}},loadTreeStore:function(i){var d=this;var g=this.getConValue("materialNo");var a=this.getConValue("oldBomPurpose");var e=this.getConValue("oldBrandNo");var b=this.getConValue("maintainType");var c=this.getConValue("newBomPurpose");var h=this.getConValue("newBrandNo");var f=Ext.create("Hc_Common.store.Base",{fields:["billNo","orderNo","materialNo"],proxy:{url:Hc.mdmPath+"bill_bom_list/importBillBom.json"}});f.proxy.extraParams.materialNo=g;f.proxy.extraParams.oldBomPurpose=a;f.proxy.extraParams.oldBrandNo=e;f.proxy.extraParams.maintainType=b;f.proxy.extraParams.newBomPurpose=c;f.proxy.extraParams.newBrandNo=h;f.load({scope:this,callback:function(m,o,s){if(m.length>0){var n=m[0].data.billNo;var p=m[0].data.bomStatus;var r=m[0].data.versionNo;var k=d.getObj("commonbill");var l=Hc.getField(k,"billNo");l.setValue(n);var q=i.store;q.proxy.extraParams.billNo=n;var j=this.lookupReference("bomStatus");j.setValue(p);var t=this.lookupReference("versionNo");t.setValue(r);d.view.billNo=n;i.store.root.data.expanded=true;q.load({scope:this,callback:function(v,u,w){d.myMask.hide()}})}else{d.myMask.hide()}}})},setRootNode:function(a,d){var c=this.getConValue(d);var b={orderNo:1,leaf:false,expanded:false,materialNo:c};a.setRootNode(b)},getBillItems:function(c,d,e){var a=this.lookupReference(c);if(a){var b=a.getValue();if(b==d){Hc.alert(e);a.focus();return false}else{return true}}else{return false}},getConValue:function(c){var a=this.lookupReference(c);if(a){var b=a.getValue();return b}else{return null}},getConText:function(c){var a=this.lookupReference(c);if(a){var b=a.rawValue;return b}else{return null}},onGrid1BeforeEdit:function(d,f){if(this.callParent(arguments)===false){return false}var e=this;if(e.checkFieldName(f.field)){var c=f.column.getEditor().store;var b=f.record;var a=b.get("newSizeTypeNo");c.proxy.extraParams.sizeTypeNo=a;c.load()}},onGrid1AfterEdit:function(b,d){if(this.callParent(arguments)===false){return false}var c=this;if(c.checkFieldName(d.field)){var a=d.record;var e=d.value;var f=d.field;if(!c.checkSizeValue(e,f,a)){Hc.alert("输入的尺码值:["+e+"]已经存在,不能输入!");a.set(d.field,"");return false}}},checkSizeValue:function(e,f,a){if(e==""||e==null){return true}for(var c=1;c<=20;c++){var b="f"+c.toString();if(b==f){continue}else{var d=a.get(b);if(d==e){return false}else{continue}}}return true},checkFieldName:function(b){for(var c=1;c<=20;c++){var a="f"+c.toString();if(a==b){return true}}return false},onGridBeforeEdit:function(f,b){if(this.callParent(arguments)===false){return false}var h=this;var a=h.getConValue("maintainType");if(a!="1"){return false}var d=h.getObjList();var g=d.grid1.store;var e=b.record;var i=e.get("orderNo");if(b.field=="materialNo"||b.field=="orderNo"){var c=h.onCheckSize(i,g);if(c){Hc.alert("序号:["+i+"]已经生成替代表,请删除替代表在修改物料或者序号!");return false}}},onGridAfterEdit:function(c,e){this.callParent(arguments);var d=this;var a=e.record;if(e.field=="materialNo"){var b=a.get("materialNo");if(e.originalValue==b){return}var d=this;d.myMask=new Ext.LoadMask({msg:"正在查询和校验物料["+b+"]...",target:d.getView()});d.myMask.show();Ext.Ajax.request({url:Hc.mdmPath+"bill_bom_list/checkMaterial.json",params:{materialNo:b},success:function(k,q){d.myMask.hide();var r=k.responseText;if(r=="0"){Hc.alert("物料编码:["+b+"]不存在!");a.set("materialNo","");a.set("materialCode","");a.set("materialName","");a.set("sizeTypeNo","");return}else{var n=b;var h=d.getConValue("oldBomPurpose");var m=d.getConValue("oldBrandNo");var j=d.view.billNo;var s=d.lookupReference("menutree");var p=s.selection.data.orderNo;var i=d.getConValue("maintainType");var l=d.getConValue("newBomPurpose");var o=d.getConValue("newBrandNo");Ext.Ajax.request({url:Hc.mdmPath+"bill_bom_list/checkImportBillBom.json",params:{maintainType:i,oldBrandNo:m,materialNo:b,oldBomPurpose:h,newBomPurpose:l,newBrandNo:o,billNo:j,orderNo:p},success:function(u,v){d.myMask.hide();var t=u.responseText;if(t!=""){Hc.alert(t);a.set("materialNo","");a.set("materialCode","");a.set("materialName","");a.set("sizeTypeNo","");return false}}})}}})}if(e.field=="orderNo"){var g=a.get("orderNo");if(e.originalValue==g){return}var f=a.get("billNo");d.myMask=new Ext.LoadMask({msg:"正在查询和校验序号["+g+"]...",target:d.getView()});d.myMask.show();Ext.Ajax.request({url:Hc.mdmPath+"bill_bom_list/checkBillOrderNo.json",params:{billNo:f,orderNo:g},success:function(i,j){d.myMask.hide();var h=i.responseText;if(h=="1"){Hc.alert("该单据序号["+g+"]已经存在或者主成品的序号默认为1,也不能使用!");a.set("orderNo",e.originalValue);return false}}})}},onCheckSize:function(c,b){var a=b.findExact("orderNo",c);if(a>=0){return true}else{return false}},onBtnOther3:function(a){this.callParent(arguments);var j=this;var e=j.getObjList();if(!e){return}var k=j.getConValue("sizeTypeNo");var b=e.mastergrid.store;var h=e.grid1.store;if(b.getCount()<0){return}for(var d=0;d<b.getCount();d++){var f=b.getAt(d);var l=f.get("orderNo");var c=f.get("sizeTypeNo");if(c==""){Hc.alert("序号:["+l+"]的码组为空,不能生成替代表!");continue}if(k!=c){if(h.getCount()>0){var g=h.findExact("orderNo",l);if(g>=0){continue}}j.addListSize(k,f,h)}}},addListSize:function(b,a,e){var d=e.model;var c=d.create({_flag:"A"});c.data.billNo=a.get("billNo");c.data.orderNo=a.get("orderNo");c.data.materialNo=a.get("materialNo");c.data.materialCode=a.get("materialCode");c.data.materialName=a.get("materialName");c.data.sizeTypeNo=b;c.data.newSizeTypeNo=a.get("sizeTypeNo");e.add(c)},onBtnDeleteClick:function(b){var c=this;var e=this.workObject;var f=c.getObjList();var d=f.mastergrid.store;var a=f.grid1.store;if(e.viewModelKey=="mastergrid"){items=e.getSelection();if(items.length<1){this.callParent(arguments);return}if(a.getCount()<1){this.callParent(arguments);return}Ext.Array.each(items,function(g){var k=g.get("_flag");var j=g.get("orderNo");var h=a.findExact("orderNo",j);if(h>=0){var i=a.getAt(h);if(k=="A"){a.remove(i)}else{i.set("_flag","D")}}})}this.callParent(arguments)},afterCall:function(b,d,a,c){},onBtnCancelClick:function(b){var c=this;var d=c.getObjList();var a=d.grid1.store;a.rejectChanges();this.callParent(arguments)},onBtnAddClick:function(a){var b=this;var c=this.workObject;if(c.viewModelKey=="grid1"){return}this.callParent(arguments)}});
Ext.define("Hc_mdm.view.billbomlist.BillBomListModel",{extend:"Hc_Common.view.BaseBillDetailPageModel",alias:"viewmodel.billbomlist"});
Ext.define("Hc_mdm.view.billmat.BillMat",{extend:"Hc_Common.view.BaseBillListPage",alias:"widget.billmat",controller:"billmat",viewModel:{type:"billmat"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",name:"materialType",fieldLabel:"物料类型",hidden:true,value:1}],gridColumns:[{dataIndex:"maintainType",text:"维护类型",xtype:"bllookupedit",displayvalue:"0=新建:1=修改"},{dataIndex:"materialType",text:"物料类型",xtype:"bllookupedit",displayvalue:"1=原料:2=半成品:3=成品"}],gridModel:"Hc_mdm.model.BillMaterial",gridLoadUrl:Hc.mdmPath+"bill_material/list.json",dtlName:"billmatdtl",showModel:"selftab"});a.callParent()}});
Ext.define("Hc_mdm.view.billmat.BillMatController",{extend:"Hc_Common.view.BaseBillListPageController",alias:"controller.billmat"});
Ext.define("Hc_mdm.view.billmat.BillMatModel",{extend:"Hc_Common.view.BaseBillListPageModel",alias:"viewmodel.billmat"});
Ext.define("Hc_mdm.view.billmatdtl.BillMatDtl",{extend:"Hc_Common.view.BaseBillDetailPage",alias:"widget.billmatdtl",controller:"billmatdtl",viewModel:{type:"billmatdtl"},initComponent:function(){var f=this,g=Ext.create("Hc_mdm.store.BasParentCategory"),d=Ext.create("Hc_mdm.store.BasParentCategory"),e=Ext.create("Hc_mdm.store.BasCategory"),b=Ext.create("Hc_mdm.store.BasCategory");g.proxy.extraParams.materialType=1;d.proxy.extraParams.materialType=1;Ext.apply(f,{billType:"124015",billItems:[{name:"maintainType",bind:{value:"{billRow.maintainType}"},reference:"maintainType",xtype:"extcombox",fieldLabel:"维护类型",displayvalue:"0=新建:1=修改",emptyText:"请选择",allowBlank:false},{name:"materialType",bind:{value:"{billRow.materialType}"},reference:"materialType",xtype:"extcombox",fieldLabel:"物料类型",displayvalue:"1=原料:2=半成品:3=成品",canInput:false,value:1},{name:"billStatus",bind:{value:"{billRow.billStatus}"},xtype:"extcombox",allowBlank:false,fieldLabel:"单据状态",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=bill_status",displaymember:"itemName",valuemember:"itemCode",hidden:true,reference:"billStatus"},{name:"remarks",bind:{value:"{billRow.remarks}"},xtype:"textfield",fieldLabel:"备注"}],billLoadUrl:Hc.mdmPath+"bill_material/list.json",billSaveUrl:Hc.mdmPath+"bill_material/saveMasterCustomerList.json",billAuditUrl:Hc.mdmPath+"bill_material/audit.json",billExportUrl:Hc.mdmPath+"bill_material/do_export.json",billModel:"Hc_mdm.model.BillMaterial",billSubGrid:["mastergrid","grid2"],editStatus:10,gridColumns:[{dataIndex:"lineId",text:"行id",editor:{allowBlank:false},hidden:true},{dataIndex:"materialNo",text:"物料ID"},{dataIndex:"materialCode",text:"物料编码"},{dataIndex:"materialName",text:"物料名称",width:200},{dataIndex:"sizeTypeNo",text:"码组",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_size_type/listAll.json",displaymember:"sizeTypeName",valuemember:"sizeTypeNo",hidden:false,readOnly:true},{dataIndex:"parentCategoryNo",text:"大类",xtype:"bllookupedit",estore:g,gstore:d,displaymember:"categoryName",valuemember:"categoryNo",hidden:false,readOnly:true},{dataIndex:"categoryNo",text:"小类",xtype:"bllookupedit",estore:e,gstore:b,displaymember:"categoryName",valuemember:"categoryNo",hidden:false,readOnly:true},{dataIndex:"normalUnit",text:"基本单位",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",hidden:false,readOnly:true},{dataIndex:"supplyCategoryNo",text:"供货类别",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_supply_category/listAll.json",displaymember:"categoryName",valuemember:"categoryNo",hidden:false,readOnly:true},{dataIndex:"materialSource",text:"物料属性",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=material_source",displaymember:"itemName",valuemember:"itemCode",readOnly:true},{dataIndex:"purchaseUnit",text:"采购单位",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",readOnly:true},{dataIndex:"ifQc",text:"是否质检",xtype:"bllookupedit",displayvalue:"0=否:1=是",readOnly:true},{dataIndex:"remarks",text:"备注",width:140}],gridPrimaryKey:"lineId",gridModel:"Hc_mdm.model.BillMaterialDtl",gridSubGrid:["grid2"],gridLoadUrl:Hc.mdmPath+"bill_material_dtl/list.json",gridSaveUrl:Hc.mdmPath+"bill_material_dtl/batchOperate.json",grid2Columns:[{dataIndex:"lineId",text:"行id(主键、隐藏)",editor:{allowBlank:true},hidden:true},{dataIndex:"materialNo",text:"物料ID"},{dataIndex:"sizeNo",text:"尺码",editor:{allowBlank:false}},{dataIndex:"barcode",text:"条码",editor:{allowBlank:true},width:140,hidden:true}],grid2Model:"Hc_mdm.model.BillMaterialSize",grid2SupGrid:"mastergrid",grid2LoadUrl:Hc.mdmPath+"bill_material_size/list.json",grid2SaveUrl:Hc.mdmPath+"bill_material_size/batchOperate.json",grid2UnionKey:"materialNo,sizeNo"});Ext.apply(f.grid2,{batchUrl:f.grid2SaveUrl});var c={xtype:"form",reference:"editMaterialInfo",layout:{type:"table",columns:4},defaults:{labelAlign:"right",labelWidth:80,width:"100%"},collapsible:false,border:false,items:[{xtype:"textfield",fieldLabel:"行id",bind:{value:"{gridRow.lineId}"},hidden:true},{xtype:"searchhelpfield",reference:"materialNo",fieldLabel:"物料ID",bind:{value:"{gridRow.materialNo}"},allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入20位字母或数字",maxLength:20,enforceMaxLength:true,name:"materialNo",isAutoLoad:false,url:Hc.mdmPath+"bas_material/list.json?materialType=1",otherFields:"materialNo,materialCode,barcodeEan,materialName,specifications,oldCode,inventoryCategory,materialSource,taxRateNo,taxCategory,sizeTypeNo,allowSale,allowDelegate,allowPurchase,allowProduce,materialStatus,enableFlag,codeRuleNo,advicePrice,currencyNo,seasonNo,parentCategoryNo,categoryNo,modelNo,styleNo,productCode,manufacturer,brandNo,developmentTimes,lining,insoles,outerBottom,style,salesChannels,vampMaterial,colorNo,genderType,series,joinOrderMetting,textures,normalUnit,orderNo,remarks,specialCode,supplyCategoryNo,purchaseUnit,purchaseGroup,ifQc",gridColumns:[{dataIndex:"materialNo",text:"物料ID",width:140},{dataIndex:"materialCode",text:"物料编码"},{dataIndex:"materialName",text:"物料名称",width:200}],searchItems:[{name:"materialNo",fieldLabel:"物料ID"},{name:"materialCode",fieldLabel:"物料编码"},{name:"materialName",fieldLabel:"物料名称"}],winTitle:"选择物料",winWidth:480,winHigh:550},{xtype:"textfield",reference:"materialCode",fieldLabel:"物料编码",bind:{value:"{gridRow.materialCode}"},allowBlank:false,name:"materialCode"},{xtype:"textfield",reference:"materialName",fieldLabel:"物料名称",bind:{value:"{gridRow.materialName}"},allowBlank:false,colspan:2,maxLength:60,enforceMaxLength:true,name:"materialName"},{xtype:"extcombox",reference:"sizeTypeNo",fieldLabel:"码组",displayvalue:Hc.mdmPath+"bas_size_type/listAll.json?enableFlag=1",displaymember:"sizeTypeName",valuemember:"sizeTypeNo",bind:{value:"{gridRow.sizeTypeNo}"},allowBlank:false,name:"sizeTypeNo"},{xtype:"combo",fieldLabel:"大类",name:"parentCategoryNo",reference:"parentCategoryNo",editable:false,displayField:"categoryName",valueField:"categoryNo",store:g,renderer:function(i){var h=g.findExact("categoryNo",i);return h>-1?g.getAt(h).data.categoryName:i},listeners:{select:"onChangeParentCategoryNo"},bind:{value:"{gridRow.parentCategoryNo}"},allowBlank:false},{xtype:"ddlfield",fieldLabel:"小类",name:"categoryNo",reference:"categoryNo",editable:false,displayField:"categoryName",valueField:"categoryNo",emptyText:"请先选择大类",store:{type:"basestore",fields:["categoryNo","categoryName"],proxy:{url:Hc.mdmPath+"bill_material_dtl/getCategory.json"},autoLoad:true,listeners:{beforequery:function(){if(!f.lookupReference("parentCategoryNo").getValue()){Ext.Msg.alert("提示","请先选择大类");return false}}}},listeners:{select:"onChangeCategory"},bind:{value:"{gridRow.categoryNo}"},allowBlank:false},{xtype:"extcombox",reference:"supplyCategoryNo",fieldLabel:"供货类别",displayvalue:Hc.mdmPath+"bas_supply_category/listAll.json",displaymember:"categoryName",allowBlank:false,valuemember:"categoryNo",bind:{value:"{gridRow.supplyCategoryNo}"},name:"supplyCategoryNo"},{xtype:"extcombox",reference:"normalUnit",fieldLabel:"基本单位",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",bind:{value:"{gridRow.normalUnit}"},allowBlank:false,name:"normalUnit"},{xtype:"extcombox",reference:"purchaseUnit",fieldLabel:"采购单位",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",bind:{value:"{gridRow.purchaseUnit}"},allowBlank:false,name:"purchaseUnit"},{xtype:"extcombox",reference:"materialSource",fieldLabel:"物料属性",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=material_source",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.materialSource}"},allowBlank:false,name:"materialSource"},{xtype:"numberfield",reference:"advicePrice",fieldLabel:"参考单价",bind:{value:"{gridRow.advicePrice}"},allowBlank:false,name:"advicePrice"},{xtype:"textfield",reference:"specifications",fieldLabel:"规格型号",bind:{value:"{gridRow.specifications}"},allowBlank:true,maxLength:30,enforceMaxLength:true,name:"specifications"},{xtype:"extcombox",reference:"purchaseGroup",fieldLabel:"采购组",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=purchaseGroup",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.purchaseGroup}"},allowBlank:false,name:"purchaseGroup"},{xtype:"extcombox",reference:"taxRateNo",fieldLabel:"税率",displayvalue:Hc.mdmPath+"bas_tax_rate/listAll.json",displaymember:"taxRateName",valuemember:"taxRateNo",bind:{value:"{gridRow.taxRateNo}"},allowBlank:false,name:"taxRateNo"},{xtype:"textfield",reference:"oldCode",fieldLabel:"旧物料编码",bind:{value:"{gridRow.oldCode}"},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入30位字母或数字",maxLength:30,enforceMaxLength:true,name:"oldCode"},{xtype:"textfield",reference:"barcodeEan",fieldLabel:"国际条码",bind:{value:"{gridRow.barcodeEan}"},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入20位字母或数字",maxLength:20,enforceMaxLength:true,name:"barcodeEan"},{xtype:"extcombox",reference:"currencyNo",fieldLabel:"币别",displayvalue:Hc.mdmPath+"bas_currency/listAll.json",displaymember:"currencyName",valuemember:"currencyNo",bind:{value:"{gridRow.currencyNo}"},allowBlank:false,name:"currencyNo",canInput:false},{xtype:"extcombox",reference:"ifQc",fieldLabel:"是否质检",allowBlank:false,displayvalue:"1=是:0=否",name:"ifQc",bind:{value:"{gridRow.ifQc}"}},{xtype:"textfield",reference:"remarks",fieldLabel:"备注",bind:{value:"{gridRow.remarks}"},maxLength:60,enforceMaxLength:true,name:"remarks"}]};c.layout.columns=4;var a={xtype:"tabpanel",region:"south",reference:"tabpanel",height:180,split:true,autoDestroy:true,tabPosition:"top",autoScroll:true,border:false,items:[{layout:"fit",index:0,items:[c],title:"物料明细",autoScroll:true,border:0,bodyPadding:3},{layout:"fit",index:1,items:[f.grid2],title:"尺码明细",autoScroll:true,border:0}]};f.otherItems=[a];f.callParent()}});
Ext.define("Hc_mdm.view.billmatdtl.BillMatDtlController",{extend:"Hc_Common.view.BaseBillDetailPageController",alias:"controller.billmatdtl",gridEditingList:[],init:function(){this.callParent(arguments);var d=this,b=d.getObjList(),c=b.commonbill,a=c.getRecord();if(b.mastergrid){b.mastergrid.store.on("update",d.onBillGridDataChange,d);b.mastergrid.store.on("datachanged",d.onBillGridDataChange,d)}d.lookupReference("sizeTypeNo").on("beforequery",function(){var e=d.lookupReference("grid2").store.count();if(e>0){Hc.alert("请先删除[尺码明细]再更换码组")}return(e==0)});d.setComponentReadOnly("tabpanel",true);if(d.lookupReference("brandNo")){d.lookupReference("brandNo").on("select","onChangeBrandNo",d)}d.gridEditingList=[];d.lookupReference("btnOther1").setText("批量尺码");d.lookupReference("btnOther1").setHidden(false);if(!a){return}a.set("materialType","1")},beforeCopy:function(a){var b=this;var c=b.lookupReference("maintainType").getValue();if(c==1){Hc.alert("维护类型为【修改】状态，不允许复制!");return false}Ext.Ajax.request({url:Hc.mdmPath+"bas_system_code/getSheetIdCode.json",method:"GET",params:{billtypeNo:"12401002"},success:function(e){var d=JSON.parse(e.responseText);if(d.result.resultCode=="0"){var f=d.sheetIdCode;a.set("materialNo",f);a.set("materialCode","待编码");if(b.workObject.hasOrderNo){var g=b.workObject.store,h=(g.max("orderNo")||0)+1;a.set("orderNo",h)}}else{Ext.MessageBox.alert("提示","申请物料编号失败!");return false}},failure:function(d,e){Ext.MessageBox.show({title:"错误提示",msg:d.responseText,height:300,width:400})}});return true},onBtnOther1:function(d){var e=this;var a=e.lookupReference("grid2").store;var c=e.lookupReference("materialNo").value;var b=a.model;var f=e.lookupReference("sizeTypeNo").value;var g=e.getObjList()["commonbill"].getRecord().get("billNo");if(Ext.isEmpty(f)){Hc.alert("请先输入码组!");return}if(a.getCount()>0){Hc.alert("尺码明细已经存在尺码，不允许导入!");return}Ext.Ajax.request({url:Hc.mdmPath+"bas_size/listAll.json",method:"GET",params:{sizeTypeNo:f},success:function(j){var h=JSON.parse(j.responseText);if(h.result.resultCode=="0"&&h.list&&h.list.length>0){var k=h.list;for(var l=0;l<k.length;l++){var m=b.create(k[l]);m.set("_flag","A");m.set("sizeNo",k[l].sizeNo);m.set("barcode",k[l].sizeNo);m.set("materialNo",c);m.set("billNo",g);a.add(m)}}else{Ext.MessageBox.alert("提示","没有找到码组为【"+f+"】的信息!")}},failure:function(h,i){Ext.MessageBox.show({title:"错误提示",msg:h.responseText,height:300,width:400})}})},onBtnBillNewClick:function(a){var b=this;b.callParent(arguments);b.lookupReference("btnOther1").setDisabled(false);b.lookupReference("materialType").setValue("1")},setComponentReadOnly:function(a,b){var c=this;if(!c.lookupReference(a)||!c.lookupReference(a).query){return}var d=c.lookupReference(a).query("textfield,numberfield,datefield,combo");var e=c.lookupReference("billStatus").value;if(e&&e=="20"){c.lookupReference("btnOther1").setDisabled(true);c.lookupReference("materialNo").setReadOnly(true);c.lookupReference("maintainType").setReadOnly(true);return}Ext.each(d,function(f){if(f.name=="currencyNo"){f.setReadOnly(true)}else{f.setReadOnly(b)}})},afterSave:function(a,b){var c=this;c.callParent(arguments);c.setComponentReadOnly("tabpanel",true)},onChangeBrandNo:function(b,a){this.setSpecialCodeValue(null,null)},onChangeParentCategoryNo:function(g,f){var d=this.lookupReference("parentCategoryNo").getValue();var c=this.lookupReference("parentCategoryNo");var h=this.lookupReference("categoryNo");if(d){h.setValue("");var b=c.store.findBy(function(i,j){return i.get("categoryNo")==d});var a=c.store.getAt(b);var e=a.get("categoryNo");h.store.proxy.extraParams.categoryNo=e;h.store.load()}},onChangeCategory:function(d,c,b){var a=this.lookupReference("parentCategoryNo").getValue();if(!a){d.setValue("");Ext.Msg.alert("提示","请先选择大类");return false}},onChangeModelNo:function(c,b){var e=this.lookupReference("modelNo").getValue();var a=this.lookupReference("styleNo");if(e){a.setValue("");a.store.proxy.extraParams.modelNo=e;a.store.load();var d=this.lookupReference("mastergrid").getSelection()[0];d.set("styleNo","")}},onChangeStyleNo:function(c,b,a){var e=this.lookupReference("modelNo").getValue();if(!e){c.setValue("");var d=this.lookupReference("mastergrid").getSelection()[0];d.set("styleNo","");Ext.Msg.alert("提示","请先选择型体");return false}},onGridBeforeEdit:function(h,l){if(this.gridCannotEditKeyField(l)===false){return false}if(l.field=="categoryNo"){var i=l.record;var f=i.get("parentCategoryNo");var a=i.get("categoryNo");if(f==""){Ext.Msg.alert("提示","请先选择大类");return false}else{var n=this.lookupReference("parentCategoryNo");var b=n.store.findBy(function(e,r){return e.get("categoryNo")==f});var d=n.store.getAt(b);var k=d.get("categoryId");var o=l.column.getEditor().store;var p=o.proxy.extraParams.parentCategoryId;var j=n.store.findBy(function(e,r){return e.get("categoryId")==p});var i=n.store.getAt(j);var m=null;if(i){m=i.get("categoryNo")}o.proxy.extraParams.parentCategoryId=k;o.on("load",function(){l.column.getEditor().setValue(a)});o.load()}}if(l.field=="styleNo"){var i=l.record;var c=i.get("modelNo");var g=i.get("styleNo");if(c==""){Ext.Msg.alert("提示","请先选择型体");return false}else{var o=l.column.getEditor().store;var q=o.proxy.extraParams.modelNo;if(c!=q){o.proxy.extraParams.modelNo=c;o.on("load",function(){l.column.getEditor().setValue(g)});o.load()}}}},initAddData:function(e){var d=this,b=d.getObjList(),f=d.workObject;if(d.callParent(arguments)===false){return false}if(d.lookupReference("maintainType").getValue()==""){Hc.alert("请先选择[维护类型]");return false}if(f.viewModelKey=="mastergrid"&&d.gridEditingList.length>0){Hc.alert("有一笔数据正在编辑，不能新增主表记录");return false}d.lookupReference("maintainType").setReadOnly(true);if(f.viewModelKey=="mastergrid"){var g=d.lookupReference("maintainType").value;if(g==1){return}Ext.Ajax.request({url:Hc.mdmPath+"bas_system_code/getSheetIdCode.json",method:"GET",params:{billtypeNo:"12401501"},success:function(i){var h=JSON.parse(i.responseText);if(h.result.resultCode=="0"){var j=h.sheetIdCode;e.set("materialNo",j);e.set("materialCode","待编码");e.set("currencyNo","RMB")}else{e.set("materialCode","待编码");Ext.MessageBox.alert("提示","申请物料编号失败!")}},failure:function(h,i){Ext.MessageBox.show({title:"错误提示",msg:h.responseText,height:300,width:400})}})}if(f.supGrid){var c=b[f.supGrid].getSelection()[0];if(!c){Hc.alert("主表没有选中记录时，从表不能新增记录");return false}if(d.lookupReference("maintainType").getValue()=="1"&&(d.lookupReference("billNo").getValue()==""||d.lookupReference("billNo").getValue()=="0")){Hc.alert("请先填写[物料编号]或者[物料编码]");return false}if(!c.phantom){var a=b[f.supGrid].primaryKey;e.set(a,c.get(a))}e.set("materialNo",c.get("materialNo"))}},onBillGridDataChange:function(c){var d=this,b="mastergrid",a=d.getDirtyIndex(c);if(a>-1){Ext.Array.include(d.gridEditingList,b)}else{Ext.Array.remove(d.gridEditingList,b)}},onGridSelectionChange:function(c,f,a,b){var d=this;d.callParent(arguments);if(d.lookupReference("mastergrid").getSelection()&&d.lookupReference("mastergrid").getSelection().length>0){d.setComponentReadOnly("tabpanel",false);var g=d.lookupReference("billStatus").value;if(g<20){d.lookupReference("materialNo").setReadOnly(d.lookupReference("maintainType").getValue()=="0")}}else{d.setComponentReadOnly("tabpanel",true)}if(d.lookupReference("mastergrid").store.getCount()<=0){d.lookupReference("maintainType").setReadOnly(false)}else{d.lookupReference("maintainType").setReadOnly(true)}},onGrid2BeforeLoad:function(a,b){if(this.callParent(arguments)===false){return false}var c=this.lookupReference("mastergrid").getSelection()[0];if(c){a.proxy.extraParams.materialNo=c.get("materialNo")}},getSizeNos:function(){var e=this,d=e.getObjList()["grid2"],b=d.store,c=b.model;var a=e.lookupReference("sizeTypeNo").value;Ext.Ajax.request({url:Hc.mdmPath+"bill_material_size/listAll.json",method:"GET",params:{basSizeType:a},success:function(h){var g=JSON.parse(h.responseText);if(g.result.resultCode=="0"&&g.list&&g.list.length>0){var j=g.list;for(var k=0;k<j.length;k++){var f=c.create(j[k]);b.add(f)}}else{Ext.MessageBox.alert("提示","配码明细加载不正确!")}},failure:function(f){Hc.show({title:"错误提示",msg:f.responseText,height:300,width:500})}})},beforeSave:function(b){var g=this;g.callParent(arguments);if(!(g.getObj("editMaterialInfo").isValid())){return false}var l=g.getObjList()["mastergrid"].store;var h=true;var n=true;for(var d=0;d<l.getCount();d++){var m=l.getAt(d).get("materialCode");var j=l.getAt(d).get("advicePrice");if(j<=0){h=false;break}if(m=="待编码"){var f=l.getAt(d).get("materialNo");l.getAt(d).set("materialCode",f)}}if(h==false){Hc.alert("参考单价必须大于零!");return false}var k=g.getObjList()["grid2"].store,c=g.lookupReference("sizeTypeNo").store,e=g.lookupReference("sizeTypeNo").getValue(),a=c.getAt(c.findExact("sizeTypeNo",e));if(a&&a.get("sizeTypeName")=="无尺码"){return true}else{if(k.getCount()<=0){Hc.alert("请录入尺码明细!");return false}}return true},onGridAfterEdit:function(b,h){var d=this;if(h.field=="productCode"){onProdTxtAfterEdit(null,null)}if(h.field=="brandNo"){d.setSpecialCodeValue(b,h)}if(h.field=="parentCategoryNo"){var c=h.originalValue;var g=h.value;if(c!=g){var a=h.record;a.set("categoryNo","")}}if(h.field=="modelNo"){var i=h.originalValue;var f=h.value;if(i!=f){var a=h.record;a.set("styleNo","")}}this.checkKeyValue(h)},setSpecialCodeValue:function(c,d){var b=Ext.create("Hc_Common.store.Base",{fields:["brandCategory","brandCname","brandCode","brandNo","specialCode"],proxy:{url:Hc.mdmPath+"bas_brand/listAll.json"}});if(d==null){b.proxy.extraParams.brandNo=this.lookupReference("brandNo").getValue();b.reload({scope:this,callback:function(g,i,f){if(g.length>0){this.lookupReference("specialCode").setValue(g[0].data.specialCode);var h=this.lookupReference("mastergrid").getSelection()[0];h.set("specialCode",g[0].data.specialCode)}}})}else{var a=d.record;var e=this.lookupReference("mastergrid").getSelection()[0];b.proxy.extraParams.brandNo=a.get("brandNo");b.reload({scope:this,callback:function(g,h,f){if(g.length>0){a.set("specialCode",g[0].data.specialCode)}else{a.set("brandNo","");a.set("specialCode","");Hc.alert("不存在此品牌");return}}})}},onGrid2AfterEdit:function(b,d){var c=this;if(d.field=="sizeNo"){var e=d.originalValue,a=d.value;if(a){c.checkSizeNo(e,a,d)}}this.checkKeyValue(d)},onGridLoaded:function(c,b,a,d){var e=this,c=e.getObjList()["mastergrid"].store;e.callParent(arguments);if(c&&c.getCount()>0){e.lookupReference("maintainType").setReadOnly(true)}else{e.lookupReference("maintainType").setReadOnly(false)}},checkSizeNo:function(d,a,b){var c=b.record;Ext.Ajax.request({url:Hc.mdmPath+"bas_size/listAll.json",method:"GET",params:{sizeNo:a},success:function(f){var e=JSON.parse(f.responseText);if(e.result.resultCode=="0"&&e.list&&e.list.length>0){var g=e.list;c.set("barcode",a)}else{c.set("sizeNo",d);Ext.MessageBox.alert("提示","尺码不存在!")}},failure:function(e,f){Ext.MessageBox.show({title:"错误提示",msg:e.responseText,height:300,width:400})}})}});
Ext.define("Hc_mdm.view.billmatdtl.BillMatDtlModel",{extend:"Hc_Common.view.BaseBillDetailPageModel",alias:"viewmodel.billmatdtl"});
Ext.define("Hc_mdm.view.billmaterial.BillMaterial",{extend:"Hc_Common.view.BaseBillListPage",alias:"widget.billmaterial",controller:"billmaterial",viewModel:{type:"billmaterial"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",name:"materialType",fieldLabel:"物料类型",hidden:true,value:3}],gridColumns:[{dataIndex:"maintainType",text:"维护类型",xtype:"bllookupedit",displayvalue:"0=新建:1=修改"},{dataIndex:"materialType",text:"物料类型",xtype:"bllookupedit",displayvalue:"1=原料:2=半成品:3=成品"}],gridModel:"Hc_mdm.model.BillMaterial",gridLoadUrl:Hc.mdmPath+"bill_material/list.json",dtlName:"billmaterialdtl",showModel:"selftab"});a.callParent()}});
Ext.define("Hc_mdm.view.billmaterial.BillMaterialController",{extend:"Hc_Common.view.BaseBillListPageController",alias:"controller.billmaterial"});
Ext.define("Hc_mdm.view.billmaterial.BillMaterialModel",{extend:"Hc_Common.view.BaseBillListPageModel",alias:"viewmodel.billmaterial"});
Ext.define("Hc_mdm.view.billmaterialdtl.BillMaterialDtl",{extend:"Hc_Common.view.BaseBillDetailPage",alias:"widget.billmaterialdtl",controller:"billmaterialdtl",viewModel:{type:"billmaterialdtl"},initComponent:function(){var f=this,g=Ext.create("Hc_mdm.store.BasParentCategory"),d=Ext.create("Hc_mdm.store.BasParentCategory"),e=Ext.create("Hc_mdm.store.BasCategory"),b=Ext.create("Hc_mdm.store.BasCategory");g.proxy.extraParams.materialType=3;d.proxy.extraParams.materialType=3;Ext.apply(f,{billType:"124005",billItems:[{name:"maintainType",bind:{value:"{billRow.maintainType}"},reference:"maintainType",xtype:"extcombox",fieldLabel:"维护类型",displayvalue:"0=新建:1=修改",emptyText:"请选择",allowBlank:false},{name:"materialType",bind:{value:"{billRow.materialType}"},reference:"materialType",xtype:"extcombox",fieldLabel:"物料类型",displayvalue:"1=原料:2=半成品:3=成品",canInput:false},{name:"billStatus",bind:{value:"{billRow.billStatus}"},xtype:"extcombox",allowBlank:false,fieldLabel:"单据状态",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=bill_status",displaymember:"itemName",valuemember:"itemCode",hidden:true,reference:"billStatus"},{name:"remarks",bind:{value:"{billRow.remarks}"},xtype:"textfield",fieldLabel:"备注"}],billLoadUrl:Hc.mdmPath+"bill_material/list.json",billSaveUrl:Hc.mdmPath+"bill_material/saveMasterCustomerList.json",billAuditUrl:Hc.mdmPath+"bill_material/audit.json",billExportUrl:Hc.mdmPath+"bill_material/do_export.json",billModel:"Hc_mdm.model.BillMaterial",billSubGrid:["mastergrid","grid2"],editStatus:10,gridColumns:[{dataIndex:"lineId",text:"行id",editor:{allowBlank:false},hidden:true},{dataIndex:"materialNo",text:"物料ID"},{dataIndex:"materialCode",text:"物料编码"},{dataIndex:"materialName",text:"物料名称",hidden:false,width:140},{dataIndex:"barcodeEan",text:"国际条码",editor:{allowBlank:true},hidden:true},{dataIndex:"brandNo",text:"品牌",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandEname",valuemember:"brandNo",readOnly:true},{dataIndex:"specialCode",text:"特征码"},{dataIndex:"sizeTypeNo",text:"码组",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_size_type/listAll.json",displaymember:"sizeTypeName",valuemember:"sizeTypeNo",hidden:false,readOnly:true},{dataIndex:"parentCategoryNo",text:"大类",xtype:"bllookupedit",estore:g,gstore:d,displaymember:"categoryName",valuemember:"categoryNo",hidden:false,readOnly:true},{dataIndex:"categoryNo",text:"小类",xtype:"bllookupedit",estore:e,gstore:b,displaymember:"categoryName",valuemember:"categoryNo",hidden:false,readOnly:true},{dataIndex:"colorNo",text:"颜色",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_color/listAll.json",displaymember:"colorName",valuemember:"colorCode",hidden:false,readOnly:true},{dataIndex:"seasonNo",text:"年季",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=season_no",displaymember:"itemName",valuemember:"itemCode",hidden:false,readOnly:true},{dataIndex:"modelNo",text:"型体"},{dataIndex:"styleNo",text:"款号"},{dataIndex:"normalUnit",text:"基本单位",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",hidden:false,readOnly:true},{dataIndex:"oldCode",text:"旧物料编码"},{dataIndex:"materialSource",text:"物料属性",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=material_source",displaymember:"itemName",valuemember:"itemCode",readOnly:true},{dataIndex:"taxRateNo",text:"税率",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_tax_rate/listAll.json",displaymember:"taxRateName",valuemember:"taxRateNo",readOnly:true},{dataIndex:"advicePrice",text:"参考单价",editor:{allowBlank:false},hidden:true},{dataIndex:"currencyNo",text:"币别",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_currency/listAll.json",displaymember:"currencyName",valuemember:"currencyNo",editor:{allowBlank:false},hidden:true},{dataIndex:"productCode",text:"客户产品货号"},{dataIndex:"remarks",text:"备注",width:140}],gridPrimaryKey:"lineId",gridModel:"Hc_mdm.model.BillMaterialDtl",gridSubGrid:["grid2"],gridLoadUrl:Hc.mdmPath+"bill_material_dtl/list.json",grid2Columns:[{dataIndex:"lineId",text:"行id",editor:{allowBlank:true},hidden:true},{dataIndex:"materialNo",text:"物料ID"},{dataIndex:"sizeNo",text:"尺码",width:140,editor:{allowBlank:false}},{dataIndex:"barcode",text:"条码",width:140,hidden:true}],grid2Model:"Hc_mdm.model.BillMaterialSize",grid2SupGrid:"mastergrid",grid2PrimaryKey:"lineId",grid2LoadUrl:Hc.mdmPath+"bill_material_size/list.json",grid2UnionKey:"materialNo,sizeNo"});var c={xtype:"form",reference:"editMaterialInfo",layout:{type:"table",columns:4},defaults:{labelAlign:"right",labelWidth:80,width:"100%"},collapsible:false,border:false,items:[{xtype:"textfield",fieldLabel:"行id",bind:{value:"{gridRow.lineId}"},hidden:true},{xtype:"searchhelpfield",reference:"materialNo",fieldLabel:"物料ID",bind:{value:"{gridRow.materialNo}"},allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入20位字母或数字",maxLength:20,enforceMaxLength:true,name:"materialNo",isAutoLoad:false,url:Hc.mdmPath+"bas_material/list.json?materialType=1",otherFields:"materialNo,materialCode,barcodeEan,materialName,specifications,oldCode,inventoryCategory,materialSource,taxRateNo,taxCategory,sizeTypeNo,allowSale,allowDelegate,allowPurchase,allowProduce,materialStatus,enableFlag,codeRuleNo,advicePrice,currencyNo,seasonNo,parentCategoryNo,categoryNo,modelNo,styleNo,productCode,manufacturer,brandNo,developmentTimes,lining,insoles,outerBottom,style,salesChannels,vampMaterial,colorNo,genderType,series,joinOrderMetting,textures,normalUnit,orderNo,remarks,specialCode,ifQc",gridColumns:[{dataIndex:"materialNo",text:"物料ID",width:140},{dataIndex:"materialCode",text:"物料编码"},{dataIndex:"materialName",text:"物料名称",width:200}],searchItems:[{name:"materialNo",fieldLabel:"物料ID"},{name:"materialCode",fieldLabel:"物料编码"},{name:"materialName",fieldLabel:"物料名称"}],winTitle:"选择物料",winWidth:480,winHigh:550},{xtype:"textfield",reference:"materialCode",fieldLabel:"物料编码",bind:{value:"{gridRow.materialCode}"},allowBlank:false,emptyText:"待编码",name:"materialCode"},{xtype:"textfield",reference:"materialName",fieldLabel:"物料名称",bind:{value:"{gridRow.materialName}"},allowBlank:false,colspan:2,enforceMaxLength:true},{xtype:"textfield",reference:"barcodeEan",fieldLabel:"国际条码",bind:{value:"{gridRow.barcodeEan}"},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入20位字母或数字",maxLength:20,enforceMaxLength:true,allowBlank:false},{xtype:"extcombox",reference:"brandNo",fieldLabel:"品牌",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandEname",valuemember:"brandNo",bind:{value:"{gridRow.brandNo}"},allowBlank:false},{fieldLabel:"特征码",canInput:false,xtype:"textfield",bind:{value:"{gridRow.specialCode}"},reference:"specialCode",canInput:false,name:"specialCode"},{xtype:"extcombox",reference:"sizeTypeNo",fieldLabel:"码组",displayvalue:Hc.mdmPath+"bas_size_type/listAll.json",displaymember:"sizeTypeName",valuemember:"sizeTypeNo",bind:{value:"{gridRow.sizeTypeNo}"},allowBlank:false},{xtype:"combo",fieldLabel:"大类",name:"parentCategoryNo",reference:"parentCategoryNo",editable:false,displayField:"categoryName",valueField:"categoryNo",store:g,renderer:function(i){var h=g.findExact("categoryNo",i);return h>-1?g.getAt(h).data.categoryName:i},listeners:{select:"onChangeParentCategoryNo"},bind:{value:"{gridRow.parentCategoryNo}"},allowBlank:false},{xtype:"combo",fieldLabel:"小类",name:"categoryNo",reference:"categoryNo",editable:false,displayField:"categoryName",valueField:"categoryNo",emptyText:"请先选择大类",store:{type:"basestore",fields:["categoryNo","categoryName"],proxy:{url:Hc.mdmPath+"bill_material_dtl/getCategory.json"},autoLoad:true,listeners:{beforequery:function(){if(!f.lookupReference("parentCategoryNo").getValue()){Ext.Msg.alert("提示","请先选择大类");return false}}}},listeners:{select:"onChangeCategory"},bind:{value:"{gridRow.categoryNo}"},allowBlank:false},{xtype:"extcombox",reference:"colorNo",fieldLabel:"颜色",displayvalue:Hc.mdmPath+"bas_color/listAll.json",displaymember:"colorName",valuemember:"colorCode",bind:{value:"{gridRow.colorNo}"},allowBlank:false},{xtype:"extcombox",reference:"seasonNo",fieldLabel:"年季",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=season_no",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.seasonNo}"},allowBlank:false},{xtype:"searchhelpfield",fieldLabel:"款号",name:"styleNo",reference:"styleNo",url:Hc.mdmPath+"bas_style/list.json",otherFields:"modelNo",reference:"styleNo",isAutoLoad:false,gridColumns:[{dataIndex:"styleNo",text:"款号编号",flex:0.5},{dataIndex:"styleName",text:"款号名称",flex:0.5}],searchItems:[{name:"styleNo",fieldLabel:"款号编号"},{name:"styleName",fieldLabel:"款号名称"}],winTitle:"选择款号",winWidth:480,winHigh:550,bind:{value:"{gridRow.styleNo}"},allowBlank:false},{xtype:"textfield",fieldLabel:"型体",name:"modelNo",reference:"modelNo",bind:{value:"{gridRow.modelNo}"},allowBlank:false},{xtype:"extcombox",reference:"lining",fieldLabel:"里料",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=lining",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.lining}"},allowBlank:false},{xtype:"extcombox",reference:"manufacturer",fieldLabel:"制造商",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=manufacturer",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.manufacturer}"},allowBlank:false},{xtype:"extcombox",reference:"genderType",fieldLabel:"男/女鞋",bind:{value:"{gridRow.genderType}"},displayvalue:"F=女:M=男",allowBlank:false},{xtype:"extcombox",reference:"style",fieldLabel:"风格",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=style",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.style}"},allowBlank:false},{xtype:"extcombox",reference:"series",fieldLabel:"系列",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=series",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.series}"},allowBlank:false},{xtype:"textfield",reference:"vampMaterial",fieldLabel:"帮面材料",bind:{value:"{gridRow.vampMaterial}"},maxLength:255,enforceMaxLength:true,allowBlank:false},{xtype:"textfield",reference:"insoles",fieldLabel:"衬里/内垫",bind:{value:"{gridRow.insoles}"},allowBlank:false},{xtype:"textfield",reference:"outerBottom",fieldLabel:"外底",bind:{value:"{gridRow.outerBottom}"},maxLength:40,enforceMaxLength:true,allowBlank:false},{xtype:"extcombox",reference:"textures",fieldLabel:"材质类别",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=textures",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.textures}"},allowBlank:false},{xtype:"extcombox",reference:"salesChannels",fieldLabel:"销售类型",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=sales_channels",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.salesChannels}"},allowBlank:false,name:"salesChannels"},{xtype:"textfield",reference:"productCode",fieldLabel:"客户产品货号",bind:{value:"{gridRow.productCode}"},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入20位字母或数字",maxLength:20,enforceMaxLength:true,allowBlank:true},{xtype:"extcombox",reference:"normalUnit",fieldLabel:"基本单位",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",bind:{value:"{gridRow.normalUnit}"},allowBlank:false},{xtype:"extcombox",reference:"materialSource",fieldLabel:"物料属性",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=material_source",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.materialSource}"},allowBlank:false},{xtype:"numberfield",reference:"advicePrice",fieldLabel:"参考单价",bind:{value:"{gridRow.advicePrice}"},allowBlank:false},{xtype:"textfield",reference:"specifications",fieldLabel:"规格型号",bind:{value:"{gridRow.specifications}"},allowBlank:true,maxLength:30,enforceMaxLength:true},{xtype:"extcombox",reference:"taxRateNo",fieldLabel:"税率",displayvalue:Hc.mdmPath+"bas_tax_rate/listAll.json",displaymember:"taxRateName",valuemember:"taxRateNo",bind:{value:"{gridRow.taxRateNo}"},allowBlank:false},{xtype:"textfield",reference:"oldCode",fieldLabel:"旧物料编码",bind:{value:"{gridRow.oldCode}"},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入30位字母或数字",maxLength:30,enforceMaxLength:true},{xtype:"numberfield",reference:"developmentTimes",fieldLabel:"开发次数",bind:{value:"{gridRow.developmentTimes}"},allowBlank:false},{xtype:"extcombox",reference:"currencyNo",fieldLabel:"币别",displayvalue:Hc.mdmPath+"bas_currency/listAll.json",displaymember:"currencyName",valuemember:"currencyNo",bind:{value:"{gridRow.currencyNo}"},canInput:false,name:"currencyNo"},{xtype:"textfield",reference:"remarks",fieldLabel:"备注",bind:{value:"{gridRow.remarks}"},maxLength:60,colspan:3,enforceMaxLength:true}]};c.layout.columns=4;var a={xtype:"tabpanel",reference:"tabpanel",region:"south",height:280,split:true,autoDestroy:true,tabPosition:"top",autoScroll:true,border:false,items:[{layout:"fit",index:0,items:[c],title:"物料明细",autoScroll:true,border:0,bodyPadding:3},{layout:"fit",index:1,items:[f.grid2],title:"尺码明细",autoScroll:true,border:0}]};f.otherItems=[a];f.callParent()}});
Ext.define("Hc_mdm.view.billmaterialdtl.BillMaterialDtlController",{extend:"Hc_Common.view.BaseBillDetailPageController",alias:"controller.billmaterialdtl",gridEditingList:[],init:function(){this.callParent(arguments);var d=this,b=d.getObjList(),c=b.commonbill,a=c.getRecord();if(b.mastergrid){b.mastergrid.store.on("update",d.onBillGridDataChange,d);b.mastergrid.store.on("datachanged",d.onBillGridDataChange,d)}d.lookupReference("sizeTypeNo").on("beforequery",function(){var e=d.lookupReference("grid2").store.count();if(e>0){Hc.alert("请先删除[尺码明细]再更换码组")}return(e==0)});d.setComponentReadOnly("tabpanel",true);if(d.lookupReference("brandNo")){d.lookupReference("brandNo").on("select","onChangeBrandNo",d)}d.gridEditingList=[];d.lookupReference("btnOther1").setText("批量尺码");d.lookupReference("btnOther1").setHidden(false);if(!a){return}a.set("materialType","3")},beforeCopy:function(a){var b=this;var c=b.lookupReference("maintainType").getValue();if(c==1){Hc.alert("维护类型为【修改】状态，不允许复制!");return false}Ext.Ajax.request({url:Hc.mdmPath+"bas_system_code/getSheetIdCode.json",method:"GET",params:{billtypeNo:"12401002"},success:function(e){var d=JSON.parse(e.responseText);if(d.result.resultCode=="0"){var f=d.sheetIdCode;a.set("materialNo",f);a.set("materialCode","待编码");if(b.workObject.hasOrderNo){var g=b.workObject.store,h=(g.max("orderNo")||0)+1;a.set("orderNo",h)}}else{Ext.MessageBox.alert("提示","申请物料编号失败!");return false}},failure:function(d,e){Ext.MessageBox.show({title:"错误提示",msg:d.responseText,height:300,width:400})}});return true},onBtnOther1:function(d){var e=this;var a=e.lookupReference("grid2").store;var c=e.lookupReference("materialNo").value;var b=a.model;var f=e.lookupReference("sizeTypeNo").value;var g=e.getObjList()["commonbill"].getRecord().get("billNo");if(Ext.isEmpty(f)){Hc.alert("请先输入码组!");return}if(a.getCount()>0){Hc.alert("尺码明细已经存在尺码，不允许导入!");return}Ext.Ajax.request({url:Hc.mdmPath+"bas_size/listAll.json",method:"GET",params:{sizeTypeNo:f},success:function(j){var h=JSON.parse(j.responseText);if(h.result.resultCode=="0"&&h.list&&h.list.length>0){var k=h.list;for(var l=0;l<k.length;l++){var m=b.create(k[l]);m.set("_flag","A");m.set("sizeNo",k[l].sizeNo);m.set("barcode",k[l].sizeNo);m.set("materialNo",c);m.set("billNo",g);a.add(m)}}else{Ext.MessageBox.alert("提示","没有找到码组为【"+f+"】的信息!")}},failure:function(h,i){Ext.MessageBox.show({title:"错误提示",msg:h.responseText,height:300,width:400})}})},onBtnBillNewClick:function(a){var b=this;b.callParent(arguments);b.lookupReference("btnOther1").setDisabled(false);b.lookupReference("materialType").setValue("3")},setComponentReadOnly:function(a,b){var c=this;if(!c.lookupReference(a)||!c.lookupReference(a).query){return}var d=c.lookupReference(a).query("textfield,numberfield,datefield,combo");var e=c.lookupReference("billStatus").value;if(e&&e=="20"){c.lookupReference("btnOther1").setDisabled(true);c.lookupReference("materialNo").setReadOnly(true);c.lookupReference("maintainType").setReadOnly(true);return}Ext.each(d,function(f){if(f.name=="currencyNo"||f.name=="specialCode"||f.name=="modelNo"){f.setReadOnly(true)}else{f.setReadOnly(b)}})},afterSave:function(a,b){var c=this;c.callParent(arguments);c.setComponentReadOnly("tabpanel",true)},onChangeBrandNo:function(b,a){this.setSpecialCodeValue(null,null)},onChangeParentCategoryNo:function(g,f){var d=this.lookupReference("parentCategoryNo").getValue();var c=this.lookupReference("parentCategoryNo");var h=this.lookupReference("categoryNo");if(d){h.setValue("");var b=c.store.findBy(function(i,j){return i.get("categoryNo")==d});var a=c.store.getAt(b);var e=a.get("categoryNo");h.store.proxy.extraParams.categoryNo=e;h.store.load()}},onChangeCategory:function(d,c,b){var a=this.lookupReference("parentCategoryNo").getValue();if(!a){d.setValue("");Ext.Msg.alert("提示","请先选择大类");return false}},onChangeModelNo:function(c,b){var e=this.lookupReference("modelNo").getValue();var a=this.lookupReference("styleNo");if(e){a.setValue("");a.store.proxy.extraParams.modelNo=e;a.store.load();var d=this.lookupReference("mastergrid").getSelection()[0];d.set("styleNo","")}},onChangeStyleNo:function(c,b,a){var e=this.lookupReference("modelNo").getValue();if(!e){c.setValue("");var d=this.lookupReference("mastergrid").getSelection()[0];d.set("styleNo","");Ext.Msg.alert("提示","请先选择型体");return false}},onGridBeforeEdit:function(h,l){if(this.gridCannotEditKeyField(l)===false){return false}if(l.field=="categoryNo"){var i=l.record;var f=i.get("parentCategoryNo");var a=i.get("categoryNo");if(f==""){Ext.Msg.alert("提示","请先选择大类");return false}else{var n=this.lookupReference("parentCategoryNo");var b=n.store.findBy(function(e,r){return e.get("categoryNo")==f});var d=n.store.getAt(b);var k=d.get("categoryId");var o=l.column.getEditor().store;var p=o.proxy.extraParams.parentCategoryId;var j=n.store.findBy(function(e,r){return e.get("categoryId")==p});var i=n.store.getAt(j);var m=null;if(i){m=i.get("categoryNo")}o.proxy.extraParams.parentCategoryId=k;o.on("load",function(){l.column.getEditor().setValue(a)});o.load()}}if(l.field=="styleNo"){var i=l.record;var c=i.get("modelNo");var g=i.get("styleNo");if(c==""){Ext.Msg.alert("提示","请先选择型体");return false}else{var o=l.column.getEditor().store;var q=o.proxy.extraParams.modelNo;if(c!=q){o.proxy.extraParams.modelNo=c;o.on("load",function(){l.column.getEditor().setValue(g)});o.load()}}}},initAddData:function(e){var d=this,b=d.getObjList(),f=d.workObject;if(d.callParent(arguments)===false){return false}if(d.lookupReference("maintainType").getValue()==""){Hc.alert("请先选择[维护类型]");return false}if(f.viewModelKey=="mastergrid"&&d.gridEditingList.length>0){Hc.alert("有一笔数据正在编辑，不能新增主表记录");return false}d.lookupReference("maintainType").setReadOnly(true);if(f.viewModelKey=="mastergrid"){var g=d.lookupReference("maintainType").value;if(g==1){return}Ext.Ajax.request({url:Hc.mdmPath+"bas_system_code/getSheetIdCode.json",method:"GET",params:{billtypeNo:"12400503"},success:function(i){var h=JSON.parse(i.responseText);if(h.result.resultCode=="0"){var j=h.sheetIdCode;e.set("materialNo",j);e.set("materialCode","待编码");e.set("currencyNo","RMB")}else{e.set("materialCode","待编码");Ext.MessageBox.alert("提示","申请物料编号失败!")}},failure:function(h,i){Ext.MessageBox.show({title:"错误提示",msg:h.responseText,height:300,width:400})}})}if(f.supGrid){var c=b[f.supGrid].getSelection()[0];if(!c){Hc.alert("主表没有选中记录时，从表不能新增记录");return false}if(!c.phantom){var a=b[f.supGrid].primaryKey;e.set(a,c.get(a))}e.set("materialNo",c.get("materialNo"))}},onBillGridDataChange:function(c){var d=this,b="mastergrid",a=d.getDirtyIndex(c);if(a>-1){Ext.Array.include(d.gridEditingList,b)}else{Ext.Array.remove(d.gridEditingList,b)}},onGridSelectionChange:function(c,f,a,b){var d=this;d.callParent(arguments);if(d.lookupReference("mastergrid").getSelection()&&d.lookupReference("mastergrid").getSelection().length>0){d.setComponentReadOnly("tabpanel",false);var g=d.lookupReference("billStatus").value;if(g<20){d.lookupReference("materialNo").setReadOnly(d.lookupReference("maintainType").getValue()=="0")}}else{d.setComponentReadOnly("tabpanel",true)}if(d.lookupReference("mastergrid").store.getCount()<=0){d.lookupReference("maintainType").setReadOnly(false)}else{d.lookupReference("maintainType").setReadOnly(true)}},onGrid2BeforeLoad:function(a,b){if(this.callParent(arguments)===false){return false}var c=this.lookupReference("mastergrid").getSelection()[0];if(c){a.proxy.extraParams.materialNo=c.get("materialNo")}},getSizeNos:function(){var e=this,d=e.getObjList()["grid2"],b=d.store,c=b.model;var a=e.lookupReference("sizeTypeNo").value;Ext.Ajax.request({url:Hc.mdmPath+"bill_material_size/listAll.json",method:"GET",params:{basSizeType:a},success:function(h){var g=JSON.parse(h.responseText);if(g.result.resultCode=="0"&&g.list&&g.list.length>0){var j=g.list;for(var k=0;k<j.length;k++){var f=c.create(j[k]);b.add(f)}}else{Ext.MessageBox.alert("提示","配码明细加载不正确!")}},failure:function(f){Hc.show({title:"错误提示",msg:f.responseText,height:300,width:500})}})},beforeSave:function(c){var h=this;h.callParent(arguments);if(!(h.getObj("editMaterialInfo").isValid())){return false}var m=h.getObjList()["mastergrid"].store;var j=true;for(var e=0;e<m.getCount();e++){var n=m.getAt(e).get("materialCode");var k=m.getAt(e).get("advicePrice");var b=m.getAt(e).get("developmentTimes");if(k<0){j=false;Hc.alert("参考单价必须大于零!");break}else{if(b<0){j=false;Hc.alert("开发次数必须大于零!");break}}if(n=="待编码"){var g=m.getAt(e).get("materialNo");m.getAt(e).set("materialCode",g)}}if(j==false){return false}var l=h.getObjList()["grid2"].store,d=h.lookupReference("sizeTypeNo").store,f=h.lookupReference("sizeTypeNo").getValue(),a=d.getAt(d.findExact("sizeTypeNo",f));if(a&&a.get("sizeTypeName")=="无尺码"){return true}else{if(l.getCount()<=0){Hc.alert("请录入尺码明细!");return false}}return true},onGridAfterEdit:function(b,h){var d=this;if(h.field=="productCode"){onProdTxtAfterEdit(null,null)}if(h.field=="brandNo"){d.setSpecialCodeValue(b,h)}if(h.field=="parentCategoryNo"){var c=h.originalValue;var g=h.value;if(c!=g){var a=h.record;a.set("categoryNo","")}}if(h.field=="modelNo"){var i=h.originalValue;var f=h.value;if(i!=f){var a=h.record;a.set("styleNo","")}}this.checkKeyValue(h)},setSpecialCodeValue:function(c,d){var b=Ext.create("Hc_Common.store.Base",{fields:["brandCategory","brandCname","brandCode","brandNo","specialCode"],proxy:{url:Hc.mdmPath+"bas_brand/listAll.json"}});if(d==null){b.proxy.extraParams.brandNo=this.lookupReference("brandNo").getValue();b.reload({scope:this,callback:function(g,i,f){if(g.length>0){this.lookupReference("specialCode").setValue(g[0].data.specialCode);var h=this.lookupReference("mastergrid").getSelection()[0];h.set("specialCode",g[0].data.specialCode)}}})}else{var a=d.record;var e=this.lookupReference("mastergrid").getSelection()[0];b.proxy.extraParams.brandNo=a.get("brandNo");b.reload({scope:this,callback:function(g,h,f){if(g.length>0){a.set("specialCode",g[0].data.specialCode)}else{a.set("brandNo","");a.set("specialCode","");Hc.alert("不存在此品牌");return}}})}},onGrid2AfterEdit:function(b,d){var c=this;if(d.field=="sizeNo"){var e=d.originalValue,a=d.value;if(a){c.checkSizeNo(e,a,d);return}}this.checkKeyValue(d)},onGridLoaded:function(c,b,a,d){var e=this,c=e.getObjList()["mastergrid"].store;e.callParent(arguments);if(c&&c.getCount()>0){e.lookupReference("maintainType").setReadOnly(true)}else{e.lookupReference("maintainType").setReadOnly(false)}},checkSizeNo:function(d,a,b){var c=b.record;Ext.Ajax.request({url:Hc.mdmPath+"bas_size/listAll.json",method:"GET",params:{sizeNo:a},success:function(f){var e=JSON.parse(f.responseText);if(e.result.resultCode=="0"&&e.list&&e.list.length>0){var g=e.list;c.set("barcode",a)}else{c.set("sizeNo",d);Ext.MessageBox.alert("提示","尺码不存在!")}},failure:function(e,f){Ext.MessageBox.show({title:"错误提示",msg:e.responseText,height:300,width:400})}})}});
Ext.define("Hc_mdm.view.billmaterialdtl.BillMaterialDtlModel",{extend:"Hc_Common.view.BaseBillDetailPageModel",alias:"viewmodel.billmaterialdtl"});
Ext.define("Hc_mdm.view.billmaterialhalf.BillMaterialHalf",{extend:"Hc_Common.view.BaseBillListPage",alias:"widget.billmaterialhalf",controller:"billmaterialhalf",viewModel:{type:"billmaterialhalf"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",name:"materialType",fieldLabel:"物料类型",hidden:true,value:2}],gridColumns:[{dataIndex:"maintainType",text:"维护类型",xtype:"bllookupedit",displayvalue:"0=新建:1=修改"},{dataIndex:"materialType",text:"物料类型",xtype:"bllookupedit",displayvalue:"1=原料:2=半成品:3=成品"}],gridModel:"Hc_mdm.model.BillMaterial",gridLoadUrl:Hc.mdmPath+"bill_material/list.json",dtlName:"billmaterialhalfdtl",showModel:"selftab"});a.callParent()}});
Ext.define("Hc_mdm.view.billmaterialhalf.BillMaterialHalfController",{extend:"Hc_Common.view.BaseBillListPageController",alias:"controller.billmaterialhalf"});
Ext.define("Hc_mdm.view.billmaterialhalf.BillMaterialHalfModel",{extend:"Hc_Common.view.BaseBillListPageModel",alias:"viewmodel.billmaterialhalf"});
Ext.define("Hc_mdm.view.billmaterialhalfdtl.BillMaterialHalfDtl",{extend:"Hc_Common.view.BaseBillDetailPage",alias:"widget.billmaterialhalfdtl",controller:"billmaterialhalfdtl",viewModel:{type:"billmaterialhalfdtl"},initComponent:function(){var f=this,g=Ext.create("Hc_mdm.store.BasParentCategory"),d=Ext.create("Hc_mdm.store.BasParentCategory"),e=Ext.create("Hc_mdm.store.BasCategory"),b=Ext.create("Hc_mdm.store.BasCategory");g.proxy.extraParams.materialType=2;d.proxy.extraParams.materialType=2;Ext.apply(f,{billType:"124010",billItems:[{name:"maintainType",bind:{value:"{billRow.maintainType}"},reference:"maintainType",xtype:"extcombox",fieldLabel:"维护类型",displayvalue:"0=新建:1=修改",emptyText:"请选择",allowBlank:false},{name:"materialType",bind:{value:"{billRow.materialType}"},reference:"materialType",xtype:"extcombox",fieldLabel:"物料类型",displayvalue:"1=原料:2=半成品:3=成品",canInput:false,value:2},{name:"billStatus",bind:{value:"{billRow.billStatus}"},xtype:"extcombox",allowBlank:false,fieldLabel:"单据状态",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=bill_status",displaymember:"itemName",valuemember:"itemCode",hidden:true,reference:"billStatus"},{name:"remarks",bind:{value:"{billRow.remarks}"},xtype:"textfield",fieldLabel:"备注"}],billLoadUrl:Hc.mdmPath+"bill_material/list.json",billSaveUrl:Hc.mdmPath+"bill_material/saveMasterCustomerList.json",billAuditUrl:Hc.mdmPath+"bill_material/audit.json",billExportUrl:Hc.mdmPath+"bill_material/do_export.json",billModel:"Hc_mdm.model.BillMaterial",billSubGrid:["mastergrid","grid2"],editStatus:10,gridColumns:[{dataIndex:"lineId",text:"行id",hidden:true},{dataIndex:"materialNo",text:"物料ID"},{dataIndex:"materialCode",text:"物料编码"},{dataIndex:"materialName",text:"物料名称",hidden:false,width:140},{dataIndex:"brandNo",text:"品牌",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandEname",valuemember:"brandNo",hidden:false,readOnly:true},{dataIndex:"specialCode",text:"特征码"},{dataIndex:"sizeTypeNo",text:"码组",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_size_type/listAll.json",displaymember:"sizeTypeName",valuemember:"sizeTypeNo",hidden:false,readOnly:true},{dataIndex:"parentCategoryNo",text:"大类",xtype:"bllookupedit",estore:g,gstore:d,displaymember:"categoryName",valuemember:"categoryNo",hidden:false,readOnly:true},{dataIndex:"categoryNo",text:"小类",xtype:"bllookupedit",estore:e,gstore:b,displaymember:"categoryName",valuemember:"categoryNo",hidden:false,readOnly:true},{dataIndex:"advicePrice",text:"参考单价"},{dataIndex:"modelNo",text:"型体"},{dataIndex:"styleNo",text:"款号"},{dataIndex:"normalUnit",text:"基本单位",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",hidden:false,readOnly:true},{dataIndex:"materialSource",text:"物料属性",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=material_source",displaymember:"itemName",valuemember:"itemCode",hidden:false,readOnly:true},{dataIndex:"taxRateNo",text:"税率",xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_tax_rate/listAll.json",displaymember:"taxRateName",valuemember:"taxRateNo",hidden:false,readOnly:true},{dataIndex:"remarks",text:"备注",width:140}],gridPrimaryKey:"lineId",gridModel:"Hc_mdm.model.BillMaterialDtl",gridSubGrid:["grid2"],gridLoadUrl:Hc.mdmPath+"bill_material_dtl/list.json",grid2Columns:[{dataIndex:"lineId",text:"行id",editor:{allowBlank:true},hidden:true},{dataIndex:"materialNo",text:"物料ID"},{dataIndex:"sizeNo",text:"尺码",width:140,editor:{allowBlank:false}},{dataIndex:"barcode",text:"条码",width:140,hidden:true}],grid2Model:"Hc_mdm.model.BillMaterialSize",grid2SupGrid:"mastergrid",grid2PrimaryKey:"lineId",grid2LoadUrl:Hc.mdmPath+"bill_material_size/list.json",grid2UnionKey:"materialNo,sizeNo"});var c={xtype:"form",reference:"editMaterialInfo",layout:{type:"table",columns:4},defaults:{labelAlign:"right",labelWidth:80,width:"100%"},collapsible:false,border:false,items:[{xtype:"textfield",fieldLabel:"行id",bind:{value:"{gridRow.lineId}"},hidden:true,name:"lineId"},{xtype:"searchhelpfield",reference:"materialNo",fieldLabel:"物料ID",bind:{value:"{gridRow.materialNo}"},allowBlank:false,regex:/^[0-9a-zA-Z]+$/,regexText:"请输入20位字母或数字",maxLength:20,enforceMaxLength:true,name:"materialNo",isAutoLoad:false,url:Hc.mdmPath+"bas_material/list.json?materialType=2",otherFields:"materialNo,materialCode,barcodeEan,materialName,specifications,oldCode,inventoryCategory,materialSource,taxRateNo,taxCategory,sizeTypeNo,allowSale,allowDelegate,allowPurchase,allowProduce,materialStatus,enableFlag,codeRuleNo,advicePrice,currencyNo,seasonNo,parentCategoryNo,categoryNo,modelNo,styleNo,productCode,manufacturer,brandNo,developmentTimes,lining,insoles,outerBottom,style,salesChannels,vampMaterial,colorNo,genderType,series,joinOrderMetting,textures,normalUnit,orderNo,remarks,specialCode,ifQc",gridColumns:[{dataIndex:"materialNo",text:"物料ID",width:140},{dataIndex:"materialCode",text:"物料编码"},{dataIndex:"materialName",text:"物料名称",width:200}],searchItems:[{name:"materialNo",fieldLabel:"物料ID"},{name:"materialCode",fieldLabel:"物料编码"},{name:"materialName",fieldLabel:"物料名称"}],winTitle:"选择物料",winWidth:480,winHigh:550},{xtype:"textfield",reference:"materialCode",fieldLabel:"物料编码",bind:{value:"{gridRow.materialCode}"},allowBlank:false,enforceMaxLength:true,name:"materialCode"},{xtype:"textfield",reference:"materialName",fieldLabel:"物料名称",bind:{value:"{gridRow.materialName}"},allowBlank:false,colspan:2,enforceMaxLength:true,name:"materialName"},{xtype:"extcombox",reference:"brandNo",fieldLabel:"品牌",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandEname",valuemember:"brandNo",name:"brandNo",bind:{value:"{gridRow.brandNo}"},allowBlank:false},{fieldLabel:"特征码",canInput:false,xtype:"textfield",name:"specialCode",bind:{value:"{gridRow.specialCode}"},reference:"specialCode",readOnly:true},{xtype:"extcombox",reference:"sizeTypeNo",fieldLabel:"码组",displayvalue:Hc.mdmPath+"bas_size_type/listAll.json",displaymember:"sizeTypeName",name:"sizeTypeNo",valuemember:"sizeTypeNo",bind:{value:"{gridRow.sizeTypeNo}"},allowBlank:false},{xtype:"combo",fieldLabel:"大类",name:"parentCategoryNo",reference:"parentCategoryNo",editable:false,displayField:"categoryName",valueField:"categoryNo",store:g,renderer:function(i){var h=g.findExact("categoryNo",i);return h>-1?g.getAt(h).data.categoryName:i},listeners:{select:"onChangeParentCategoryNo"},bind:{value:"{gridRow.parentCategoryNo}"},allowBlank:false,name:"parentCategoryNo"},{xtype:"combo",fieldLabel:"小类",name:"categoryNo",reference:"categoryNo",editable:false,displayField:"categoryName",valueField:"categoryNo",emptyText:"请先选择大类",store:{type:"basestore",fields:["categoryNo","categoryName"],proxy:{url:Hc.mdmPath+"bill_material_dtl/getCategory.json"},autoLoad:true,listeners:{beforequery:function(){if(!f.lookupReference("parentCategoryNo").getValue()){Ext.Msg.alert("提示","请先选择大类");return false}}}},listeners:{select:"onChangeCategory"},bind:{value:"{gridRow.categoryNo}"},allowBlank:false},{xtype:"extcombox",reference:"normalUnit",fieldLabel:"基本单位",displayvalue:Hc.mdmPath+"bas_unit/listAll.json",displaymember:"unitName",valuemember:"unitNo",bind:{value:"{gridRow.normalUnit}"},allowBlank:false,name:"normalUnit"},{xtype:"searchhelpfield",fieldLabel:"款号",name:"styleNo",reference:"styleNo",url:Hc.mdmPath+"bas_style/list.json",otherFields:"modelNo",reference:"styleNo",isAutoLoad:false,gridColumns:[{dataIndex:"styleNo",text:"款号编号",flex:0.5},{dataIndex:"styleName",text:"款号名称",flex:0.5}],searchItems:[{name:"styleNo",fieldLabel:"款号编号"},{name:"styleName",fieldLabel:"款号名称"}],winTitle:"选择款号",winWidth:480,winHigh:550,bind:{value:"{gridRow.styleNo}"},allowBlank:false},{xtype:"textfield",fieldLabel:"型体",name:"modelNo",reference:"modelNo",bind:{value:"{gridRow.modelNo}"},allowBlank:false},{xtype:"extcombox",reference:"materialSource",fieldLabel:"物料属性",displayvalue:Hc.mdmPath+"bas_dict/getbasdictcombo.json?dictCode=material_source",displaymember:"itemName",valuemember:"itemCode",bind:{value:"{gridRow.materialSource}"},allowBlank:false,name:"materialSource"},{xtype:"numberfield",reference:"advicePrice",fieldLabel:"参考单价",bind:{value:"{gridRow.advicePrice}"},allowBlank:false,name:"advicePrice"},{xtype:"extcombox",reference:"taxRateNo",fieldLabel:"税率",displayvalue:Hc.mdmPath+"bas_tax_rate/listAll.json",displaymember:"taxRateName",valuemember:"taxRateNo",bind:{value:"{gridRow.taxRateNo}"},allowBlank:false,name:"taxRateNo"},{xtype:"extcombox",reference:"currencyNo",fieldLabel:"币别",displayvalue:Hc.mdmPath+"bas_currency/listAll.json",displaymember:"currencyName",valuemember:"currencyNo",bind:{value:"{gridRow.currencyNo}"},canInput:false,name:"currencyNo",readOnly:true},{xtype:"textfield",reference:"oldCode",fieldLabel:"旧物料编码",bind:{value:"{gridRow.oldCode}"},regex:/^[0-9a-zA-Z]+$/,regexText:"请输入30位字母或数字",maxLength:30,name:"oldCode",enforceMaxLength:true},{xtype:"extcombox",reference:"ifQc",fieldLabel:"是否质检",allowBlank:false,displayvalue:"0=否:1=是",name:"ifQc",bind:{value:"{gridRow.ifQc}"}},{xtype:"textfield",reference:"remarks",fieldLabel:"备注",bind:{value:"{gridRow.remarks}"},maxLength:60,name:"remarks",colspan:2,enforceMaxLength:true}]};c.layout.columns=4;var a={xtype:"tabpanel",reference:"tabpanel",region:"south",height:180,split:true,autoDestroy:true,tabPosition:"top",autoScroll:true,border:false,items:[{layout:"fit",index:0,items:[c],title:"物料明细",autoScroll:true,border:0,bodyPadding:3},{layout:"fit",index:1,items:[f.grid2],title:"尺码明细",autoScroll:true,border:0}]};f.otherItems=[a];f.callParent()}});
Ext.define("Hc_mdm.view.billmaterialhalfdtl.BillMaterialHalfDtlController",{extend:"Hc_Common.view.BaseBillDetailPageController",alias:"controller.billmaterialhalfdtl",gridEditingList:[],init:function(){this.callParent(arguments);var d=this,b=d.getObjList(),c=b.commonbill,a=c.getRecord();if(b.mastergrid){b.mastergrid.store.on("update",d.onBillGridDataChange,d);b.mastergrid.store.on("datachanged",d.onBillGridDataChange,d)}d.lookupReference("sizeTypeNo").on("beforequery",function(){var e=d.lookupReference("grid2").store.count();if(e>0){Hc.alert("请先删除[尺码明细]再更换码组")}return(e==0)});d.setComponentReadOnly("tabpanel",true);if(d.lookupReference("brandNo")){d.lookupReference("brandNo").on("select","onChangeBrandNo",d)}d.gridEditingList=[];d.lookupReference("btnOther1").setText("批量尺码");d.lookupReference("btnOther1").setHidden(false);if(!a){return}a.set("materialType","2")},beforeCopy:function(a){var b=this;var c=b.lookupReference("maintainType").getValue();if(c==1){Hc.alert("维护类型为【修改】状态，不允许复制!");return false}Ext.Ajax.request({url:Hc.mdmPath+"bas_system_code/getSheetIdCode.json",method:"GET",params:{billtypeNo:"12401002"},success:function(e){var d=JSON.parse(e.responseText);if(d.result.resultCode=="0"){var f=d.sheetIdCode;a.set("materialNo",f);a.set("materialCode","待编码");if(b.workObject.hasOrderNo){var g=b.workObject.store,h=(g.max("orderNo")||0)+1;a.set("orderNo",h)}}else{Ext.MessageBox.alert("提示","申请物料编号失败!");return false}},failure:function(d,e){Ext.MessageBox.show({title:"错误提示",msg:d.responseText,height:300,width:400})}});return true},onBtnOther1:function(d){var e=this;var a=e.lookupReference("grid2").store;var c=e.lookupReference("materialNo").value;var b=a.model;var f=e.lookupReference("sizeTypeNo").value;var g=e.getObjList()["commonbill"].getRecord().get("billNo");if(Ext.isEmpty(f)){Hc.alert("请先输入码组!");return}if(a.getCount()>0){Hc.alert("尺码明细已经存在尺码，不允许导入!");return}Ext.Ajax.request({url:Hc.mdmPath+"bas_size/listAll.json",method:"GET",params:{sizeTypeNo:f},success:function(j){var h=JSON.parse(j.responseText);if(h.result.resultCode=="0"&&h.list&&h.list.length>0){var k=h.list;for(var l=0;l<k.length;l++){var m=b.create(k[l]);m.set("_flag","A");m.set("sizeNo",k[l].sizeNo);m.set("barcode",k[l].sizeNo);m.set("materialNo",c);m.set("billNo",g);a.add(m)}}else{Ext.MessageBox.alert("提示","没有找到码组为【"+f+"】的信息!")}},failure:function(h,i){Ext.MessageBox.show({title:"错误提示",msg:h.responseText,height:300,width:400})}})},onBtnBillNewClick:function(a){var b=this;b.callParent(arguments);b.lookupReference("btnOther1").setDisabled(false);b.lookupReference("materialType").setValue("2")},setComponentReadOnly:function(a,b){var c=this;if(!c.lookupReference(a)||!c.lookupReference(a).query){return}var d=c.lookupReference(a).query("textfield,numberfield,datefield,combo");var e=c.lookupReference("billStatus").value;if(e&&e=="20"){c.lookupReference("btnOther1").setDisabled(true);c.lookupReference("materialNo").setReadOnly(true);c.lookupReference("maintainType").setReadOnly(true);return}Ext.each(d,function(f){if(f.name=="currencyNo"||f.name=="specialCode"||f.name=="modelNo"){f.setReadOnly(true)}else{f.setReadOnly(b)}})},afterSave:function(a,b){var c=this;c.callParent(arguments);c.setComponentReadOnly("tabpanel",true)},onChangeBrandNo:function(b,a){this.setSpecialCodeValue(null,null)},onChangeParentCategoryNo:function(g,f){var d=this.lookupReference("parentCategoryNo").getValue();var c=this.lookupReference("parentCategoryNo");var h=this.lookupReference("categoryNo");if(d){h.setValue("");var b=c.store.findBy(function(i,j){return i.get("categoryNo")==d});var a=c.store.getAt(b);var e=a.get("categoryNo");h.store.proxy.extraParams.categoryNo=e;h.store.load()}},onChangeCategory:function(d,c,b){var a=this.lookupReference("parentCategoryNo").getValue();if(!a){d.setValue("");Ext.Msg.alert("提示","请先选择大类");return false}},onChangeModelNo:function(c,b){var e=this.lookupReference("modelNo").getValue();var a=this.lookupReference("styleNo");if(e){a.setValue("");a.store.proxy.extraParams.modelNo=e;a.store.load();var d=this.lookupReference("mastergrid").getSelection()[0];d.set("styleNo","")}},onChangeStyleNo:function(c,b,a){var e=this.lookupReference("modelNo").getValue();if(!e){c.setValue("");var d=this.lookupReference("mastergrid").getSelection()[0];d.set("styleNo","");Ext.Msg.alert("提示","请先选择型体");return false}},onGridBeforeEdit:function(h,l){if(this.gridCannotEditKeyField(l)===false){return false}if(l.field=="categoryNo"){var i=l.record;var f=i.get("parentCategoryNo");var a=i.get("categoryNo");if(f==""){Ext.Msg.alert("提示","请先选择大类");return false}else{var n=this.lookupReference("parentCategoryNo");var b=n.store.findBy(function(e,r){return e.get("categoryNo")==f});var d=n.store.getAt(b);var k=d.get("categoryId");var o=l.column.getEditor().store;var p=o.proxy.extraParams.parentCategoryId;var j=n.store.findBy(function(e,r){return e.get("categoryId")==p});var i=n.store.getAt(j);var m=null;if(i){m=i.get("categoryNo")}o.proxy.extraParams.parentCategoryId=k;o.on("load",function(){l.column.getEditor().setValue(a)});o.load()}}if(l.field=="styleNo"){var i=l.record;var c=i.get("modelNo");var g=i.get("styleNo");if(c==""){Ext.Msg.alert("提示","请先选择型体");return false}else{var o=l.column.getEditor().store;var q=o.proxy.extraParams.modelNo;if(c!=q){o.proxy.extraParams.modelNo=c;o.on("load",function(){l.column.getEditor().setValue(g)});o.load()}}}},initAddData:function(e){var d=this,b=d.getObjList(),f=d.workObject;if(d.callParent(arguments)===false){return false}if(d.lookupReference("maintainType").getValue()==""){Hc.alert("请先选择[维护类型]");return false}if(f.viewModelKey=="mastergrid"&&d.gridEditingList.length>0){Hc.alert("有一笔数据正在编辑，不能新增主表记录");return false}d.lookupReference("maintainType").setReadOnly(true);if(f.viewModelKey=="mastergrid"){var g=d.lookupReference("maintainType").value;if(g==1){return}Ext.Ajax.request({url:Hc.mdmPath+"bas_system_code/getSheetIdCode.json",method:"GET",params:{billtypeNo:"12401002"},success:function(i){var h=JSON.parse(i.responseText);if(h.result.resultCode=="0"){var j=h.sheetIdCode;e.set("materialNo",j);e.set("materialCode","待编码");e.set("currencyNo","RMB")}else{e.set("materialCode","待编码");Ext.MessageBox.alert("提示","申请物料编号失败!")}},failure:function(h,i){Ext.MessageBox.show({title:"错误提示",msg:h.responseText,height:300,width:400})}})}if(f.supGrid){var c=b[f.supGrid].getSelection()[0];if(!c){Hc.alert("主表没有选中记录时，从表不能新增记录");return false}if(!c.phantom){var a=b[f.supGrid].primaryKey;e.set(a,c.get(a))}e.set("materialNo",c.get("materialNo"))}},onBillGridDataChange:function(c){var d=this,b="mastergrid",a=d.getDirtyIndex(c);if(a>-1){Ext.Array.include(d.gridEditingList,b)}else{Ext.Array.remove(d.gridEditingList,b)}},onGridSelectionChange:function(c,f,a,b){var d=this;if(d.lookupReference("mastergrid").getSelection()&&d.lookupReference("mastergrid").getSelection().length>0){d.setComponentReadOnly("tabpanel",false);var g=d.lookupReference("billStatus").value;if(g<20){d.lookupReference("materialNo").setReadOnly(d.lookupReference("maintainType").getValue()=="0")}}else{d.setComponentReadOnly("tabpanel",true)}if(d.lookupReference("mastergrid").store.getCount()<=0){d.lookupReference("maintainType").setReadOnly(false)}else{d.lookupReference("maintainType").setReadOnly(true)}d.callParent(arguments)},getSizeNos:function(){var e=this,d=e.getObjList()["grid2"],b=d.store,c=b.model;var a=e.lookupReference("sizeTypeNo").value;Ext.Ajax.request({url:Hc.mdmPath+"bill_material_size/listAll.json",method:"GET",params:{basSizeType:a},success:function(h){var g=JSON.parse(h.responseText);if(g.result.resultCode=="0"&&g.list&&g.list.length>0){var j=g.list;for(var k=0;k<j.length;k++){var f=c.create(j[k]);b.add(f)}}else{Ext.MessageBox.alert("提示","配码明细加载不正确!")}},failure:function(f){Hc.show({title:"错误提示",msg:f.responseText,height:300,width:500})}})},beforeSave:function(b){var f=this;f.callParent(arguments);if(!(f.getObj("editMaterialInfo").isValid())){return false}var l=f.getObjList()["mastergrid"].store;var h=true;for(var d=0;d<l.getCount();d++){var m=l.getAt(d).get("materialCode");var j=l.getAt(d).get("advicePrice");if(j<=0){h=false;break}if(m=="待编码"){var g=l.getAt(d).get("materialNo");l.getAt(d).set("materialCode",g)}}if(h==false){Hc.alert("参考单价必须大于零!");return false}var k=f.getObjList()["grid2"].store,c=f.lookupReference("sizeTypeNo").store,e=f.lookupReference("sizeTypeNo").getValue(),a=c.getAt(c.findExact("sizeTypeNo",e));if(a&&a.get("sizeTypeName")=="无尺码"){return true}else{if(k.getCount()<=0){Hc.alert("请录入尺码明细!");return false}}return true},onGridAfterEdit:function(b,h){var d=this;if(h.field=="productCode"){onProdTxtAfterEdit(null,null)}if(h.field=="brandNo"){d.setSpecialCodeValue(b,h)}if(h.field=="parentCategoryNo"){var c=h.originalValue;var g=h.value;if(c!=g){var a=h.record;a.set("categoryNo","")}}if(h.field=="modelNo"){var i=h.originalValue;var f=h.value;if(i!=f){var a=h.record;a.set("styleNo","")}}this.checkKeyValue(h)},setSpecialCodeValue:function(c,d){var b=Ext.create("Hc_Common.store.Base",{fields:["brandCategory","brandCname","brandCode","brandNo","specialCode"],proxy:{url:Hc.mdmPath+"bas_brand/listAll.json"}});if(d==null){b.proxy.extraParams.brandNo=this.lookupReference("brandNo").getValue();b.reload({scope:this,callback:function(g,i,f){if(g.length>0){this.lookupReference("specialCode").setValue(g[0].data.specialCode);var h=this.lookupReference("mastergrid").getSelection()[0];h.set("specialCode",g[0].data.specialCode)}}})}else{var a=d.record;var e=this.lookupReference("mastergrid").getSelection()[0];b.proxy.extraParams.brandNo=a.get("brandNo");b.reload({scope:this,callback:function(g,h,f){if(g.length>0){a.set("specialCode",g[0].data.specialCode)}else{a.set("brandNo","");a.set("specialCode","");Hc.alert("不存在此品牌");return}}})}},onGrid2BeforeLoad:function(a,b){if(this.callParent(arguments)===false){return false}var c=this.lookupReference("mastergrid").getSelection()[0];if(c){a.proxy.extraParams.materialNo=c.get("materialNo")}},onGrid2AfterEdit:function(b,d){var c=this;if(d.field=="sizeNo"){var e=d.originalValue,a=d.value;if(a){c.checkSizeNo(e,a,d)}}this.checkKeyValue(d)},onGridLoaded:function(c,b,a,d){var e=this,c=e.getObjList()["mastergrid"].store;e.callParent(arguments);if(c&&c.getCount()>0){e.lookupReference("maintainType").setReadOnly(true)}else{e.lookupReference("maintainType").setReadOnly(false)}},checkSizeNo:function(d,a,b){var c=b.record;Ext.Ajax.request({url:Hc.mdmPath+"bas_size/listAll.json",method:"GET",params:{sizeNo:a},success:function(f){var e=JSON.parse(f.responseText);if(e.result.resultCode=="0"&&e.list&&e.list.length>0){var g=e.list;c.set("barcode",a)}else{c.set("sizeNo",d);Ext.MessageBox.alert("提示","尺码不存在!")}},failure:function(e,f){Ext.MessageBox.show({title:"错误提示",msg:e.responseText,height:300,width:400})}})}});
Ext.define("Hc_mdm.view.billmaterialhalfdtl.BillMaterialHalfDtlModel",{extend:"Hc_Common.view.BaseBillDetailPageModel",alias:"viewmodel.billmaterialhalfdtl"});
